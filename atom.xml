<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Byte Tank - Pedro Lopes Blog]]></title>
  <link href="https://lopespm.com/atom.xml" rel="self"/>
  <link href="https://lopespm.com/"/>
  <updated>2025-09-16T23:20:09+00:00</updated>
  <id>https://lopespm.com/</id>
  <author>
    <name><![CDATA[Pedro Lopes]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Why is my kitchen so clean?]]></title>
    <link href="https://lopespm.com/notes/2025/09/16/why_is_my_kitchen_so_clean.html"/>
    <updated>2025-09-16T00:00:00+00:00</updated>
    <id>https://lopespm.com/notes/2025/09/16/why_is_my_kitchen_so_clean</id>
    <content type="html"><![CDATA[<p>If you had a video call with me, if you happened to see my videos, or if you visited my flat, odds are that a question came up to your mind. The same question that I’ve been asked at least 8 times (and counting) over these past years: <em>“How do you keep your kitchen so clean?”</em> With a possible follow up of <em>“Do you even cook?”</em> or <em>“Have you just moved in?”</em>, amongst others.</p>

<center>
          <picture aria-label="What you would see during a video call">
             <source type="image/webp" srcset="/files/why_is_my_kitchen_so_clean/pvc.webp" aria-label="What you would see during a video call" />
             <source type="image/png" srcset="/files/why_is_my_kitchen_so_clean/pvc.png" aria-label="What you would see during a video call" />
             <img src="https://lopespm.com/files/why_is_my_kitchen_so_clean/pvc.png" aria-label="What you would see during a video call" />
           </picture>
         </center>

<p><br /></p>

<p>I’m of the opinion that once you get asked multiple times the same question, then it’s time to document it and have it available for the next person.</p>

<p>It’s time to address it.</p>

<!--more-->

<h2 id="behind-the-scenes">Behind the scenes</h2>

<p>This is how my kitchen stand looks on an average work day. I didn’t prop it up for the picture.</p>

<div class="image-mosaic">
  <div class="image-mosaic-card image-mosaic-card-tall image-mosaic-card-wide" style="background-image: url('/files/why_is_my_kitchen_so_clean/cooking/pkitchen.jpg')"></div>
</div>

<p>In case you are wondering, the container in the center is soaking buckwheat groats, which after a day of soaking I grind, mix condiments and sometimes small vegetables, put in the oven, resulting in a delicious loaf of buckwheat bread that I use as a replacement for bread. I highly recommend it.</p>

<div class="image-mosaic">
  <div class="image-mosaic-card image-mosaic-card-tall image-mosaic-card-wide" style="background-image: url('/files/why_is_my_kitchen_so_clean/cooking/p1.jpg')"></div>
</div>

<p>That should answer the question that yes, I do cook.</p>

<div class="image-mosaic">
  <div class="image-mosaic-card image-mosaic-card-tall" style="background-image: url('/files/why_is_my_kitchen_so_clean/cooking/p2.jpg')"></div>
  <div class="image-mosaic-card" style="background-image: url('/files/why_is_my_kitchen_so_clean/cooking/p3.jpg')"></div>
  <div class="image-mosaic-card" style="background-image: url('/files/why_is_my_kitchen_so_clean/cooking/p4.jpg')"></div>
  <div class="image-mosaic-card image-mosaic-card-tall" style="background-image: url('/files/why_is_my_kitchen_so_clean/cooking/p5.jpg')"></div>
  <div class="image-mosaic-card" style="background-image: url('/files/why_is_my_kitchen_so_clean/cooking/p6.jpg')"></div>
  <div class="image-mosaic-card" style="background-image: url('/files/why_is_my_kitchen_so_clean/cooking/p7.jpg')"></div>
    <div class="image-mosaic-card image-mosaic-card-tall image-mosaic-card-wide" style="background-image: url('/files/why_is_my_kitchen_so_clean/cooking/p8.jpg')"></div>
  <div class="image-mosaic-card image-mosaic-card-tall" style="background-image: url('/files/why_is_my_kitchen_so_clean/cooking/p9.jpg')"></div>
  <div class="image-mosaic-card" style="background-image: url('/files/why_is_my_kitchen_so_clean/cooking/p10.jpg')"></div>
  <div class="image-mosaic-card" style="background-image: url('/files/why_is_my_kitchen_so_clean/cooking/p11.jpg')"></div>
  <div class="image-mosaic-card" style="background-image: url('/files/why_is_my_kitchen_so_clean/cooking/p12.jpg')"></div>
  <div class="image-mosaic-card" style="background-image: url('/files/why_is_my_kitchen_so_clean/cooking/p13.jpg')"></div>
</div>

<h2 id="why">Why</h2>

<p>There are 3 reasons why my kitchen looks virtually the same, every time.</p>

<ol>
  <li><strong>I like to have my environment organized and free of clutter and distractions.</strong> I’ve had a long, conscious effort to reduce clutter and inconsequential distractions from my life, stemming from an experience that I might write about in a later day. 
    <ul>
      <li>The positive ramifications of consistently living and being surrounded by an environment and stimulus of objects that really matter, are more than I could ever describe in words.</li>
      <li>It’s a small present for my future self: when I cook, do something in the kitchen, or at home, I have a deeply ingrained habit of sorting and cleaning everything out before moving to the next thing. That way, my <em>full energy</em> can be allocated and focused towards a single place.</li>
      <li>This goes beyond the physical realm. Both my personal and work laptop, it is rare that I have more than 3 browser windows open, each one often having less than 10 tabs. Whenever those numbers temporarily increase, I document their state, close them down, and arrive at a clean state again. Essentially using <a href="https://lopespm.com/notes/2023/05/18/solving-task-switching-through-documentation.html">documentation as a checkpoint mechanism</a></li>
      <li>There are other examples of this. In case you follow <a href="https://www.youtube.com/@TechIngredients">Tech ingredients</a>, you’ll notice that their laboratory and space is quite neat, regardless of the outstanding breadth of experiments done in the channel. I found it amusing that some years ago they were once asked by some viewers <em>“how do they keep their lab so clean”</em>, to which the main presenter replied that “we are not hiding anything, we just take care to tidy and store the components we are not working on” (paraphrased).</li>
    </ul>
  </li>
  <li><strong>The rest of the utensils are away from camera sight.</strong> When I am having a meeting or sharing my thoughts via video, I want to get things done and not have my mind occupied with non-consequential thoughts such as <em>“Oh, my background looks a bit a messy. That piece looks out place. I wonder how that looks for someone else”</em>, nor do I want to distract my interlocutors with something irrelevant in the background. There are video filters which blur out the background, but I don’t like the way they look, not do I want to have yet another moving component in my workflow that might (or might not) work. If my background is relatively the same and neutral, then I don’t have to worry about it, and can focus my energies on the the things that <em>really matter</em>.</li>
  <li>Apart from my weekly buckwheat bread, <strong>I only cook at weekends</strong>, since I am fortunate enough to often cook for pleasure, rather than necessity. The rest of the week I either get to have my meals at the office, or through <a href="https://planty.uk/">Planty</a>, a plant based clean food subscription.</li>
</ol>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Produce more than you consume]]></title>
    <link href="https://lopespm.com/notes/2025/07/27/produce_more_than_you_consume.html"/>
    <updated>2025-07-27T00:00:00+00:00</updated>
    <id>https://lopespm.com/notes/2025/07/27/produce_more_than_you_consume</id>
    <content type="html"><![CDATA[<h2 id="dangers-of-over-consumption">Dangers of over-consumption</h2>

<p>One’s life can very easily be wasted away on non-consequential, “time passing”, filler, short-term hedonistic experiences. </p>

<p>It’s a blessing to enjoy life’s little pleasures, but it’s perilous to lead a life consisting of only discrete pleasures and experiences that are not, or cannot be chained together in any way shape or form. Essentially, a life spent as a passive spectator through and through, observing the years scroll by.</p>

<p>That feels like an egregious squandering of the most precious gift we’ve been given: life. Chaining experiences together and compounding them into a product that amounts to much more than the sum of its parts is one of the most intriguing, addicting, but most of all, rewarding parts of life.</p>

<!--more-->

<h2 id="benefits-of-production">Benefits of production</h2>

<p>Building up years of study to land to land a job that takes one out of poverty, raising a child into a full grown adult, building relationships consciously into heartwarming friendships or a loving family, writing a book or article that not only helps oneself but also many others, building a successful company based on years of networking and experiences.</p>

<p>They require considerable amounts of deliberate actions where different experiences are aggregated, chained and combined in novel ways that add value to a system. Value is produced. </p>

<p>Best of all, society rewards you for that! If something you produced is deemed to be of value and (directly or indirectly) consumed by a fellow human being, you can get compensated in currency, recognition, access, friendship, amongst others. As the products of your labor expand and compound, an even more interesting non-trivial effect starts to happen that could not have been predicted in the first place. Personally, both articles and a presentation I did resulted in interesting job offers that I didn’t plan for, nor could I have predicted.</p>

<h2 id="but-its-not-easy">But it’s not easy</h2>

<p>Discipline, self reflection and the hard work to plan and aggregate different actions and experiences, are the most important ingredients to consistently produce value. </p>

<p>If this would be easy, everyone would be doing it by default. That’s why self help books are such a profitable business. This difficulty stems from our inherited hardwired behaviours that optimize towards immediate gratification, which served our late ancestors to such success that these traits got selected and filtered through the ages as an <a href="https://lopespm.com/notes/2025/02/10/story-human-body-lessons.html">essential part of our species</a>.</p>

<p>However, in the context of our modern societies where resources and entertainment are abundant, these traits backfire and when left to their own devices, can easily stray one into a life of misery and value bankruptcy<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>.</p>

<h2 id="the-antidote-self-discipline-workout">The antidote. Self-discipline workout.</h2>

<p>Just like any other muscle in our body, self-discipline requires consistent and intentional work to stay strong, but relying solely on will power, a scarce and fleeting resource, is often not enough. In order to protect this precious resource, one can set up an environment to block out frivolous distractions and non-consequential instant gratifications. In my case, I don’t have video streaming subscriptions (since I’ve come to realise that most series and movies add little to no value to my life), I have blocked distracting websites and videogames on my computer and expelled junk and sugary foods from home<sup id="fnref:3"><a href="#fn:3" rel="footnote">2</a></sup>.</p>

<p>Remember, <strong>any time spent in over-indulging consumption, is time not spent producing value</strong>.</p>

<p>Instead, create the habit of self reflection and journalling, organize events (at work, with your friends or loved ones), write articles and publish videos that can be seen and judged by others (like this article), welcome accountability and reposability, <a href="https://www.youtube.com/watch?v=BBR5v89L6gk">clean your room</a>. These actions are very likely accessible to you now, at (close to) zero cost. <sup id="fnref:2"><a href="#fn:2" rel="footnote">3</a></sup></p>

<p>Replace non-consequential consumption with fruitful production. Start anywhere, start now.</p>

<p><br /></p>

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>Drug abuse, over-eating, alcohol abuse, gambling, over-indulging, instantaneous and inconsequential sexual gratification are some examples of how one’s life could be filled with perceived pleasures that when summed together amount to close to nothing.<a href="#fnref:1" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:3">
      <p>This is done via the <a href="https://getcoldturkey.com/">Cold Turkey app</a>, a mac app that I fully recommend, where a long phrase needs to be written before I can unlock these features, which helps me give pause and stop from mindless content consumption. <a href="#fnref:3" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:2">
      <p>Extremes touch. Leading a life or pure restrictions where there is no space for exploration of new experiences that at the time don’t serve a higher purpose is not advisable, since there will be no raw material to draw from when producing. But given that it is much harder to go from pure consumption to a healthy balance rather than from a pure production starting point, it is best to target over-producing and then re-balance.<a href="#fnref:2" rel="reference">&#8617;</a></p>
    </li>
  </ol>
</div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Napoleon Biography: Takeaways]]></title>
    <link href="https://lopespm.com/notes/2025/07/20/napoleon-biography.html"/>
    <updated>2025-07-20T00:00:00+00:00</updated>
    <id>https://lopespm.com/notes/2025/07/20/napoleon-biography</id>
    <content type="html"><![CDATA[<p>I’ve recently finished reading <a href="https://www.amazon.co.uk/Story-Human-Body-Evolution-Disease/dp/030774180X">Napoleon: A Life</a>, a well researched book by Andrew Roberts about the full and well travelled life of Napoleon Bonaparte, his rises and falls, and glimpses of what made the famous soldier-statesman tick. These are my main takeaways:</p>

<!--more-->

<h1 id="leadership">Leadership</h1>

<h2 id="spirit-de-corps">Spirit de Corps</h2>

<ul>
  <li>“A general’s principle talent consists in knowing the mentality of the soldier and in winning his confidence. And, in these two respects, the French soldier is more difficult to lead than any other. He is not a machine to be put in motion but a reasonable being that must be directed”’ - Napoleon</li>
  <li>“More battles are lost by loss of hope than loss of blood” - Napoleon</li>
  <li>“It is astonishing what power words have over men” - Napoleon, speaking of the 32 demi brigade, who had his words <em>“I was tranquil, the brave 32nd demibrigade was there”</em> embroidered in large gold letters on its colours, which further increased their courage</li>
  <li>Napoleon found it essential to keep his troops moral high, which he actioned upon in different ways:
    <ul>
      <li>Napoleon was known to give electrifying pep talks (harangues) before battles
        <ul>
          <li>“One must speak to the soul. It’s the only way to electrify the men” - Napoleon</li>
        </ul>
      </li>
      <li>Napoleon had a strong sense of identification of soldier with his regiment’s corps</li>
      <li>Ordered for plays and songs to be held for the troops, gave medals, made sure there was pride his platoons</li>
      <li>Upon receiving petitions from his men (such as on the subject of increasing their pensions), he would act on them immediately</li>
      <li>Napoleon held small gestures like removing a medal of honor from him and giving it to a soldier that he observed a particularly valiant behaviour</li>
      <li>He joked around with troops, reminiscing on war stories with veterans. He would make sure to share his wine with the sentries. He was accessible. Small things perhaps, but helped build morale and breed devotion.</li>
      <li>Napoleon references to the ancient world made their troops see that they were part of a larger whole, a larger part of history. Their lives, and if it comes to it, their deaths, mattered.</li>
      <li>Napoleon told his troops how much their family and neighbours would honour their valiant behaviour</li>
    </ul>
  </li>
</ul>

<h2 id="leadership-style">Leadership style</h2>

<ul>
  <li>“[A leader’s] youth is almost indispensable in commanding an army” - Napoleon  </li>
  <li>Napoleon was first frowned upon by his peers when being given control of the army of Italy, near to his marriage with Josephine. They were not impressed by him showing unimpressive pictures of his wife, and his small stature. But as soon as he started talking about operations, logistics, asking for info and laying out the plan, they immediately saw Napoleon “grow”. Competence and diligence, above appearances.</li>
  <li>Napoleon’s planning and concentration of forces were crucial to his consecutive battle victories</li>
  <li>It was an intense environment, but his staff generally admired him. He was polite, and would forgive small mistakes</li>
  <li>“Fear and uncertainty accelerate the fall of empires: they are a thousand times more fatal than the dangers and losses of an ill-fated war” - Napoleon</li>
  <li>Julius Caesar once faced a <a href="https://imperiumromanum.pl/en/curiosities/mutiny-of-caesars-legionaries/">mutiny</a> that forced him to draw back. Caesar allowed them to be released, but addressed them as mere civilians, rather than soldiers. He won them back with this gesture. Like Julius Caesar, Napoleon was sure to admonish the troops that were under expectations.</li>
  <li>To his troops Napoleon was lavish in praise, but to his family, ambassadors and ministers he was acerbic. Severe to his officers, kind to the men.</li>
  <li>Napoleon instructed officers to hold 4 to 8 hour reviews, where the group, weapons and drills were inspected. It made soldiers used to being ready and weaponed, and showed them that their leader was attentive and cared about them.</li>
  <li>“You don’t need wit during times of war. You need to be precise, display backbone and simplicity” - Napoleon to Jerome, who he placed as king of Westphalia</li>
</ul>

<h2 id="leading-masses">Leading masses</h2>

<ul>
  <li>“The masses should be directed without them being aware of it”. Napoleon to Fouché</li>
  <li>When Napoleon centralized power and appointed the prefects, the regime was turned into a meritocratic system, where officials would be promoted according to their performance. They would need to provide statistical data and annual tours of their departments, and Napoleon made sure they were properly trained.</li>
  <li>“The men who have changed the world never succeeded by winning over the powerful, but always by stirring the masses. The first method is a resort to intrigue and only brings limited results. The latter is the course of genius and changes the face of the world.” - Napoleon on St Helena</li>
  <li>Napoleon mentioned that a nation is always what you had wit to make of it. Triumph of faction, parties, divisions, was the fault of those in authority only. No people are bad under a good government, just as troops are bad under good generals. As such, Napoleon mentioned the directory men brought France down to the level of their own blundering and were degrading her, and she was beginning to repudiate them</li>
  <li>After a decade of revolution, many French men were desperate for leadership, and recognized that the parliamentary process inhibited that, as did a constitution that was next to impossible to amend. So they were willing to see their representative government to be temporarily suspended, an opening that Napoleon took advantage of.</li>
  <li>“Confidence from below, authority from above”- Bonapartist dictum</li>
  <li>“Chouannerie and the émigrés are skin diseases, terrorism an internal malady” - Napoleon</li>
  <li>“If you treat the mob / rabble with kindness, these creatures fancy themselves invulnerable. If you hang a few, they get tired of the game, and they become submissive and humble as they ought to be” - Napoleon when defending Place de la Concorde</li>
</ul>

<h2 id="governing">Governing</h2>

<ul>
  <li>States are ever more vulnerable as when they are attempting to reform themselves</li>
  <li>Upon unification of law codes in France, Napoleon recurrently asked: “is it fair? Is it useful?”
    <ul>
      <li>“One should not overburden with over-detailed laws. Law must do nothing but impose a general principle. It would be vain if one were to try every possible situation.” - Napoleon</li>
    </ul>
  </li>
  <li>Because of labor shortages caused by constant war, wages increased by 25% during his 15 year rule.</li>
  <li>High inflation brings forth the opportunity for having a newcomer governing, because people are desperate for solutions, and will reward anyone who brings forth a solution. As seen with the arrival of Bonaparte to France in 1799, where inflation was high (price of bread was astronomical, but directors were immune since they paid themselves a salary linked to the value of 30k pounds of wheat). Bonaparte was seen as being a good top down zealot autocratic solution that placed a constitution with strong executive power with central control.</li>
  <li>Napoleon’s marriage to Marie Louise, the daughter of the Austrian leader Francis, was strategic. For some time it coerced the Austrian leader to not join the Prussians and Russians, which would reduce Napoleon’s chances for a victory</li>
</ul>

<h2 id="central-command-and-control">Central command and control</h2>

<ul>
  <li>“Nothing is so important in war, than undivided command” - Napoleon    </li>
  <li>Dangers of overbearing concentration of power with a single point of failure:
    <ul>
      <li>His controlling nature likely stifled initiative. Several of his leads were only good in his presence, but without him present, they would falter. Dupont was one of them</li>
      <li>The allies successful strategy was to only attack Napoleon’s lieutenants, but avoid confrontations with Napoleon himself. Napoleon, by not scaling himself properly, caused this situation where only where he was present could the army thrive. Everywhere else, it got defeated. A big lesson.</li>
      <li>Choosing the right people is crucial:
        <ul>
          <li>Some of the biggest blunders Napoleon made were about the placement of people in the wrong positions. Like Ney on a big battalion, sul on a more administrative position, and another one as war minister when he should be in the battle of Waterloo. It’s very important to play to people’s strengths</li>
          <li>Like Julius Caesar, Napoleon was betrayed and placed in bad position by people who previously wronged him but he didn’t persecute, like Talleyrand and Fouché, who were openly planning a cue against Napoleon’s empire and negotiating peace terms in 1814.</li>
        </ul>
      </li>
      <li>During the Russian campaign, he was regularly lied to by his senior officers, since no one wanted to be Napoleon’s line of fire. There is an example of a deception that involved 3 of them, one of them being Murat. Napoleon was once very close to his men, but in this campaign, where he needed their support the most, he was often lied to. For example on the number of provisions available for men, 10 days were communicated, when they were close to none.</li>
    </ul>
  </li>
</ul>

<h2 id="leanness">Leanness</h2>

<ul>
  <li>Napoleon’s core system allowed him to be quick and flexible, living off the land instead of relying on vulnerable supply lines. This flexibility allowed it to outmaneuver the enemy and exploit its slowness.
    <ul>
      <li>This leanness is comparable to what fast moving startups do to adapt to new challenges, by reorganizing their organization quickly and effectively, allowing it to change course very quickly, and concentrate power of the crucial aspects of the business</li>
      <li>As a contemporary counter-example, Kmart was not able to move fast and adapt, leading to its bankruptcy after Wallmart innovated with a store logistics network design that made it much more efficient. Kmart needed to have change fast and efficiently for that to happen, but instead just kept doing the same, with mostly superficial changes like barcode scanners that were did not yield the same impact because it did not have an evolved network to leverage them</li>
    </ul>
  </li>
</ul>

<h1 id="behaviour">Behaviour</h1>

<h2 id="energy-urgency-moving-fast">Energy. Urgency. Moving fast.</h2>
<ul>
  <li>His father died at 38 when Napoleon was 15 years old. Napoleon’s urgency, drive and boundless energy might be partly explained by that, in that he foreseen that his life too, would be short.</li>
  <li>Napoleon was energetic and injected immediate energy wherever he went. Everything around Napoleon happened at a tremendous pace. He hated wasting a minute in a day. Napoleon read newspapers or had texts read to him while he was in a hot bath, being shaved, or in the carriage with his wife Josephine.
    <ul>
      <li>“If you want to dine well, dine with Cambacérès. If you want to dine badly, dine with Lebrun. If you want to dine quickly, dine with me” - Napoleon to a general
        <ul>
          <li>Napoleon often took only 10 minutes to eat, except for family suppers on Sundays, where he might spend half an hour.</li>
          <li>Everything in his palace revolved around work. He dined when he could.</li>
          <li>He never drank spirits, and there are no examples of him being drunk.</li>
        </ul>
      </li>
      <li>Napoleon also didn’t take the time in his love making: “the matter was over within 3 minutes”</li>
    </ul>
  </li>
  <li>“If you make war, wage with energy and severity. It’s only means of making it shorter and less deplorable for mankind” - Napoleon</li>
  <li>“Impatience” is the word that appears when other people portray Napoleon</li>
  <li>In the beginning, he moved fast with his armies because he didn’t have resources to do sieges. That need led to rapid movement that caught the enemy off balance. He did have many problems just having his men fed and shod:
    <ul>
      <li>He had a consistent concern to have his men well shod, such that he ordered Prussians to exchange their boots with the french, since they would not be needing then anyway</li>
      <li>He sent multiple letters requesting for supplies, specially footwear for soldiers
        <ul>
          <li>He likely <a href="https://www.npr.org/sections/thesalt/2015/06/18/414614705/appetite-for-war-what-napoleon-and-his-men-ate-on-the-march">didn’t say that an army marches on his stomach</a>, but surely knew that they marched on their feet</li>
          <li>He had a chief of staff writing his dictations that was crucial. He transposed his rapid fires and raw wishes into well defined, polite and diplomatic plans and commands. He was so proficient that he managed to convince his wife to share a chateau with his mistress, and vice versa.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>“Energy, energy!” - Napoleon to his brother, who he made king and found to lack energy and drive</li>
  <li>“Activite, activite, vitesse. Je me recommended a Vous” (translated to “activity, activity, speed. I’m counting on you”) - Napoleon postscript of a message to his lieutenant</li>
</ul>

<h2 id="preparation">Preparation</h2>

<ul>
  <li>Napoleon would take care to know the terrain, topology and other details of the places he would fight or invade. Before the Russian campaign, he ordered for very detailed descriptions to be made of the territory. Everything from road length to depth of river. Every possible detail.</li>
  <li>He was more keen to glean information directly from the place, rather than hear its dignitaries’ speeches. As an example, he once left a dignitary haranguing to the air as Napoleon moved to his next destination.</li>
</ul>

<h2 id="seizing-the-opportunity">Seizing the opportunity</h2>

<ul>
  <li>“Winning is not enough if one doesn’t take advantage of success.” - Napoleon</li>
  <li>“All great events hang by a single thread. The clever man takes advantage of everything, neglects nothing that may give him some added opportunity; the less clever man, by neglecting one thing, sometimes misses everything.” - Napoleon</li>
  <li>“I’ve destroyed the Austrian army simply by marches” - Napoleon</li>
  <li>There is immense value in initiative and making sure your advantage is not lost and you don’t need to cross the same bridge twice. After the defeat in Russia, the army’s weak position exposed Napoleon to allied assaults, forcing him to lose territories. When trying to get them back, the allies used the tactics previously used by Napoleon against the allies, making them work against him. If Napoleon would have kept those territories and army, then he wouldn’t have needed to be in this very tough spot. 
    <ul>
      <li>As a learning, do a decisive victory, and don’t take it for granted and leave it to chance. Keep your advantage, stay lean, don’t allow bloat to creep into the organization, don’t get too comfortable in a high stakes environment. Past performance gains don’t mean you’ll get the same results in the future, using the same strategy and tactics.</li>
      <li>Napoleon also made the mistake of not keeping his forces concentrated, contradicting his own <a href="https://www.gutenberg.org/files/50750/50750-h/50750-h.htm">war maxims</a>, and allowed for lesser political concerns to take over, like focusing on taking over Berlin to punish Prussia which was of low strategic value</li>
      <li>The corp system that Napoleon introduced was replicated, and his tactics were exploited and studied by enemies, losing one of his main leverages.</li>
    </ul>
  </li>
</ul>

<h2 id="taking-risks-decisiveness">Taking risks. Decisiveness.</h2>

<ul>
  <li>“If the art of war was only the art of not risking anything, glory would be prey to mediocrity. We need a full triumph!” - Napoleon</li>
  <li>”(…) If one is not ready to take risks when the time is ripe, one ends up doing nothing” - Napoleon on Waterloo</li>
  <li>“When the house is crumbling, is it time to busy oneself in the garden? A change here is indispensable” - Napoleon to Mamond</li>
  <li>“There is no immortality but the memory that is left in the minds of men. To have lived without glory, without leaving a trace of existence, is not to have lived at all.” - Napoleon</li>
</ul>

<h2 id="persist-dont-drop-the-ball">Persist, don’t drop the ball</h2>

<ul>
  <li>“The first qualification of a soldier is fortitude under fatigue and privation. Courage is only the second; hardship, poverty and want, are the best schools for a soldier.” - Napoleon war maxim</li>
  <li>“A general-in-chief should ask himself frequently during the day: <em>What should I do if the enemy’s army appears now in my front, or on my right, or my left?</em> If he has any difficulty in answering these questions, his position is bad, and he should seek to remedy it.” - Napoleon war maxim</li>
  <li>“I have never been seduced by prosperity; adversity shall find me superior to its blows” - Napoleon</li>
  <li>“Posterity would never have seen the measure of your spirit, if it had not seen it in misfortune” - Napoleon</li>
  <li>“True heroism consists of being superior to the ills of life, in whatever shape the may challenge to the combat” - Napoleon (1815)</li>
</ul>

<h2 id="continuous-improvement">Continuous improvement</h2>

<ul>
  <li>He was not embarrassed by his initial little knowledge he had about the details of general administration. He asked many questions, asked for the definition and meaning of the most common words, he provoked discussion, and kept it going until his opinion was formed
    <ul>
      <li>“Sometimes in these discussions I have said things that a quarter of an hour later I have found to be all wrong. I have no wish to pass for being worth more than I really am” - Napoleon</li>
      <li>“He brought to the discussions a clarity, a precision, a strength of reason and range of views that astonished us” - consulate about Napoleon</li>
      <li>He quickly taught himself to ask short questions that demanded direct answers like “How far along are we with the Arc of Triumph?” or “Will I walk on the Seine bridge upon my return?”</li>
      <li>Napoleon allowed strong discussions to be held in the counsel because he believed to be the strongest debater in the whole conseil. He allowed himself to be attacked because he knew how to defend himself.</li>
      <li>Napoleon liked to talk in a familiar way, was fond of discussions but didn’t impose his opinions, and made no pretension of superiority, either of intelligence or rank.</li>
    </ul>
  </li>
</ul>

<h2 id="over-ambition">Over ambition</h2>

<ul>
  <li>“One must never ask of fortune more than she can grant” - Napoleon on Saint Helena</li>
  <li>One needs to know when to stop. Know when you’ve reached your peak, stop, and maintain your position (which is incredibly hard by itself):
    <ul>
      <li>Relying on fortune is a risky endeavour. Napoleon was lucky several times. Once you are lucky too many times, you might come under the impression that fortune is on your side. But the more times you roll the dice, the higher the chances that you’ll get a disastrous result</li>
      <li>His dream to be like Julius Caesar or Alexander the Great blinded him, as was seen in his pursuits in Egypt, that he was fascinated there because Alexander the Great was there. Different times, different factors come into play.</li>
    </ul>
  </li>
  <li>Napoleon could have held his empire at its peak, and only he could bring it down. He had an army to fight off the Russians at the border, and could have French limited territorial expansion. The downfall was self-inflicted.
    <ul>
      <li>Invading Spain was a blunder. He should have kept her as an allie, to avoid France being surrounded on three fronts.</li>
      <li>Napoleon had the entire Europe at his control. Instead of a Russian invasion, he could have held the borders and defended them as needed. Even if he had to abdicate some territories, he should have stopped there, and tried to make peace with Spain and Britain, and end the continental blockade.</li>
      <li>When the Russian invasion was failing, Napoleon should have backtracked from going to Moscow. It was greedy to expect that Alexander I, Emperor of Russia, would accept peace.</li>
      <li>As the empire was on its decline, Napoleon was given the opportunity to sue for peace by Metternich, by losing Warsaw and other territories, but would still hold Italy and avoid further battles and men being killed, and having France’s borders reduced to even less than was proposed in this offer.</li>
    </ul>
  </li>
  <li>As a consequence of the empire’s defeats in Russia and Leipzig, and subsequent invasion of France:
    <ul>
      <li>The patriotic republican anthems (that Napoleon had previously banned) no longer worked. The French surrendered without a fight. With a town surrendering to a single horseman for example.</li>
      <li>“Public opinion is a mysterious and invisible power, to which everything must yield. There is nothing more fickle, more vague, or more powerful; yet capricious as it is, it is nevertheless much more often true, reasonable, and just, than we imagine” - Napoleon, upon the allied invasion to France</li>
    </ul>
  </li>
</ul>

<h2 id="complacency">Complacency</h2>

<ul>
  <li>Upon the Russian invasion, the empire’s army structure seemed to show several signs of complacency:
    <ul>
      <li>When invading Russia, one of the generals brought a personal chef, fancy clothes, Napoleon HQ had 50 carriages carried by 650 horses, had a multi national army ordered by his step son to lead an important maneuver that should have been done by an experienced general. Because it was such a big army, the Russians did not want to counterattack, leading Napoleon to stretch his supply lines. This compromised speed and leanness (which was a crucial piece of Napoleon’s war tactics), having an immense cost to sustain this vast army.</li>
    </ul>
  </li>
</ul>

<h2 id="perception-deception">Perception. Deception.</h2>

<ul>
  <li>Data manipulation:
    <ul>
      <li>It’s a principle of war that you should over-inflate the communicated number of available units, and this practice got so out of control that Napoleon snapped at a poem sincerely lauding him for defeating armies thrice his size, which was actually true since he only 30 thousand units. The problem was that it did not align with his inflated battle reports where he communicated to have a 300 thousand unit army.</li>
      <li>He would pepper his troops addresses with statistics and their achievements.</li>
    </ul>
  </li>
  <li>“We must speak to the eyes” - Napoleon on luxuries, in its imperial days</li>
  <li>“My health is very good” - repeated at exhaustion by Napoleon on his closing remarks, even when his health was not the best.</li>
  <li>“Truth is so precious that it deserves to be protected by bodyguards of lies” - Churchill</li>
  <li>“The historian, like the orator, must persuade. He must convince.” - Napoleon</li>
  <li>On the day of the Coup of 18 Brumaire, there was an extraordinarily early meeting that the objecting elders didn’t know about where highly consequential decisions were made in the presence of elders that were believed to not compromise the coup. Extraordinarily “extraordinary” early meetings are one of the oldest tricks in politics.</li>
</ul>

<h1 id="religion-and-war">Religion and War</h1>

<h2 id="religion">Religion</h2>

<ul>
  <li>“Wishing to be an atheist does not make you one” - Napoleon</li>
  <li>“If I had to choose a religion, the sun as the universal giver of life would be my god.” - Napoleon</li>
  <li>“In religion I do not see the mystery of the Incarnation, but the mystery of the social order. It associates with Heaven an idea of equality that keeps rich men from being massacred by the poor…Society is impossible without inequality, inequality intolerable without a code of morality, and a code of morality unacceptable without religion.” - Napoleon on the social value of religion
    <ul>
      <li>Napoleon viewed the idea of god to be useful to maintain good order, to keep men in the path of virtue and to keep them from crime. To robbers and galley slaves physical restrictions to be imposed. To enlightened people, moral ones.</li>
    </ul>
  </li>
  <li>Napoleon believed the major problem with Christianity was that it did not excite courage, since it took too much care to go to heaven, and that christianity and its promises of afterlife detract men from this life, diminishing its practical value.</li>
  <li>Napoleon mentioned that no man is considered just and virtuous if he doesn’t know where he came and where he is going. Simple reason cannot guide them in this matter. Without religion, one continuously walks in darkness.</li>
  <li>“We should not deprive the poor merely because they are poor, of that which consoles their poverty. Religion is a kind of vaccination which, by satisfying our love for the marvelous, keeps out of the hands of charlatans and conjurers.” - Napoleon, about priests charging more than 6 francs per funerals</li>
  <li>“Fighting is a soldier’s religion; I never changed that. The other is the affair of women and priests. As for me, I always adopt the religion of the country I am in.” - Napoleon</li>
  <li>“The various modes of worship which prevailed in the Roman world were all considered by the people as equally true; by the philosopher as equally false; and by the magistrate as equally useful.” - Edward Gibbon</li>
</ul>

<h2 id="cruelties-of-war">Cruelties of war</h2>

<ul>
  <li>“To cannon, all men are equal” - Napoleon</li>
  <li>In the battle of Borodino in Russia near Moscow, the combined killed and wounded were equivalent to a fully laden jumbo jet crashing into a 6 square miles area every 5 minutes, during the 10 hours of the battle.</li>
  <li>Ahmed Jezzar, also known as “The Butcher”, was known for his cruel punishments, such as nailing horse shoes in the feet of enemies. At the same time, Ahmed also enjoyed doing origami for his guests.</li>
  <li>Half a million men were lost by France after the Russian war, and Russia had 200k killed and about 300k wounded.</li>
</ul>

<h1 id="the-person">The Person</h1>

<h2 id="who-was-napoleon">Who was Napoleon</h2>

<ul>
  <li>Napoleon as a name was not common at the time, but not unheard of.</li>
  <li>Napoleon was protective and concerned about his family. His siblings went on to be kings, nobles and leaders appointed by him, which several times proved to be unfruitful.</li>
  <li>His mothers’ father was the governor of Ajaccio, and his father Carlo was close to Pasquale Paoli, who fought for the independence of Córsega.</li>
  <li>Napoleon attended the royal nursery, because his father applied to be noble and sat on the royal assembly.</li>
  <li>Napoleon was well read and voracious reader of biographies and history. At age 9, he apparently read the 800-page La Nouvelle Héloïse, a novel about love and redemption, and said ‘It turned my head.’</li>
  <li>Napoleon had a disdain for human rights, free press, equal outcome, and parliamentarism. He was favorable towards central power, order, education and military values.</li>
  <li>Napoleon took a leave from the military to resolve the debts from his father that threatened to bankrupt his mother.</li>
  <li>Nomenclature was important for Napoleon, and renamed several places. For example, Place Louis XV to Place de la Concorde.</li>
  <li>Focus on the important things: Napoleon was excellent at prioritization, dealing immediately with urgent matters</li>
  <li>In times of difficulty, he was a master of his nerves. He had immense self control, he trained himself to not let his emotions betray themselves. This was seen at the time as a classical virtue</li>
  <li>Towards his later years, Napoleon was more lethargic and less performant, likely because of ailments like hemorrhoids that likely were the reason for him to not ride horseback in Waterloo. He had a potbelly at that point, was overweight, and was less energetic, and didn’t have many proper nights sleep.</li>
  <li>In Kalinengrad, he joked that he had found a new element: earth, wind, fire, earth, water and, mud</li>
  <li>“The soul wears out the body” - Napoleon</li>
</ul>

<h2 id="relationships">Relationships</h2>

<ul>
  <li>“Love is the occupation of the idle man, the amusement of a busy one, and the shipwreck of a sovereign.” - Napoleon, after Désirée rejected him.</li>
  <li>“A soldier must remain faithful to his wife, but must only think to return to her when there is nothing else to do” - Napoleon</li>
  <li>“The prettiest women are the hardest to make love to” - Napoleon on the way to Saint Helena</li>
  <li>“The French are like women: you must stay away from them for too long” - Napoleon, after the retreat from Russia.</li>
  <li>The only letters he did not dictate were the ones to his wife and mistresses, and when he needed to sign a document.</li>
  <li>Napoleon was ruthless. He divorced Josephine because he didn’t have a male heir yet, and no sons. And he didn’t want to fall into a situation like Caesar or Alexander the Great, where upon their death, everything descended into chaos. It was the best for his dynasty, and for France, in his view
    <ul>
      <li>Napoleon divorced from Josphine, who received 2 million francs per year, two properties, and was allowed to keep the title of empress. “She wept, but she took”</li>
      <li>Although it was a grandson from Josephine that would become the next emperor of France, and her direct descendents today sit on the thrones of several countries. Napoleon’s, held none.</li>
    </ul>
  </li>
  <li>A friend of Josephine was known to have slept with so many ministers that she was considered government property.</li>
  <li>Josephine only disclosed her debts when she had Napoleon’s ring around her finger.</li>
  <li>Napoleon’s relationships were brittle. When Napoleon started to fall and France was invaded, Marie Louise (his wife at the time) seemed to be in denial, only worried about futile matters and etiquette, in an attempt to drown out the earthquake outside, and the clash between Napoleon and her father (the leader of Austria). Also, Joseph, Napoleon’s brother, was wooing her, and eventually she had relations with another man later on.
    <ul>
      <li>Talleyrand, previously Napoleon’s foreign minister, sent a letter to Alexander from Russia saying that Napoleon’s Paris defenses were weak, which was a decisive piece of information that led to the last kneel of Napoleon’s defenses. Talleyrand had already proved to not be trustworthy by Napoleon, yet no decisive reprimand at the time was made by Napoleon.</li>
    </ul>
  </li>
</ul>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Inside the Box: Everything I did with an Arduino Starter Kit]]></title>
    <link href="https://lopespm.com/hardware/2025/07/15/arduino.html"/>
    <updated>2025-07-15T00:00:00+00:00</updated>
    <id>https://lopespm.com/hardware/2025/07/15/arduino</id>
    <content type="html"><![CDATA[<p>Earlier this year I saw a <a href="https://www.youtube.com/watch?v=IrocytwdeEY">Tech Ingredients episode</a> where a laser gimbal automatically tracks drones and shoots them down. I was fascinated by their motion control mechanism, specially the usage of a PI Controller, a high-frequency clock <a href="https://www.pjrc.com/store/teensy40.html">Teensy microcontroller</a>, and their integration with custom hardware and a machine vision powered tracker.</p>

<p>Soon after I was researching the underlying electronics and how to experiment upon their concepts. The most obvious microcontroller to drive these would be an Arduino, but several recommendations pointed towards acquiring a kit rather than a single microcontroller, and the <a href="https://www.amazon.co.uk/ELEGOO-Complete-Ultimate-controller-Compatible/dp/B01IUY62RM">Elegoo Arduino Uno R3 Starter Kit</a> seemed the best.</p>

<p>The kit contains over 200 components and an <a href="https://www.elegoo.com/en-gb/blogs/arduino-projects/elegoo-uno-r3-project-the-most-complete-starter-kit-tutorial">extensive guided tutorial</a>, which I’ve completed (except for the last section using an extra expansion shield). In this article, I’ll go through the highlights of this journey, delightful deviations along the way, and exploration of core electronics concepts. Let’s dive in!</p>

<center>
          <picture aria-label="ELEGOO UNO R3 Project The Most Complete Starter Kit">
             <source type="image/webp" srcset="/files/arduino/pelegoo.webp" aria-label="ELEGOO UNO R3 Project The Most Complete Starter Kit" />
             <source type="image/png" srcset="/files/arduino/pelegoo.png" aria-label="ELEGOO UNO R3 Project The Most Complete Starter Kit" />
             <img src="https://lopespm.com/files/arduino/pelegoo.png" aria-label="ELEGOO UNO R3 Project The Most Complete Starter Kit" />
           </picture>
         </center>

<!--more-->

<p><em>See the <a href="https://www.youtube.com/watch?v=25vJvHLKvSE">video version of the article here</a>.</em></p>

<p><br /></p>

<h1 id="leds">LEDs</h1>

<h2 id="hello-world-light-up-a-led">Hello World: Light up a LED</h2>

<p>I’ve been involved with electronics in different ways throughout my life, but surprisingly I hadn’t yet done its Hello World equivalent, which is to light up a LED. This simple exercise it by itself incredibly interesting that opened a series of questions:</p>

<ul>
  <li>Q: Why is a resistor needed? A: High current and increased temperature damage its delicate heterojunction structures, which eventually cause it to burnout</li>
  <li>Q: What happens if the polarity is inverted? A: Similar to a normal diode, current will not flow and the LED will not light up. As long as this reverse power is not high, the LED will not burn and can still be used with correct polarity afterwards</li>
  <li>Q: How to interpret its data sheet? A: There are several interesting aspects its datasheet, like the LED’s wavelength curve, operating current and voltage, etc</li>
</ul>

<center>
          <picture aria-label="First LED">
             <source type="image/webp" srcset="/files/arduino/first_led.webp" aria-label="First LED" />
             <source type="image/png" srcset="/files/arduino/first_led.png" aria-label="First LED" />
             <img src="https://lopespm.com/files/arduino/first_led.png" aria-label="First LED" />
           </picture>
         </center>

<h2 id="rgb-led-a-hreffilesarduinocodergbledrgbledinocodea">RGB LED [<a href="https://lopespm.com/files/arduino/code/RGB_LED/RGB_LED.ino">Code</a>]</h2>

<p>RGB LEDs package a red, green and blue LED inside it that can be controlled independently, allowing for wide range color representation using three <a href="https://en.wikipedia.org/wiki/Pulse-width_modulation">pulse width modulation (PWM)</a> outputs from the Arduino. </p>

<p>PWM is a technique used to control the average power delivered to an electrical device by varying the width of pulses in a digital signal, which when done fast enough in a visual output such as a LED, is perceived to the human eye as being of a smooth continuous amplitude, instead of a stream of single bursts.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="1bmbdcjRWGw"></div></div>
   <p class="media-caption media-caption-two">Progressively changing the colors of a RGB LED</p>
 </div>
</center>

<h2 id="leds-controlled-via-74hc595-a-hreffilesarduinocodeeightledwith74hc595flashledeightledwith74hc595flashledinocodea">8 LEDs controlled via 74HC595 [<a href="https://lopespm.com/files/arduino/code/Eight_LED_with_74HC595_Flash_LED/Eight_LED_with_74HC595_Flash_LED.ino">Code</a>]</h2>

<p>We can attach an 74HC595 IC to extend the number of outputs possible by an Arduino, at the cost of some latency.</p>

<p>When writing the desired values for each of the inputs into 74HC595, they won’t be externalized until its latch is activated. Once the latch is triggered, all of the stored inputs will be externalized in one go. Very similar purpose of double buffering in video. A flicker free experience.</p>

<p>We are essentially controlling a piece of very limited external memory.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="ZynZlZXmAEg"></div></div>
   <p class="media-caption media-caption-two">8 LEDs controlled via 74HC595</p>
 </div>
</center>

<h2 id="smooth-led-intensity-fade-out-using-capacitors">Smooth LED intensity fade out using capacitors</h2>

<p>Capacitors are essentially energy stores (i.e. batteries) that with consistent charge and discharge times. By placing a condenser (or two, as in this video, so that their capacitance is summed up) in parallel with a LED, when powering the circuit both the LED immediately lights up and the condenser(s) charge in tandem. Once the main power source is removed, the condenser(s) start to smoothly discharge into the LED, creating a smooth fade out of their intensity.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="zUVHBHP2ehI"></div></div>
   <p class="media-caption media-caption-two">Smooth LED intensity variation using Capacitors</p>
 </div>
</center>

<h1 id="display">Display</h1>

<h2 id="one-unit-segment-display-digit-countdown-a-hreffilesarduinocode74hc595andsegmentdisplay74hc595andsegmentdisplayinocodea">One Unit Segment Display: Digit Countdown [<a href="https://lopespm.com/files/arduino/code/74HC595_And_Segment_Display/74HC595_And_Segment_Display.ino">Code</a>]</h2>

<p>We can control this single unit seven segment display at the segment level, and in this example we sequentially write a set of segment sets that we perceive as digits.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="2NdN3Wmdjgc"></div></div>
   <p class="media-caption media-caption-two">Digit Countdown</p>
 </div>
</center>

<h2 id="one-unit-segment-display-custom-patterns-a-hreffilesarduinocode74hc595andsegmentdisplaycustomconfig74hc595andsegmentdisplaycustomconfiginocodea">One Unit Segment Display: Custom Patterns [<a href="https://lopespm.com/files/arduino/code/74HC595_And_Segment_Display_custom_config/74HC595_And_Segment_Display_custom_config.ino">Code</a>]</h2>

<p>We can also create any patterns, in whichever sequence and timing we so desire. Here are three examples of some custom patterns.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="AvawHVPoQ6Y"></div></div>
   <p class="media-caption media-caption-two">Rotation Pattern</p>
 </div>
</center>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="qHU0Z2o-reE"></div></div>
   <p class="media-caption media-caption-two">Figure Eight Pattern</p>
 </div>
</center>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="6THY1S3vVis"></div></div>
   <p class="media-caption media-caption-two">Alternating Pattern</p>
 </div>
</center>

<h2 id="four-unit-segment-display-same-character-for-all-a-hreffilesarduinocodefourdigitalshowsameallfourdigitalshowsameallinocodea">Four Unit Segment Display: Same Character for All [<a href="https://lopespm.com/files/arduino/code/four_digital_show_same_all/four_digital_show_same_all.ino">Code</a>]</h2>

<p>Expanding on the above, if we write the same patterns as above on a four unit segment display, we see these replicated on all units.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="qRiBG2rDb5w"></div></div>
   <p class="media-caption media-caption-two">Same Character for All</p>
 </div>
</center>

<h2 id="four-unit-segment-display-distinct-characters-a-hreffilesarduinocodefourdigitalshowdifferentfourdigitalshowdifferentinocodea">Four Unit Segment Display: Distinct Characters [<a href="https://lopespm.com/files/arduino/code/four_digital_show_different/four_digital_show_different.ino">Code</a>]</h2>

<p>In order for each of the units to present their specific segment pattern, we need to write the pattern and then select which of the units should have this pattern written to, wait for a short amount of time, and then move to the next unit, where we will do the exact same thing, only this time selecting the unit(s) that should have this pattern written.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="eAKLezjvhr0"></div></div>
   <p class="media-caption media-caption-two">Distinct Characters</p>
 </div>
</center>

<h2 id="led-matrix-scrolling-a-hreffilesarduinocodeledmatrixandpotentiometerledmatrixandpotentiometerinocodea">LED Matrix: Scrolling [<a href="https://lopespm.com/files/arduino/code/led_matrix_and_potentiometer/led_matrix_and_potentiometer.ino">Code</a>]</h2>

<p>This LED Matrix accepts an explicit bitmap, where each of the pixels is either enabled or disabled. To achieve a scrolling effect we set an offset based on value received via the potentiometer.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="mRT8tEqMw3k"></div></div>
   <p class="media-caption media-caption-two">Scrolling through a bitmap</p>
 </div>
</center>

<h2 id="lcd-display-showing-a-long-string-a-hreffilesarduinocodelcdverylongstringlcdverylongstringinocodea">LCD Display: Showing a Long String [<a href="https://lopespm.com/files/arduino/code/lcd_very_long_string/lcd_very_long_string.ino">Code</a>]</h2>

<p>The scrolling effect is achieved by leveraging a functionality from the <a href="https://docs.arduino.cc/learn/electronics/lcd-displays/">LiquidCrystal</a> library. Here we are using a string of normal characters, but custom characters can also be used.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="SwysEippBVY"></div></div>
   <p class="media-caption media-caption-two">Scrolling through a long string</p>
 </div>
</center>

<h1 id="sound">Sound</h1>

<h2 id="buzzer">Buzzer</h2>

<p>From the guide: “We should be careful not to use the UNO R3 board analogWrite() function to generate a pulse to the active buzzer, because the pulse output of analogWrite() is fixed (500Hz)”. I’ve used <code>analogWrite()</code>, and this is the result:</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="dnI2y1cePIo"></div></div>
   <p class="media-caption media-caption-two">Varying the pitch of a buzzer</p>
 </div>
</center>

<h2 id="making-the-buzzer-sound-like-an-8-bit-engine-a-hreffilesarduinocodemotorenginesoundzipcodea">Making the buzzer sound like an 8-bit engine [<a href="https://lopespm.com/files/arduino/code/motor_engine_sound.zip">Code</a>]</h2>

<p>By adjusting the frequency in which the buzzer is discretely triggered, we can achieve a perceived effect similar to PWM used above for controlling LEDs intensity, only this time to allude to a certain sound pitch, which in this case is quite similar to the sonority from older computer / console games.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="dX1in8BHiv4"></div></div>
   <p class="media-caption media-caption-two">&#8220;8bit&#8221; engine sound using a buzzer</p>
 </div>
</center>

<h2 id="sensing-sound-a-hreffilesarduinocodesoundsensorsoundsensorinocodea">Sensing Sound [<a href="https://lopespm.com/files/arduino/code/sound_sensor/sound_sensor.ino">Code</a>]</h2>

<p>I’ve burned the on-board LED (13) while voice fiddling with this integration, since one of the dupont wires touched a wrong spot of the board while going through this.</p>

<p>The red LED represents audio peaks, the yellow LED represents audio troughs.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="mPdCdz7o618"></div></div>
   <p class="media-caption media-caption-two">Detecting snapping of fingers and voice</p>
 </div>
</center>

<h1 id="spatial-sensors">Spatial Sensors</h1>

<h2 id="tilt-ball-switch-a-hreffilesarduinocodeballswitchballswitchinocodea">Tilt ball switch [<a href="https://lopespm.com/files/arduino/code/Ball_Switch/Ball_Switch.ino">Code</a>]</h2>

<p>This component consists of a very conductive sphere that is free to move inside the component’s cylindrical shape. One face of the cylinder conducts electricity, and the opposite does not.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="ohKZl3ug6Gs"></div></div>
   <p class="media-caption media-caption-two">Tilting the component to elicit its change of state</p>
 </div>
</center>

<h2 id="ultrasonic-sensor-to-measure-distances-a-hreffilesarduinocodedistanceechocustomalgoandleddistanceechocustomalgoandledinocodea">Ultrasonic sensor to measure distances [<a href="https://lopespm.com/files/arduino/code/distance_echo_custom_algo_and_led/distance_echo_custom_algo_and_led.ino">Code</a>]</h2>

<p>I wondered why an external module was required to calculate distances, so I’ve implemented an algorithm from scratch that took into account the speed of sound and the time taken by an ultrasonic pulse to be received back by the sensor. I’ve validated the measurements using a real life ruler, and they were actually accurate! No external code modules required.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="w9usLWrZSSw"></div></div>
   <p class="media-caption media-caption-two">Distance measurement using custom algorithm built from scratch</p>
 </div>
</center>

<h2 id="passive-infrared-sensor-pir-motion-sensor-a-hreffilesarduinocodehc-sr501pirsensorhc-sr501pirsensorinocodea">Passive infrared sensor (PIR) Motion Sensor [<a href="https://lopespm.com/files/arduino/code/HC-SR501_pir_sensor/HC-SR501_pir_sensor.ino">Code</a>]</h2>

<p>This is a sensor commonly used to detect movement from heat emitting, like people, and then trigger a side-effect, such as a hall light. Its output is a simple binary HIGH or LOW.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="ovEsyxWsuBo"></div></div>
   <p class="media-caption media-caption-two">Detecting motion via PIR sensor</p>
 </div>
</center>

<h2 id="mpu-6050-accelerometer-and-gyroscope-plotting-a-hreffilesarduinocodegyroplottergyroplotterinocodea">MPU-6050: Accelerometer and Gyroscope Plotting [<a href="https://lopespm.com/files/arduino/code/gyro_plotter/gyro_plotter.ino">Code</a>]</h2>

<p>Used the Arduino’s Serial Plotter Tool to visualize the inputs from the MPU-6050 module that bundles an accelerometer, gyro and temperature sensor.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="Ys8Gr2t1i4g"></div></div>
   <p class="media-caption media-caption-two">Accelerometer and Gyroscope Plotting</p>
 </div>
</center>

<h2 id="mpu-6050-interrupt-signals-a-hreffilesarduinocodegyrointerruptsgyrointerruptsinocodea">MPU-6050: Interrupt signals [<a href="https://lopespm.com/files/arduino/code/gyro_interrupts/gyro_interrupts.ino">Code</a>]</h2>

<p>Going through the <a href="https://lopespm.com/files/arduino/code/MPU_datasheets.zip">datasheets</a> of the gyro module, I’ve noticed that the module could be commanded to dispatch an interrupt signal whenever a certain threshold of movement was detected. This could be useful for low power systems for example, where this interrupt would signal that relevant movement data is starting and the main controller should be fully active.</p>

<p>The objective of this experiment was to make the blue LED blink whenever the gyro was disturbed, but this resulted in a mostly unpredictable output, where the root cause is likely to lie on the incorrect combination of commands needed to set up the module. Further exploration would be needed here.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="0iHUuY2QxrA"></div></div>
   <p class="media-caption media-caption-two">Attempting to get an interrupt signal when movement starts</p>
 </div>
</center>

<h1 id="environmental-sensors">Environmental Sensors</h1>

<h2 id="light-intensity-measurement-via-photoresistor-a-hreffilesarduinocodelcdlightintensitylcdlightintensityinocodea">Light intensity measurement via photoresistor [<a href="https://lopespm.com/files/arduino/code/lcd_light_intensity/lcd_light_intensity.ino">Code</a>]</h2>

<p>A photoresistor is a light-sensitive resistor whose resistance decreases when light falls on its surface, if we place wire in connected from one of Arduino’s analog inputs between the photoresistor and another fixed value resistor, we are able to detect the resulting voltage caused the photoresistor’s variable resistance.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="uyqq006H4nQ"></div></div>
   <p class="media-caption media-caption-two">Light intensity shown on LCD display</p>
 </div>
</center>

<h2 id="temperature-measurement-a-hreffilesarduinocodelcdthermometerlcdthermometerinocodea">Temperature measurement [<a href="https://lopespm.com/files/arduino/code/lcd_thermometer/lcd_thermometer.ino">Code</a>]</h2>

<p>With the exact same setup as above (save from the slight tweak of the script), by replacing the photoresistor with a thermistor (which yet another variable resistor, only this time changing its resistance based on temperature) we are able to measure ambient temperature, which I manipulate by using my hand’s warmth and the cooling it off by blowing air into the thermistor.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="QbPoVr0-r5Y"></div></div>
   <p class="media-caption media-caption-two">Temperature shown on LCD display</p>
 </div>
</center>

<h2 id="water-level-sensor-a-hreffilesarduinocodewaterlevelwaterlevelinocodea">Water level sensor [<a href="https://lopespm.com/files/arduino/code/water_level/water_level.ino">Code</a>]</h2>

<p>This consisted of some nervous plunging of the water level sensor into a tea mug, near my computer 😬</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="jQrSKp70RdM"></div></div>
   <p class="media-caption media-caption-two">Water level sensor change as it is further submerged under water</p>
 </div>
</center>

<h1 id="actuators">Actuators</h1>

<h2 id="bjt-transistor-driven-dc-motor-controlled-via-onoff-button-a-hreffilesarduinocodebjptransistordrivendcmotorbjptransistordrivendcmotorinocodea">BJT Transistor driven DC motor: Controlled via On/Off Button [<a href="https://lopespm.com/files/arduino/code/bjp_transistor_driven_dc_motor/bjp_transistor_driven_dc_motor.ino">Code</a>]</h2>

<p>The Arduino is made to drive logical circuits with low output currents, so when we want to control a high power circuit, we want our Arduino microcontroller to control the “valve”, but not the “pipes” themselves. This is a perfect application for a transistor (or relays, as we’ll see below), where the transistor functions as a “valve” that either lets current flow through freely, or block it completely.</p>

<p>The kit comes included with two models of NPN bipolar junction transistor (BJT) transistors: the PN2222 and S8050. Both are often used interchangeably (as seen in this video), but the PN2222 has a higher voltage rating for collector-to-emitter voltage (60V vs 25V), which in this case is not relevant, since we are not surpassing the 5V barrier. In these, the base is the “valve”, and collector and emitter function as the “pipes”.</p>

<p>Note here I am not using a flyback diode to protect the circuit from back EMF voltage spikes caused when the DC motor is switched off, which is not the wisest idea when performing multiple tests. I was not aware of that effect at the time, and fortunately no harm was done.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="94dfO0uvHt0"></div></div>
   <p class="media-caption media-caption-two">DC Motor controlled via On/Off Button</p>
 </div>
</center>

<h2 id="bjt-transistor-driven-led-and-dc-motor-controlled-via-potentiometer-a-hreffilesarduinocodebjptransistordrivendcmotorwithpotbjptransistordrivendcmotorwithpotinocodea">BJT Transistor driven LED and DC motor: Controlled via Potentiometer [<a href="https://lopespm.com/files/arduino/code/bjp_transistor_driven_dc_motor_with_pot/bjp_transistor_driven_dc_motor_with_pot.ino">Code</a>]</h2>

<p>Same setup as above, only this time we are driving a LED instead of a DC motor.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="ulzed033Iw8"></div></div>
   <p class="media-caption media-caption-two">LED controlled via Potentiometer</p>
 </div>
</center>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="30E7BqYjadU"></div></div>
   <p class="media-caption media-caption-two">DC motor controlled via Potentiometer</p>
 </div>
</center>

<h2 id="l293d-driven-dc-motor-using-battery-power-a-hreffilesarduinocodedcmotorwithbatterydcmotorwithbatteryinocodea">L293D driven DC Motor using battery power [<a href="https://lopespm.com/files/arduino/code/DC_Motor_with_battery/DC_Motor_with_battery.ino">Code</a>]</h2>

<p>L293D is a neat IC that packs inside everyone one needs to drive inductive loads such as relays, solenoids, DC and bipolar stepping motors, along with bidirectional drive and overcurrent and kickback protection (so no flyback diode needed).</p>

<p>Notice that when attempting to drive the DC motor at low power it struggles to start its rotation, but once power is increased of a slight nudge is given, it quickly starts to rotate freely.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="bYevVZHnIJ8"></div></div>
   <p class="media-caption media-caption-two">L293D driven DC Motor using battery power</p>
 </div>
</center>

<h2 id="l293d--relay-driven-dc-motor-a-hreffilesarduinocoderelaywithmotorrelaywithmotorinocodea">L293D + Relay driven DC Motor [<a href="https://lopespm.com/files/arduino/code/relay_with_motor/relay_with_motor.ino">Code</a>]</h2>

<p>Relays are larger and have slower switching speeds when compared to transistors, but handle higher currents and voltages and provide good electrical isolation.</p>

<p>As a fun fact, in older cars, “tick-tock” heard when activating the turn signal are actually the sound of the respective relay closing and opening the circuit to light up the blinker. Those relays are very similar to the one used here, and a similar noise can be heard in the video, as the relay closes and opens the circuit that powers the DC motor</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="MWE4fc4mA60"></div></div>
   <p class="media-caption media-caption-two">L293D + Relay driven DC Motor</p>
 </div>
</center>

<h2 id="resistor-and-capacitor-rc-circuit-for-delayed-triggering">Resistor and Capacitor (RC) circuit for delayed triggering</h2>

<p>When setting up a <a href="https://en.wikipedia.org/wiki/RC_circuit">Resistor and Capacitor (RC) circuit</a>, we can take advantage of its predictable charging curve to delay the activation of a transistor, which in turn can activate another set of components. Depending if the transistor is a BJT (current-controlled) or a MOSFET (voltage-controlled), they would have different current or voltage thresholds at which they allow current to flow between the collector and emitter (BJT), or drain and source (MOSFET).</p>

<p>In this case, a bipolar junction transistor (BJT) has its base connected to RC circuit, and upon its activation a LED and/or a DC motor are activated. Notice that the DC motor either does not have enough power to start, or barely has a delay once a smaller resistor is placed on the RC circuit, which I think to be caused by having low capacitance capacitors, and not having the ideal resistor being used on RC circuit, but this would warrant further exploration and a deeper understanding of the problem.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="xDFLzbIJ0Fc"></div></div>
   <p class="media-caption media-caption-two">Delayed LED lighting via RC Circuit + BJT Transistor</p>
 </div>
</center>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="O5sSbXKOAi0"></div></div>
   <p class="media-caption media-caption-two">Delayed LED lighting and DC Motor via RC Circuit + Single BJT Transistor</p>
 </div>
</center>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="jiHrOab4g6Q"></div></div>
   <p class="media-caption media-caption-two">Delayed LED lighting and DC Motor via RC Circuit + Two BJT Transistors</p>
 </div>
</center>

<h2 id="servo-motor-controlled-via-potentiometer-a-hreffilesarduinocodeservoandpotentitiometerandbuttonledservoandpotentitiometerandbuttonledinocodea">Servo Motor controlled via Potentiometer [<a href="https://lopespm.com/files/arduino/code/servo_and_potentitiometer_and_button_led/servo_and_potentitiometer_and_button_led.ino">Code</a>]</h2>

<p>Servo motors are used in applications requiring precise and controlled movement, where the motor’s position, speed, and torque need to be accurately controlled. In this example a button is used to switch between the state where the servo’s position is synced position defined by the potentiometer, and the state where a default servo motor position is set.</p>

<p>Notice as well how the slight voltage noise created when manipulating the detached potentiometer input wire, and the effect it has on the servo that is attempting to sync with these received values.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="BYPq9QgATOM"></div></div>
   <p class="media-caption media-caption-two">Servo Motor controlled via Potentiometer</p>
 </div>
</center>

<h2 id="stepper-motor-automatic-control-a-hreffilesarduinocodesteppermotorcustomautosteppermotorcustomautoinocodea">Stepper Motor: Automatic Control [<a href="https://lopespm.com/files/arduino/code/stepper_motor_custom_auto/stepper_motor_custom_auto.ino">Code</a>]</h2>

<p>The stepping motor is a clever piece of engineering that enables precision movement <a href="https://youtube.com/watch?v=eyqwLiowZiU">without the need of external feedback</a>.</p>

<p>In this setup the motor is controlled fully by an automated script, and since the 9V battery was starting to die, it was powered via power adapter.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="uHlB0qYnwRw"></div></div>
   <p class="media-caption media-caption-two">Stepper Motor: Automatic Control</p>
 </div>
</center>

<h2 id="stepper-motor-rotary-encoder-control-using-elegoo-script-a-hreffilesarduinocodesteppermotorwithencodersteppermotorwithencoderinocodea">Stepper Motor: Rotary Encoder Control, using ELEGOO script [<a href="https://lopespm.com/files/arduino/code/stepper_motor_with_encoder/stepper_motor_with_encoder.ino">Code</a>]</h2>

<p>To the above we add a rotary encoder to send precise commands of how much we want the stepper to move. This rotary encoder is the same you’ll find in several appliances such as mouse wheels, car radio knobs and washing machines.</p>

<p>Notice that the movement is quite jerky, and no matter how much we move the rotary encoder, only the most recent movements are actually accounted for.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="Za4kyTQsCLM"></div></div>
   <p class="media-caption media-caption-two">Stepper Motor: Rotary Encoder Control, using ELEGOO script</p>
 </div>
</center>

<h2 id="stepper-motor-rotary-encoder-control-with-extra-precision-a-hreffilesarduinocodesteppermotorwithencodercustomsteppermotorwithencodercustominocodea">Stepper Motor: Rotary Encoder Control, with Extra Precision [<a href="https://lopespm.com/files/arduino/code/stepper_motor_with_encoder_custom/stepper_motor_with_encoder_custom.ino">Code</a>]</h2>

<p>To fix the above behaviour, this script takes into account all the movements from the rotary encoder to establish a target rotation angle that every cycle the stepper motor is correcting itself towards.</p>

<p>Notice that in the beginning of the video the two LEDs are lighting up as the rotary encoder is manipulated, so that we can see which are the signals captured by our script. These signals consist of a predictable <a href="https://en.wikipedia.org/wiki/Gray_code">gray code</a> sequence that lets us perceive with high accuracy whether it is rotating right or left.</p>

<p>Once the two demonstration LEDs are disconnected, we’ll have signals coming through our Arduino inputs, that we interpret leveraging the above concepts, plus we also make sure to trigger device interrupts not only for one of the inputs (as in the script above), but for both inputs, so that we can capture all movements.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="77HOMCDTdmg"></div></div>
   <p class="media-caption media-caption-two">Stepper Motor: Rotary Encoder Control, with Extra Precision</p>
 </div>
</center>

<h2 id="stepper-motor-ir-remote-control-a-hreffilesarduinocodesteppermotorwithremotesteppermotorwithremoteinocodea">Stepper Motor: IR Remote Control [<a href="https://lopespm.com/files/arduino/code/stepper_motor_with_remote/stepper_motor_with_remote.ino">Code</a>]</h2>

<p>Combining the IR sensor and remote above, we can also control this stepper motor using this remote control mechanism.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="OGHNJ_zIMXU"></div></div>
   <p class="media-caption media-caption-two">Stepper Motor: IR Remote Control</p>
 </div>
</center>

<h1 id="communication-interfaces">Communication Interfaces</h1>

<h2 id="how-arduino-keypad-works-under-the-hood-from-scratch-without-extra-libraries">How Arduino Keypad Works under the hood, from scratch, without extra libraries</h2>

<p>One of the peripherals you can provide as input to Arduino is a 16 button keypad that provides a useful human interface component for microcontroller projects.</p>

<p>This keypad module comes included in the <a href="https://www.elegoo.com/en-gb/blogs/arduino-projects/elegoo-uno-r3-project-the-most-complete-starter-kit-tutorial">Elegoo UNO R3 Starter Kit</a>, which also comes with its respective tutorial and library that helps facilitates its usage.</p>

<p>In this video we will code from scratch an implementation that will use this keypad module, without using extra libraries, and we will go through the respective concepts and circuits, including how pull-up resistors work (which are accessible via INPUT_PULLUP)</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="1iPnFEWHnqo"></div></div>
   <p class="media-caption media-caption-two">How Arduino Keypad Works under the hood</p>
 </div>
</center>

<p>Supporting code:</p>

<ul>
  <li><a href="https://gist.github.com/lopespm/2d2ce2701ae8e726a5d497c36283d008">Using one column source code</a> (as seen in the video)</li>
  <li><a href="https://gist.github.com/lopespm/0716fbecc080b6ba06d4240e269124f5">Using two columns source code</a></li>
</ul>

<p>Note that the code resorts to a fair amount of duplication, but this is explicitly show how the entire mechanism works, without occluding via abstractions</p>

<h2 id="ir-signal-replication-a-hreffilesarduinocodeattempttoreplicateir38khzsignalattempttoreplicateir38khzsignalinocodea">IR Signal Replication [<a href="https://lopespm.com/files/arduino/code/attempt_to_replicate_IR_38khz_signal/attempt_to_replicate_IR_38khz_signal.ino">Code</a>]</h2>

<p>While exploring how common <a href="https://en.wikipedia.org/wiki/Consumer_IR">infrared communication protocols</a> are used in every day appliances, I wondered if it was possible punch in custom light pulses via a red LED source that could be interpreted as valid signals by the IR receiver, and started by pulsing it in 25ms intervals in order comply with the 38khz signal modulation expectation on the IR receiver (1 second / 38000 Hz ~= 25ms).</p>

<p>Turns out this would never work with a normal red LED, since its wavelength sits around the 640nm peak, whereas we would need a 900nm to 1000nm wavelength for an IR receiver to pick that signal.</p>

<center>
          <picture aria-label="Typical wavelength characteristics of a red LED">
             <source type="image/webp" srcset="/files/arduino/red_led_wavelength.webp" aria-label="Typical wavelength characteristics of a red LED" />
             <source type="image/png" srcset="/files/arduino/red_led_wavelength.png" aria-label="Typical wavelength characteristics of a red LED" />
             <img src="https://lopespm.com/files/arduino/red_led_wavelength.png" aria-label="Typical wavelength characteristics of a red LED" />
           </picture>
         </center>

<p>In this attempt, I am comparing the continuous pulsing by the red LED vs the pulsing generated by a standard IR remote. An interesting follow up would be to attempt the same setup, but with a IR LED emitter instead.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="8G8a_a26kd0"></div></div>
   <p class="media-caption media-caption-two">IR Signal Replication Attempt</p>
 </div>
</center>

<h2 id="rfid-card-reader-a-hreffilesarduinocoderfiddumpinforfiddumpinfoinocodea">RFID Card Reader [<a href="https://lopespm.com/files/arduino/code/rfid_dump_info/rfid_dump_info.ino">Code</a>]</h2>

<p>This video shows what the MIFARE content dump from the two cards included with the kit, but the setup is able to read minimal information from other sources, like credit cards or electronic passports.</p>

<p><em>Note that this module reference voltage works best when connected to the Arduino’s VIn output, instead of Arduino’s 3.3v power output.</em></p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="Ren_lDIDvvw"></div></div>
   <p class="media-caption media-caption-two">Content dump of the information read from the two cards included with the kit</p>
 </div>
</center>

<h2 id="joystick-a-hreffilesarduinocodejoysticksimplejoysticksimpleinocodea">Joystick [<a href="https://lopespm.com/files/arduino/code/joystick_simple/joystick_simple.ino">Code</a>]</h2>

<p>This joystick module is essentially the same used in several game controllers, and its usage is fairly straighforward using an Arduino.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="YXf3wuE9nZ4"></div></div>
   <p class="media-caption media-caption-two">Joystick module demonstration</p>
 </div>
</center>

<h1 id="communication-and-storage">Communication and Storage</h1>

<h2 id="transmitting-serial-information-via-tx-output-a-hreffilesarduinocodesendingserialdatasendingserialdatainocodea">Transmitting Serial Information via TX output [<a href="https://lopespm.com/files/arduino/code/sending_serial_data/sending_serial_data.ino">Code</a>]</h2>

<p>This might come as obvious to many, but only after using <code>Serial.print()</code> on different Arduino scripts as a debugging mechanism, did I realize that this command actually sends structured information not only to the host via USB (computer), but also via Arduino’s TX output. </p>

<p>This video/script are very simple: they write very long strings and individual bytes to the serial interface, using a very low baud rate, so that their individual bits can be roughly seen upon the right yellow LED that is attached to the TX output. The left green LED stays enabled before we start sending commands to the serial interface, and is disabled once the writing phase is completed.</p>

<p>Notice that even after all writes were committed, there are still bits flowing through the TX output. This goes on until Arduino’s internal serial communication buffer is completely flushed.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="V1EFe0CodHA"></div></div>
   <p class="media-caption media-caption-two">Left green LED stays enabled during writing phase. Yellow LED represents single bits in the TX communication stream</p>
 </div>
</center>

<h2 id="writing-individual-bits-and-feeding-them-back-via-rx-input-a-hreffilesarduinocode8bitselftransmission8bitselftransmissioninocodea">Writing individual bits and feeding them back via RX input [<a href="https://lopespm.com/files/arduino/code/8bit_self_transmission/8bit_self_transmission.ino">Code</a>]</h2>

<p>Building up on the above, if we write individual bits by carefully timing the a normal pin output’s LOW and HIGH to comply with the <a href="https://docs.arduino.cc/learn/communication/uart/">UART standard</a> to form 8 bit packets, feed these through a wire to the Arduino’s Rx pin, read the resulting serial communication receive buffer, and then finally write these contents into the serial port, we are able to see these logged into the serial monitor.</p>

<p>This was one of the most 🤯 while fiddling around with the Arduino.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="3aVKYZIQNaU"></div></div>
   <p class="media-caption media-caption-two">Writing individual bits and feeding them back via RX input</p>
 </div>
</center>

<h2 id="sending-information-from-the-host-to-arduino-a-hreffilesarduinocodeserialreadserialreadinocodea">Sending information from the host to Arduino [<a href="https://lopespm.com/files/arduino/code/serial_read/serial_read.ino">Code</a>]</h2>

<p>Using the Serial Monitor, we can easily send packets of information to the Arduino via Serial communication. In this script, Arduino reads from the serial communication buffer an enables or disables a LED if the corresponding received information is a zero or a one.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="8qVVttbluqg"></div></div>
   <p class="media-caption media-caption-two">Sending information from the host to Arduino</p>
 </div>
</center>

<h2 id="using-internal-eeprom-to-persist-information-a-hreffilesarduinocodeserialreadeepromserialreadeeprominocodea">Using internal EEPROM to persist information [<a href="https://lopespm.com/files/arduino/code/serial_read_eeprom/serial_read_eeprom.ino">Code</a>]</h2>

<p>Building on the above setup, we integrate <a href="https://youtube.com/watch?v=Sus96T">ATmega’s integrated EEPROM</a> to persist information. This means that even after a power outage that information is still available, as seen in the video below.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="D3iAhWgaQ2Q"></div></div>
   <p class="media-caption media-caption-two">Using internal EEPROM to persist information</p>
 </div>
</center>

<h2 id="sending-information-from-the-host-to-arduino--74ch95-to-drive-leds-a-hreffilesarduinocode3led74ch95withserialread3led74ch95withserialreadinocodea">Sending information from the host to Arduino + 74CH95 to drive LEDs [<a href="https://lopespm.com/files/arduino/code/3led_74CH95_with_serial_read/3led_74CH95_with_serial_read.ino">Code</a>]</h2>

<p>We can attach an 74HC595 IC to extend the number of outputs possible by an Arduino, and do the same as above but for extra outputs. The setup supports 7 different LEDS, but only 3 are shown in the video, and for this specific example there is no real gain from using 74CH95 IC, other than demonstrating its usage.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="eRZ1QjW8w1c"></div></div>
   <p class="media-caption media-caption-two">Serial read side effects using 3 LEDs and 74HC595</p>
 </div>
</center>

<h1 id="time">Time</h1>

<h2 id="real-time-clock-rtc-module-square-wave-output-a-hreffilesarduinocodeclocksquarewaveoutputclocksquarewaveoutputinocodea">Real Time Clock (RTC) Module Square Wave Output [<a href="https://lopespm.com/files/arduino/code/clock_squarewave_output/clock_squarewave_output.ino">Code</a>]</h2>

<p>I was curious about the RTC module’s square wave output, and found a <a href="https://youtube.com/watch?v=SXnqI23XXxQ">YouTube video</a> on how to send a command to the module that forces the square wave pin (SQW) to output a 1Hz square wave, meaning that the cycle of this wave repeats every second.</p>

<p>In the video, this signal is first connected to a LED, which leads it to blink every second, and then the output is directed towards Arduino’s pin 8, thus showing this cycle’s result on the serial output.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="6t8rYvvDC8o"></div></div>
   <p class="media-caption media-caption-two">Square Wave Output visible first on LED, then on serial output logs</p>
 </div>
</center>

<h1 id="integration">Integration</h1>

<h2 id="putting-it-all-together-the-timer-a-hreffilesarduinocodetimerzipcodea">Putting it all together: the Timer [<a href="https://lopespm.com/files/arduino/code/timer.zip">Code</a>]</h2>

<p>The time project is the opus maximus of the provided tutorials provided by Elegoo, but there were components which were not working directly, namely the interrupt library, so I’ve adapted the provided example to use the built in Arduino interrupt library, and changed some of the connections, leading to a beautiful culmination of all the the lessons from above.</p>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="SPTvg7xPScc"></div></div>
   <p class="media-caption media-caption-two">Timer Integration</p>
 </div>
</center>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Bluetooth Headphones Safety]]></title>
    <link href="https://lopespm.com/notes/2025/02/22/wireless-headphones.html"/>
    <updated>2025-02-22T00:00:00+00:00</updated>
    <id>https://lopespm.com/notes/2025/02/22/wireless-headphones</id>
    <content type="html"><![CDATA[<p>After nearly 4 years of continuous usage at work, taking calls and listening to audiobooks during long walks, my wired in-ear <a href="https://www.bose.co.uk/en_gb/support/products/bose_headphones_support/bose_in_ear_headphones_support/qc20.html">Bose QuietComfort 20 MK2 Active Noise Cancelling Earphones</a> are finally starting to become faulty<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>, so I went on a search for a replacement.</p>

<!--more-->

<h2 id="searching-for-replacement-wired-anc-earbuds">Searching for replacement wired ANC earbuds</h2>

<p>To my surprise, not only have these types of earphones been discontinued by Bose, but the selection of wired in-ear active noise cancelling headphones is incredibly slim. After an extensive search, I’ve found <a href="https://rog.asus.com/uk/headsets-audio/in-ear-headphone/rog-cetra-ii-model/">Asus ROG Cetra II</a> and <a href="https://www.bang-olufsen.com/en/us/earphones/beoplay-e4">Bang Olufsen B4</a>, which appear to offer inferior quality in terms of Active Noise Cancelling (ANC), when compared to recent highly rated <a href="https://www.bose.co.uk/en_gb/products/headphones/earbuds/bose-quietcomfort-earbuds-ultra.html#v=QCUE-HEADPHONEIN-WHTSM-WW">Bose</a>, <a href="https://www.sony.co.uk/headphones/gallery?filters=trulyWirelessHeadphoneFeatures%3AID_020_noise-cancelling">Sony</a> or <a href="https://www.apple.com/uk/airpods-max/">Apple</a> headphones, which are either wireless or are <a href="https://www.bose.co.uk/en_gb/products/headphones/noise_cancelling_headphones/bose-quietcomfort-headphones.html#v=QC-HEADPHONEARN-BLUDK-WW">over-ear</a> / on-ear. Quality in-ear<sup id="fnref:5"><a href="#fn:5" rel="footnote">2</a></sup> ANC earbuds are almost exclusively wireless.</p>

<h2 id="health">Health</h2>

<p>I understand the popularity of wireless earbuds. They are extremely practical and neat. It is not surprising that <a href="https://www.kantarmedia.com/news-and-resources/rise-of-bluetooth-headphones">penetration of bluetooth headphones has jumped considerably in recent years</a>, but given that I use my headphones for several hours each day, it is not an enticing proposition to have two wireless devices extremely close to my brain, even if they output a low amount of EMF radiation. The (cumulative) dose makes the poison.</p>

<p>Several experts <sup id="fnref:2"><a href="#fn:2" rel="footnote">3</a></sup> <sup id="fnref:3"><a href="#fn:3" rel="footnote">4</a></sup> <sup id="fnref:4"><a href="#fn:4" rel="footnote">5</a></sup> claim there is no danger in prolonged usage of these devices, because they don’t emit ionizing radiation, but it has been reported both in <a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC6025786/">studies</a> and <a href="https://en.wikipedia.org/wiki/Wireless_device_radiation_and_health#Electromagnetic_hypersensitivity">anecdotally</a> that exposure to high levels of EMF radiation <em>might</em> have detrimental effects long term.</p>

<p>I’ve found it challenging to uncover quality studies that correlate the usage of bluetooth headphones and health effects. I assume this correlation is hard to experiment upon with statistically significant results, due to how long this exposure needs to happen, and other confounding environmental and behavioural factors. Regardless, one of these <a href="https://www.nature.com/articles/s41598-024-63653-0">studies draws a significant link between the usage of bluetooth headset and thyroid nodules</a>.</p>

<h2 id="unknowns-risks">Unknowns Risks</h2>

<p>Widespread adoption of these devices is still relatively recent, and we should be humble enough to acknowledge that we don’t have the full picture clearly laid out of the all repercussions related to their long term usage, especially when in close proximity to one of the most valuable organs of our body, our brain.</p>

<p>It’s not what is known that concerns me, but rather what is not known. Until proven the contrary, I will continue to play it safe, and avoid using wireless earbuds.</p>

<p>Hopefully a larger swath of the population will increasingly exercise caution and awareness on this issue, signalling manufacturers to drive the supply of competitive good quality wired in-ear ANC headphones that empower the consumer to make the best choice for their use case, and their health.</p>

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>The battery is still pristine, but the left earbud started to give out a random noise when active noise cancelling is enabled.<a href="#fnref:1" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:5">
      <p>I’m exclusively looking for in-ear headphones because of how <a href="https://www.youtube.com/watch?v=1HJs34y1u_w">challenging</a> it is to find over-ear or on-ear headphones that doesn’t cause discomfort after several hours, when using glasses. I also appreciate the style of in-ears, although that is secondary.<a href="#fnref:5" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:2">
      <p><a href="https://pubmed.ncbi.nlm.nih.gov/23619813/">Effect of Bluetooth headset and mobile phone electromagnetic fields on the human auditory nerve</a> - Marco Mandalà, Vittorio Colletti, Luca Sacchetto, Paolo Manganotti, Stefano Ramat, Alessandro Marcocci, Liliana Colletti<a href="#fnref:2" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:3">
      <p><a href="https://www.youtube.com/watch?v=BBqMqLyy9HQ">Are Bluetooth Headphones Safe?</a> - Dr. Matt MacDougall &amp; Dr. Andrew Huberman<a href="#fnref:3" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:4">
      <p><a href="https://www.youtube.com/watch?v=_xOpkyt5eMY">How Unhealthy Are Your AirPods?</a> - Doctor Mike<a href="#fnref:4" rel="reference">&#8617;</a></p>
    </li>
  </ol>
</div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[The Story of the Human Body Book: Lessons]]></title>
    <link href="https://lopespm.com/notes/2025/02/10/story-human-body-lessons.html"/>
    <updated>2025-02-10T00:00:00+00:00</updated>
    <id>https://lopespm.com/notes/2025/02/10/story-human-body-lessons</id>
    <content type="html"><![CDATA[<p>I’ve recently finished reading <a href="https://www.amazon.co.uk/Story-Human-Body-Evolution-Disease/dp/030774180X">The Story of the Human Body: Evolution, Health, and Disease</a>, a book from Daniel Lieberman of how the human body evolved over millions of years, that I would recommend all Humans to read. These are are my main takeaways:</p>

<!--more-->

<h1 id="why-we-are-the-way-we-are">Why we are, the way we are</h1>

<h2 id="it-is-all-about-how-energy-is-used">It is all about how energy is used</h2>

<p>Us humans and other living beings are essentially organisms that use energy to reproduce and maintain ourselves.</p>

<ul>
  <li>Natural selection prunes off organisms that don’t use energy in a way that is suited to their conditions and environment.</li>
  <li><strong>Every energy transformation feature / trait has a cost</strong>. For example: walking upright allows one to walk using less energy, but lacks the speed of a quadruped.</li>
</ul>

<h2 id="long-distance-walking--running-machines">Long Distance Walking / Running Machines</h2>

<h3 id="what-drove-selection-for-bipedalism">What drove selection for bipedalism</h3>

<p>Hominid bipedalism was likely to have been initially selected to help the first hominids forage and obtain food more effectively in the face of major climate change</p>

<p>Between 10 and 5 million years ago, the earth climate cooled considerably, and overall effect in Africa that caused rainforests to shrink and woodlands to expand. If you were to be in the heart of the rainforest, you likely wouldn’t have noticed much of a difference, but if you were in the margins, this change must have been stressful. As the forest shrinks and becomes woodland, ripe fruits become less abundant, more dispersed and more seasonal. These changes would require you to travel farther to get the same amount of food.</p>

<p>Walking on two legs is more energy efficient for longer routes. Main trade off is less speed, because we could not gallop. We are 3x more efficient moving a distance of 6km than a chimp.</p>

<h3 id="the-consequences-of-bipedalism">The consequences of bipedalism</h3>

<p>Not only was endurance walking useful, but also long distance running was likely selected for scavenging. Running to fresh carcasses, running with food and, persistence hunting, where a big animal is followed  by running and walking on sun. They need to find shades and pant, and eventually collapse due to heat stroke.</p>

<ul>
  <li>We are unique in that we have sweat glands all over the body. Other apes mostly have on the palms of their hands. And we. Don’t have fur, allowing the air to come in contact with sweat and cool your body down. This is essential for long distance running and walking.
    <ul>
      <li>Other animals have fur that reflects solar radiation, but does  it allow body to cool down through sweat</li>
    </ul>
  </li>
</ul>

<p>Other features that help us to run effectively. Some of them not specially helpful for walking, like shorter toes:</p>

<ul>
  <li>Big gluteus maximus muscles, mostly active when running.</li>
  <li>Nuchal ligament is a back neck ligament that connects head to arm that helps stabilize the head while running. It was developed independently in humans and other animals well adapted for running.    </li>
  <li>Big semi circular inner ear canals to have more signals to allow for stabilization of our inner systems, such eye actions to compensate for the jiggle.</li>
  <li>Predominance of slow twitch fibers in legs. More endurance, thus compromising speed.</li>
  <li>Narrow waists, wide shoulders, shorter toes.</li>
  <li>Long noses are selected for walking long distances without drying up. Nose humidifies air coming into the lungs, which is necessary, and retains moisture going out. Trade-off is that lungs have to work a bit harder.</li>
</ul>

<p>All of these walking and running adaptations made us clumsy climbing trees, like shorter toes, but also freed up our hands to interact with the world, create the first tools and throw objects (we are especially good at throwing, having shoulders and upper body that makes it ideal for it), which not only provided some protection, but also allowed us to obtain and process fallback / lower quality foods (which were essential due to scarcity from global cooling climate).</p>

<blockquote>
  <p>Only mad dogs and Englishmen go out in the midday sun
<em>― Noël Coward</em></p>
</blockquote>

<h3 id="better-dexterity-tools-cognition-less-digestive-cost-more-energy-availability">Better dexterity, tools, cognition, less digestive cost, more energy availability</h3>

<p>In the average adult human, the brain represents about 2% of the body weight, but accounts to about 20% of total energy consumption.</p>

<p>As the ability to create and use tools allowed the gathering and processing of fallback foods, more usable energy was able to be extracted. Processing foods to smaller chunks, or cooking it, largely increases how much energy can be obtained during digestion, but also requires less intense chewing (we didn’t need as bigger teeth as australopithecus, which resulted in use losing the snout due to less space being needed in the head) and shorter intestines, which reduce energy required for digestion, increases surplus energy to be used by the brain. These factors selected hominids with better manual dexterity and better cognition.</p>

<p>Our manual dexterity, and what it unlocks, plays a big role in our evolution.</p>

<h3 id="energy-hungry-brain-and-relation-with-fat">Energy hungry brain, and relation with fat</h3>

<p>If our brain<sup id="fnref:5"><a href="#fn:5" rel="footnote">1</a></sup> is deprived of glucose for even 1 minute or two, it causes irreparable damage. This likely selected humans to become unusually fat. 400 to 500 calories daily, are for the brain alone. Extra intense thought only increases hourly usage by 5 calories per hour.</p>

<p>Hunter gatherer mothers have to expend about 2.3k calories for themselves alone to raise kids. Babies are unusually fat. 60 percent of their energy consumption is for the brain. It takes 12M calories to grow a child into a full grown adult. Twice as much as those needed for a chimpanzee.</p>

<p>Our way of living affected the size of our gut so profoundly, that now we are pretty much dependent on cooking to get the caloric intake we need for our body and brain.</p>

<p>Exercise is not great to lose fat (unless you don’t succumb to overeating after exercise) but it’s good to prevent fat gain. It increases muscle (and not fat) sensitivity to insulin and makes the muscles more readily available to store energy, and also increases the number of mitochondria that burn fat and sugar.</p>

<ul>
  <li>A lean man that doesn’t exercise has twice the risk of dying, compared to obese men that engaged in regular physical activity</li>
</ul>

<h3 id="high-offspring-investment">High offspring investment</h3>

<p>Life is fundamentally a way of using energy to make more life.</p>

<ul>
  <li>If the environment is risky: quick returns are favored, where little investment is made during life, but a lot during reproduction. Such as spiders, salmon that lay a lot of eggs, hoping that a lucky few will survive</li>
  <li>But when resources are predictable and infant mortality is low, it is feasible to mature slowly and invest a lot in raising the few offspring. This is the strategy of humans, elephants and apes.</li>
</ul>

<h3 id="cost-of-clear-speech-choking">Cost of clear speech: choking</h3>

<p>What good is it to have a good idea, if you can’t communicate it? One of the main features we developed as humans was our ability to use speech to clearly communicate thoughts, ideas, plans, and other information.</p>

<p>The price is that we are the only mammal that can risk asphyxiation when swallowing something too large or imprecisely<sup id="fnref:1"><a href="#fn:1" rel="footnote">2</a></sup>, because of the big common space behind the tongue through which food and air both travel to get either into the esophagus or trachea, a consequence of our short and retracted faces and selection of anatomy that favors clear speech. As a result, food sometimes gets lodged on the back of the throat, blocking the airway.</p>

<p>When you are having lunch with friends, consider that you are doing two things: speaking clearly, and swallowing a little dangerously.</p>

<h1 id="diseases">Diseases</h1>

<p>We’ve created a system that makes people sick through a surplus of energy, and keeps them alive without needing to turn down the energy flow</p>

<p>Lieberman presents the concepts of Mismatch diseases and Dysevolution:</p>

<ul>
  <li><strong>Mismatch diseases</strong>: Diseases that occur because our bodies are poorly or inadequately adapted to environments in which we now live. An example would be eating large amounts of sugar or being very physically inactive leads to problems like diabetes or heart disease that then make us sick    </li>
  <li><strong>Dysevolution</strong>: Form of cultural evolution where the symptoms of a mismatch disease are treated, but not the cause.  One example of this is cavities, which are treated with dentists, and not by removing the sugar from our diet, which is the underlying cause. Lieberman emphasizes that mismatched diseases and their causes must be understood fully to treat the true cause.</li>
</ul>

<h2 id="too-much-energy-surplus">Too much energy surplus</h2>

<p>Our ancestors ate fruits as sweet as carrots, but as energy dense foods had their availability increased<sup id="fnref:2"><a href="#fn:2" rel="footnote">3</a></sup>, more humans moved from subsistence farming and physically strenuous jobs to lower physical effort jobs (in the USA, only 11 per cent are actually factory workers. The rest are in management, services, wealth management and banking services), the same mechanisms that made us effective is storing energy and craving certain foods, are also the ones that have become maladapted to our current environment.</p>

<p>It has been only about 300 generations since we’ve been subsistence farmers, which didn’t give enough time for natural selection and body adaptations to develop.</p>

<h3 id="sugar-and-fat-absorption-mechanisms-and-effects">Sugar and fat absorption mechanisms and effects</h3>

<p>Your body can use <strong>glucose</strong> as energy readily, but <strong>fructose</strong> can only be worked as fat or in the liver.</p>

<ul>
  <li>When the liver is flooded with too much fructose, too quickly, it is overwhelmed and converts most of the fructose into fat, triglycerides. Some of this fat fills up the liver and causes inflammation, which blocks the action of insulin in the liver.    </li>
  <li>Chain reaction occurs, in that the liver releases stores of glucose into the bloodstream, driving the pancreas to release more insulin, shuttling extra glucose and fat into cells. The rest of fat created by the liver is dumped into the bloodstream, where it ends up in fat cells, your arteries, and other potentially bad places.
    <ul>
      <li>Visceral fat is more hormone sensitive than other fat cells, resulting that its stores are dumped fat more readily than other fat cells, and since it sits close to the liver, it tends to clog up the liver and constrain its glucagon function when it dumps fat.</li>
    </ul>
  </li>
  <li>Sugar is 50 percent fructose; fruits also have it. An apple for example has 13g of sugar. 30 percent is glucose, the rest is fructose.</li>
</ul>

<p>Comparing an apple to a highly processed fruit roll, apart from nutritional differences:</p>

<ul>
  <li><strong>Fiber</strong> covering the apple (the skin) prevents the full absorption of sugar. Fiber makes food stay longer in the stomach, generating signals that release appetite suppressing hormones.
    <ul>
      <li>Speed of eating and amount of fiber is important. That’s why salads and low glycemic foods should come first in your meal</li>
    </ul>
  </li>
  <li>An apple gives your pancreas time to realize how much insulin to release. On the other hand, high glycemic, calorie dense foods are easily and quickly absorbed in the digestive process, prompting the pancreas to produce a lot of insulin, which it often overshoots, plunging blood sugar levels, which in turn makes us hungry.</li>
</ul>

<h3 id="height-as-a-measure-of-extra-caloric-availability-and-health">Height as a measure of extra caloric availability and health</h3>

<ul>
  <li>Maximum height is constrained by genes, but available energy will limit actual height. Because if you spend most of your energy fighting diseases and toiling in the fields, then you won’t have extra calories to gain height. 
    <ul>
      <li>It was seen for populations that turned to subsistence  farming, like in Asia and America, to have had their height shortened. For example, subsistence farming children spent about 4 or 6 hours working, as compared to children of hunter gatherers that would spend about 1 to 2 hours working in tasks like gathering firewood and helping in domestic tasks.</li>
    </ul>
  </li>
  <li>Tall people are naturally selected in hot climates, because of higher surface area to release heat. Colder climates select for shorter ones, because they can retain more heat.</li>
</ul>

<h2 id="too-much-stress">Too much Stress</h2>

<ul>
  <li>Stress is an ancient adaptation to save you from dangerous situations, and activates energy reserves when you need them.
    <ul>
      <li>If a Lion roars nearby, a car nearly runs you over, or if you go for a run, your brain triggers your adrenal glands (which sit on top of your kidneys), to secrete a small dosage of the hormone cortisol.</li>
    </ul>
  </li>
  <li>Cortisol does not cause stress. It is released when you are stressed.</li>
  <li>One of cortisol’s functions is to cause liver and fat cells (specially visceral fat cells) to release glucose into the bloodstream. It increases heart rate and blood pressure, makes you more alert and prevents sleep, and makes you crave for calorie rich foods.
    <ul>
      <li>Chain reaction for long bouts of stress: as you crave more energy rich foods and consume them, this increases insulin levels, which inhibits the brain’s response to leptin (fat cells release it to increase satiety), as such, the stressed brain thinks you are starving, so activates reflexes to make you hungry and other reflexes ot make you less active.</li>
    </ul>
  </li>
</ul>

<h2 id="too-little-sleep">Too little Sleep</h2>

<ul>
  <li>Insufficient sleep promotes stress and stress promotes insufficient sleep. Higher income populations get on average more sleep, likely because of having of less challenges of making ends meet and less stress
    <ul>
      <li>Sleep deprivation is sometimes caused by elevated levels of stress, thus more cortisol.</li>
      <li>Sleep deprivation elevates the ghrelin hormone, a hunger hormone that stimulates appetite.</li>
    </ul>
  </li>
  <li>Only until recently did we do start sleeping alone or with a single partner the child detached from parents during sleep, and in stimulus deprived environments
    <ul>
      <li>On the other hand, hunter gatherers used to sleep in relatively noisy environments, woke up at about 7h, took a one hour nap in the middle of the day, and then went to sleep at 9pm, where they would get two sleeps. Likely an adaptation, that prevented predator under vigilance</li>
      <li>But now we have entertainment and lights that are able to keep us awake far beyond 9pm, in sensory deprived environments, with less exercise, excess calories, and stress</li>
    </ul>
  </li>
</ul>

<h2 id="too-crowded">Too Crowded</h2>

<p>Villages, cities, are our human fortresses from the wild. Because we have that fortress, we don’t need to carry arms and be attentive to outer animal threats, like lions. Mostly. There were costs to these though:</p>

<ul>
  <li>High concentration of humans in low<sup id="fnref:3"><a href="#fn:3" rel="footnote">4</a></sup> sanitation<sup id="fnref:4"><a href="#fn:4" rel="footnote">5</a></sup> environments facilitated the spread of these diseases, and close contact with animals gave rise to diseases such as influenza, coming from pigs.</li>
  <li>Before the 1900s, the death rates in cities such as London were higher than in rural areas, so they needed a large influx of rural immigrants to keep them going. Which they did, because of a larger scope of opportunities and wealth.</li>
  <li>Cows’ digestive systems were adapted to eat grass, but in the crowded industrial complexes they are fed grains, and as a consequence they have to be constantly medicated with antibiotics, to counter their chronic diarrhea and diseases coming from these crowded, filthy environments.
    <ul>
      <li>Antibiotics given to industrially raised animals because microbes also consume energy. So this makes them fatter</li>
    </ul>
  </li>
</ul>

<h2 id="cancer">Cancer</h2>

<p>There is a <strong>positive correlation between cancer development in reproductive organs and high energy balance</strong>.</p>

<ul>
  <li>Women’s bodies adapted towards delivering as many children as possible, and are maladapted towards having a high energy balance:
    <ul>
      <li>High exposure to estrogen incentives cell division in breast, ovaries, and uterus, in preparation of a fertilized embryo. Chances to develop cancer in these organs increases substantially from the number of menstrual cycles, and decreases as the number of children the woman bears.
        <ul>
          <li>During the menstrual cycle the levels of estrogen and progesterone rise significantly</li>
          <li>While nursing, chances of having cancer go down, as there is less exposure to reproductive hormones, and likely breast feeding aids flushing memory ducts.</li>
        </ul>
      </li>
      <li>For women, the incidence of breast cancer was observed to be higher in nuns (hence, the nuns disease)</li>
      <li>Women in contemporary USA have about 350-400 menstrual cycles, start menstruating at 12, 13, and then stop at early fifties
        <ul>
          <li>Hunter gatherers have about 150 cycles, and start menstruating at 16. They spent most of their life being pregnant or nursing, while barely having energy to do so.</li>
        </ul>
      </li>
      <li>Obese women can have 40 per cent more estrogen, because of the role of fat in the endocrine system. So after menopause being obese is correlated with cancer in women</li>
    </ul>
  </li>
  <li>For men, higher exposure to testosterone throughout their life is correlated with prostate cancer. But correlation is not as strong as in women.</li>
</ul>

<p>More exercise results in lower chances of cancer. Likely because the energy spent there is not otherwise spent on reproductive hormones that have these side effects.</p>

<ul>
  <li>There is <a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC1402378/">compelling evidence</a> that routine physical activity is associated with reductions in the incidence of specific cancers, in particular breast and colon cancer. Physically active men and women exhibited a 30%–40% reduction in the relative risk of colon cancer, and physically active women a 20%–30% reduction in the relative risk of breast cancer compared with their inactive counterparts.</li>
</ul>

<h2 id="use-it-or-lose-it-no-strain-no-gain">Use it, or lose it; No strain, no gain</h2>

<p>Imagine you are tasked with building a robot that is aimed to accomplish a task in the future that is unknown. You can either create a series of specialized robots (e.g. only able to swim, to dig, jump, etc), or a single one that adapts to multiple situations. When you don’t know what the robot will do, the latter works best. That is how animals and plants work. But if you don’t use it, you lose it.</p>

<h3 id="bone-loss">Bone loss</h3>

<ul>
  <li>Bones are a reserve of calcium, an essential component to the body. If there is not enough calcium, osteoclasts start dissolving them at a higher rate.</li>
  <li>Most people will reach their peak bone mass between the ages of 25 and 30, then it keeps going away. Specially struts in spongy bones like vertebrae and joints. They don’t come back.    </li>
  <li>Just having a supply of calcium and vitamin D is not enough. You also need to load your bones, otherwise the osteoblasts will not kick in to start building bone.
    <ul>
      <li>High intensity weight bearing can stop or even moderately reverse some loss.</li>
    </ul>
  </li>
</ul>

<h3 id="teeth-problems">Teeth problems</h3>

<p>If you don’t chew enough when you are young, teeth will become misaligned, and overcrowding happens, leading to issues on wisdom tooth growth for example. The body needs that stress.</p>

<h2 id="allergies-and-hygiene-hypothesis">Allergies and hygiene hypothesis</h2>

<p>Hygiene hypothesis states that early childhood exposure to particular microorganisms (such as the gut flora and helminth parasites) protects against allergies by properly tuning the immune system. In particular, a lack of such exposure is thought to lead to poor immune tolerance. There are two main hypothesis for it:</p>

<ul>
  <li>First hypothesis is that T helper 1 cells are not busy enough<sup id="fnref:6"><a href="#fn:6" rel="footnote">6</a></sup>, which increases the number of T helper 2 cells. With more sterilized environments, children’s immune systems are less busy, having more of these T helper 2 cells swimming unemployed, leading to a higher probability that they react to a non-threatening component. First reaction is mild, but the immune system keeps a memory, so the following time that component is detected, it’s devastating.</li>
  <li>Second hypothesis is microbiome destabilization, the “old friends” hypothesis. Microbes have evolved to cohabit with others and us in a cold war kind of environment. Once you start killing several of them with antibiotics and cleaning products, you destabilize their equilibrium
    <ul>
      <li>There is a case to be made that possible treatments would be to have fezes or filth</li>
      <li>And it also follows that after antibiotic treatments, that probiotics are taken</li>
    </ul>
  </li>
</ul>

<h2 id="we-frequently-mistake-comfort-for-wellbeing">We frequently mistake comfort for wellbeing</h2>

<p>Hannah Arendt introduced the expression and concept of the <a href="https://en.wikipedia.org/wiki/Eichmann_in_Jerusalem#Banality_of_evil">banality of evil</a>, where a common person does nefarious actions, since they became accepted and normalized in their society.</p>

<p>Actions that we perceive as normal, such as usage of cancer inducing sodium nitrate in foods (which stems for a trade-off between structural economic gain and health), wearing comfortable shoes, reading and sitting, are in fact not normal when seen through the lenses of long term evolution.</p>

<h3 id="comfortable-shoes">Comfortable shoes</h3>

<p>Our feet have adapted for us to efficiently run and walk, but highly cushioned, constraining shoes deform and inhibit our feet from fulfilling their purpose</p>

<ul>
  <li>Habitual barefoot people have much lower incidence of flat foot, which very likely is due to the high usage of the foot arch, which is restrained on comfortable shoes with arch support, which instead overload the plantar fascia, leading to plantar fasciitis</li>
  <li>A constrained toe box restrains how much stability the foot can provide, and an unbalanced foot leads to an unbalanced knee, hip, body.</li>
  <li>I’ve personally transitioned to using barefoot shoes daily and when hiking, and can only recommend them after using them for more than one year.
    <ul>
      <li>One common question is if these are appropriate on hard terrain. Turns out that your foot already has a built in mechanism, which is to forefoot / midfoot strike, instead of heel strike. Try to jump to see how your foot automatically lands using the ball of your foot, and how softly you land, when compared to a (dangerous) similar jump landing on your heel.</li>
      <li>Going barefoot or using minimal shoes, provides you full perception of the terrain and impact, so you’ll adapt towards hitting the ground more softly, and not using heel strikes as much.</li>
    </ul>
  </li>
</ul>

<h3 id="reading">Reading</h3>

<p>Myopia is a formerly rare evolutionary mismatch that is exacerbated by modern environments. In the USA and Europe, about one third of all children (aged 7 to 17) become nearsighted.</p>

<p>Evidence suggests that being nearsighted used to be very rare: that less than three per cent prevalence amongst hunter gatherers and populations that practices subsistence agriculture. In 1813, it was noted that amongst the Queen’s guards, many were myopic. On the hand, from the 10k foot guard, less than half dozen were myopic.</p>

<p>The mechanisms of how myopia are still not fully understood, but two main causes are suggested:</p>

<ul>
  <li>Close work, forcing long bouts of close focus. Singapore <a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC4041336/">study</a> found that students who read more than 2 books per week had strong myopia.</li>
  <li>Children spending <a href="https://bjo.bmj.com/content/104/5/593">more time outdoors</a> have lower incidence of myopia. Brightness of light and visual stimuli appear to have a beneficial effect.</li>
</ul>

<h3 id="sitting">Sitting</h3>

<p>While sitting in different positions to rest after strenuous activity has been around for much of our species, only until recently have we been multiple hours sitting in a chair, day after day, which is a risk factor towards:</p>

<ul>
  <li>Muscle atrophy and shortening: calf muscle shortening also happens for high heels usage</li>
  <li>Lower back pain. To prevent this issue, make sure to maintain a strong back via moderate intensity load, but not too much load, like furniture movers.</li>
</ul>

<h1 id="how-to-solve-these-issues">How to solve these issues</h1>

<p>One solution would be to wait for natural selection to sort out these problems, which is very unlikely due to the high rate of change in our societies and environments, in short time windows. As the commander of the Albigensian Crusade said, on a mission to eliminate heretics: <em><a href="https://en.wikipedia.org/wiki/Caedite_eos._Novit_enim_Dominus_qui_sunt_eius.">“Kill them all; let God sort them out.”</a></em></p>

<p>We are all subject to influence by advertising, availability and peer pressure, but we can be nudged to acquire behaviours that benefit us. Daniel Lieberman suggests:</p>

<ul>
  <li>We should invest in prevention over treatment    </li>
  <li>Although adults have the right to get sick, children need guidance. How different is it to restrict fast foods to them, to restricting which movies they are able to attend? Or availability of alcohol to them?</li>
  <li>Just like nature obliged us to do the right thing and evolved our behaviours, government has the right and duty to have information to do rational decisions and nudge or even push us to do so:
    <ul>
      <li>Question is how much and where and when</li>
      <li>Government shouldn’t prevent you from smoking, but “you are free to do as wish, as long as I don’t have to pay for it”</li>
    </ul>
  </li>
</ul>

<h2 id="culture-does-not-allow-us-to-transcend-biology">Culture does not allow us to transcend biology</h2>

<blockquote>
  <p>Culture is roughly everything we do and monkeys don’t.
<em>― FitzRoy Richard Somerset</em></p>
</blockquote>

<p>Clever as we are, we cannot modify our human bodies any more than superficial ways. And it’s arrogant to think we can engineer body parts any better than nature did. There will be no Pasteur for mismatched diseases.</p>

<p>We should come to terms that:</p>

<ul>
  <li>We are fat, furless, bipedal primates that crave sugar, salt, fat and starch.</li>
  <li>We crave comfort, but our bodies are endurance athlete machines.</li>
  <li>As Voltaire wrote: “Let us cultivate our garden”. <strong>We must cultivate our body.</strong></li>
</ul>

<div class="footnotes">
  <ol>
    <li id="fn:5">
      <p>Compared to other animals with the same body weight, they have a fifth of the brain size, and double the intestine system. Size of the brain correlates with the size of the group. Humans are able to interact with 100 to 200 individuals.<a href="#fnref:5" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:1">
      <p>Choking on food is the fourth leading cause of accidental death in the USA.<a href="#fnref:1" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:2">
      <p>Between 1985 and 2000, the purchasing power of the US dollar decreased by 59 per cent, the price of fruit and vegetables doubled, fish increased by 30 per cent, diary about the same. In contrast, sugars and sweets became 25 per cent less expensive, fats and oils 40 per cent, soda 66 percent less expensive. Portion sizes ballooned: in a fast food restaurant in 1955 order of hamburger and fries would yield 412 cals. Today for the same inflation adjusted size, the same order would have double the calories, 920 cals.<a href="#fnref:2" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:3">
      <p>If you are curious of how the sewers of earlier cities smelled, the <a href="https://musee-egouts.paris.fr/en/">Paris Musée des Égouts</a> provides an <em>illustrative</em> tour through these sights and smells  <a href="#fnref:3" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:4">
      <p>Thomas Crapper did not invent the toilet. But was a pioneer in its mass manufacturing. <a href="https://en.wikipedia.org/wiki/Thomas_Crapper#Origin_of_the_word_%22crap%22">Origin of the word “crapper”</a><a href="#fnref:4" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:6">
      <p>For example, Hepatitis A virus stimulates T helper 1 cells, which suppress the number of T helper 2 cells<a href="#fnref:6" rel="reference">&#8617;</a></p>
    </li>
  </ol>
</div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[2024 Lookback]]></title>
    <link href="https://lopespm.com/notes/2024/12/31/2024-lookback.html"/>
    <updated>2024-12-31T00:00:00+00:00</updated>
    <id>https://lopespm.com/notes/2024/12/31/2024-lookback</id>
    <content type="html"><![CDATA[<p>It’s time to wrap up and celebrate 2024, an eventful year that fueled my yearning for internal growth and curiosity, with challenges and lessons I am grateful for.</p>

<!--more-->

<p>I’ve recently built a set of <a href="https://grafana.com/">Grafana</a> dashboards to track my personal goals, which I’ve been finding incredibly interesting to explore and visualise (something that might be interesting to share in a later post).</p>

<h2 id="final-tally">Final Tally</h2>

<p>There are other metrics I track, but specifically to 2024 content creation, these are the final statistics<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>:</p>

<center>
          <picture aria-label="2024 Stats">
             <source type="image/webp" srcset="/files/2024_lookback/stats.webp" aria-label="2024 Stats" />
             <source type="image/png" srcset="/files/2024_lookback/stats.png" aria-label="2024 Stats" />
             <img src="https://lopespm.com/files/2024_lookback/stats.png" aria-label="2024 Stats" />
           </picture>
         </center>

<p><br /></p>

<ul>
  <li>17 posts on this blog, 16 of them being <a href="https://lopespm.com/notes/">notes</a> (not counting this one), and one of them being a full blog article sharing how to build a <a href="https://lopespm.com/machine_learning/2024/06/24/personal-llm.html">personal local (Llama3 8B) LLM, extended with WhatsApp and Obsidian data</a></li>
  <li>10 YouTube videos on my <a href="https://www.youtube.com/@lopespm">main channel</a>. 8 of them being long form, the other 2 being shorts.</li>
  <li>5 YouTube videos on <a href="https://www.youtube.com/@out-and-about-channel">Out and About</a>, a recently created channel where I share random experiences on activities such as walking / hiking around or driving.</li>
</ul>

<p>Notice that the tracked metrics are on the volume of content produced, not their number of views, subscribers, likes. Although keeping track of topline metrics makes sense for a full fledged business, I chose instead to track what I <em>can</em> control, which is my output. At the end of the day, this is a hobby, a labor of love.</p>

<p>If I can influence someone’s life for the better, that will already fill my heart to the brim. This, added to how important posting these contents has become to consolidate and structure my thoughts, and serendipitous opportunities they randomly opened, make this an incredibly satisfying endeavor.</p>

<p>I’ve experienced time and time again that consistency eventually bears wonderful fruits. Who knows which doors might open one day later? I don’t, but I’m curious to find out.</p>

<h2 id="one-day-away">2025, one day away</h2>

<p>With 2024 wrapped up, let’s welcome 2025. <a href="https://lopespm.com/notes/2023/08/05/real_question_behind_what_you_want.html#an-example">I’ve pinned down next year’s goals</a> and will be looking forward to sharing what I learn along the way. Happy new year, and see you on the other side! 🫡</p>

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p><em>This dashboard was produced using a custom Grafana dashboard, where the RSS feeds for this blog and YouTube channels were tracked, transformed and presented in simple gauge widgets</em><a href="#fnref:1" rel="reference">&#8617;</a></p>
    </li>
  </ol>
</div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Note Taking]]></title>
    <link href="https://lopespm.com/notes/2024/12/30/note-taking.html"/>
    <updated>2024-12-30T00:00:00+00:00</updated>
    <id>https://lopespm.com/notes/2024/12/30/note-taking</id>
    <content type="html"><![CDATA[<center>
          <picture aria-label="Stack of notebooks">
             <source type="image/webp" srcset="/files/note_taking/note_stack.webp" aria-label="Stack of notebooks" />
             <source type="image/png" srcset="/files/note_taking/note_stack.png" aria-label="Stack of notebooks" />
             <img src="https://lopespm.com/files/note_taking/note_stack.png" aria-label="Stack of notebooks" />
           </picture>
         </center>

<p><br /></p>

<p>Over the past 4 years, I&rsquo;ve written about 1820 pages on the 13 A5 notebooks shown in the picture above. This tool has become essential for my job, and in this article I&rsquo;ll describe the simple process behind it, which I&rsquo;ve found to deliver consistent results, reliably.</p>

<!--more-->

<h2 id="write-consolidate-repeat">Write, Consolidate, Repeat</h2>

<p>The process I&rsquo;ve been using for several years is based on <a href="https://lopespm.com/notes/2023/05/18/solving-task-switching-through-documentation.html">Option 3. of Solving Task Switching Through Documentation</a>, and is broken down in three steps:</p>

<p><strong>1. Write</strong></p>

<ul>
  <li><strong>Material</strong>: A5 spiral notebook (it makes it easier to be written anywhere, because the pages can always be flipped around in a way that only the writing page is facing up, and the rest of the pages serving as a solid writing surface; plus the notebook&rsquo;s rings are great for carrying your pen or pencil reliably), with clear pages (this allows for diagrams, phrases, texts, tidbits, collaborations to happen without any formal restriction). Have another backup notebook within reach, to replace the main one when it runs out.</li>
  <li><strong>When</strong>: Make sure to always have your notebook and pen / pencil at your desk, meetings, conferences, 1:1s, and any environment where a collaboration is made, within reason.</li>
  <li><strong>What</strong>: Write down your thoughts, key points that coworkers communicate, ideas, anything else you find relevant. These are your notes, so allow yourself to expand and experiment.</li>
</ul>

<p><strong>2. Consolidate</strong></p>

<p>With several notes written, their consolidation can happen in three different time spans:</p>

<ul>
  <li><strong>Immediately</strong>:
    <ul>
      <li>The mere act of writing often helps the thought process, since it forces ethereal concepts to be materialized into paper. Expect that a good portion of the written notes to not be read ever again.</li>
    </ul>
  </li>
  <li><strong>Shortly after they are written</strong>:
    <ul>
      <li>Keeping track of conversations: has it ever happened to you that suddenly you completely lost track of the discussion, especially a complex / ambiguous one? Refer back to the jotted down key points to quickly recall and connect points. Soon after you will be back on track, and maybe with new insights.</li>
      <li>Summarization of conversation segments, usually at the end of a meeting: leverage the written notes to summarize key takeaways and action points. There is nothing worse than spending 30 minutes in a discussion without material end results or follow ups.</li>
    </ul>
  </li>
  <li><strong>Some time after notes are written</strong>: I avoid this period to be longer than one day.
    <ul>
      <li>Transcribe key points into a structured medium, such as a document, article, or personal log (I use a simple text file where I log important events during the day; this text file has been consistently updated for 4 years, and is a personal historical treasure trove spanning several thousands of lines).</li>
    </ul>
  </li>
</ul>

<p><strong>3. Repeat</strong></p>

<p>Just like other processes, their value only becomes apparent after they have been used several times. Build a habit. It will then become immediately apparent whenever a notebook is not at hand, or when structured notes are not written down.</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Diary of a CEO Book: Lessons]]></title>
    <link href="https://lopespm.com/notes/2024/12/28/diary-of-ceo-book-lessons.html"/>
    <updated>2024-12-28T00:00:00+00:00</updated>
    <id>https://lopespm.com/notes/2024/12/28/diary-of-ceo-book-lessons</id>
    <content type="html"><![CDATA[<p>I’ve recently finished reading <a href="https://www.amazon.com/Diary-CEO-Laws-Business-Life/dp/0593715837">Diary of a CEO: 33 Laws of Business and Life</a>, which draws from both Steven Bartlett’s entrepreneurial journey and interviews from the <a href="https://www.youtube.com/@TheDiaryOfACEO">homonymous podcast</a>. These are are my main takeaways:</p>

<!--more-->

<h2 id="building-high-performance-groups">Building high performance groups</h2>

<h3 id="incentives-and-culture">Incentives and culture</h3>
<ul>
  <li>If you want to predict what a group of people will do over the long term, you need to look at their incentives, not their instructions.</li>
  <li>Companies don’t have one company culture: every manager in an organization creates a subculture underneath them.</li>
  <li>In a small group / startup, when the culture is strong, new joiners become like the culture. When the culture is weak, the culture becomes like the new joiners.</li>
  <li>In a small group / startup (and likely this can be applied to teams), create a cult-like dynamic upon its inception, but then transition it to a more sustainable structure. Key elements of a cult:
    <ul>
      <li>Provides meaning, purpose and belonging. Asserts superiority of the group.</li>
      <li>Clear shared identity and commitment to ideology.</li>
      <li>Leaders present themselves as infallible, confident and grandiose.</li>
      <li>“Us vs Them” mentality: there is a clear adversary.</li>
    </ul>
  </li>
</ul>

<h3 id="traits-of-a-good-leader">Traits of a good leader</h3>
<ul>
  <li>The factor that kills meaning the fastest is a leadership team that dismisses employee’s work or ideas, removes their sense of ownership and autonomy, and asks them to spend time on work that is cancelled, changed or disregarded before it’s been completed.</li>
  <li>Allow people the space to fail and succeed. The main job of a leader is to be a supportive enabler, not a critical micromanager.</li>
  <li>Leaders should proactively remove any obstacles, bureaucracy and sign-off processes that prevent the team to achieve daily progress, this includes identifying and providing the required resources for them to do their job. To discover these gaps, ask the teams informally or formally about these problems (via retros for example).</li>
  <li>Leaders need to point out, publicize and praise progress as loud, far and wide as they possibly can. Recognition reinforces behaviour, but it also acts as evidence to adjacent teams that progress is possible for them too.</li>
  <li><a href="https://en.wikipedia.org/wiki/Alex_Ferguson">Alex Ferguson</a>, the widely successful manager from Manchester United, didn’t care about tactics, strategies and formations. He cared about getting the best out of each individual, the team’s culture and attitude. He didn’t want them to be become complacent:
    <ul>
      <li>He had different ways of dealing with different players. He knew how to get the best out of everyone. He knew his players well, and what made them tick, like Gary Neville’s important connection with his grandparents.</li>
      <li>Some players strived under Ferguson’s “hairdryer” treatment, others under a more compassionate approach, and others by being more hands off. There was not a size fits all approach. The main objective was always to have the team and club at a higher ground.</li>
      <li>It is impossible to seamlessly blend into a team as a jigsaw piece, unless you comprehend the unique shape of each of your team members.</li>
    </ul>
  </li>
</ul>

<h3 id="ask-who-not-how">Ask who, not how</h3>
<ul>
  <li>Every CEO and founder will be judged on their ability to hire the best, and bind them into a culture that gets the best out of them. An environment where they become more than the sum of the parts.</li>
  <li>Your ego will insist that you do. Your potential will insist that you delegate.</li>
</ul>

<h3 id="excise-bad-apples-promote-bar-raisers">Excise bad apples, promote bar raisers</h3>
<ul>
  <li><em>“The cost of one bad apple can be the loss of many good ones”</em> - CEO of General Electric
    <ul>
      <li><a href="https://hbr.org/2018/03/research-how-one-bad-employee-can-corrupt-a-whole-team">Study</a> found that employees were 37% more likely to commit misconduct at work when they encountered a new co-worker who had a history of misconduct themselves. Toxic employees really are contagious.</li>
      <li>When a bad apple isn’t fired, it can lead to employee disengagement, other employees copying the behaviour, social withdrawal, anxiety and fear. Culminating in the deterioration of trust in the team and further disengagement from its team members.</li>
    </ul>
  </li>
  <li><a href="https://www.rismedia.com/2024/02/01/thoughts-leadership-building-winning-team-with-3-bars-framework/">3 bars framework</a>
    <ul>
      <li>Ask yourself, or managers: “if everyone in the organization had the same cultural values, attitude, and level of talent as this employee, would the average bar be lowered, maintained, or raised?</li>
      <li>Fire the ones that lower the bar, promote the bar raisers.</li>
    </ul>
  </li>
  <li><a href="https://www.youtube.com/watch?v=wTgQ2PBiz-g">“(…) not settling for B and C players, but really going for the A players”</a>. <a href="https://www.goodreads.com/quotes/8586131-it-doesn-t-make-sense-to-hire-smart-people-and-then">“It doesn’t make sense to hire smart people and tell them what to do; we hire smart people so they can tell us what to do”</a> - Steve Jobs</li>
</ul>

<h2 id="dealing-with-discomfort">Dealing with discomfort</h2>
<ul>
  <li>“Hard” is the price we pay today for an “easy” tomorrow.</li>
  <li>When you refuse to accept an uncomfortable truth, you’re choosing to accept an uncomfortable future.</li>
  <li>When something is unresolved because we’ve chosen to bury our heads in the sand, it doesn’t sit dormant, waiting to be addressed; it becomes toxic, contagious and poisonous to those around us, inflicting more collateral damage with every day that it remains unaddressed.</li>
  <li>When seeking the truth that is causing the discomfort, listen to understand, not to look for a victory, but rather in the perspective of a partner that wants to overcome that difficulty.</li>
  <li>In a relationship, if you’re having the same conversation over and over again, you are having the wrong conversations. You’re avoiding the uncomfortable conversation you should be having.</li>
  <li>It is in talking about our disconnections that people create more connectedness with one another.</li>
  <li>You can predict someone’s success in any area of their life by observing how willing and capable they are at dealing with uncomfortable conversations. Your personal progression is trapped behind an uncomfortable conversation.</li>
  <li>As mentioned by <a href="https://en.wikipedia.org/wiki/Defence_mechanism#Vaillant's_categorization">George Vaillant</a>, denial can be healthy, enabling individuals to cope with rather than become immobilized by anxiety, or it can be unhelpful, creating a self deception that alters reality in ways that can be dangerous.</li>
  <li><a href="(https://www.goodreads.com/quotes/10225430-even-when-we-think-we-re-seeking-pleasure-we-re-actually-driven)"><em>“People think they’re motivated by seeking pleasure; they’re wrong, they’re motivated by avoiding discomfort”</em></a> - Nir Eyal</li>
</ul>

<h2 id="pressure-only-comes-to-those-who-earn-it">Pressure only comes to those who earn it</h2>
<ul>
  <li><a href="https://www.usopen.org/en_US/news/articles/2024-07-19/billie_jean_king_reveals_origin_of_iconic_quote_pressure_is_a_privilege.html"><em>“Pressure is a privilege, and champions adjust”</em></a> - Billy Jean King (BJK)</li>
  <li>Pressure is external, stress is internal.</li>
  <li>How you handle pressure and its resulting stress is essential, and makes a difference between positive and negative outcomes.</li>
  <li>Great pressure moments often precede great privileges.</li>
  <li>Life without pressure is a life without purpose.</li>
  <li>Pressure is neither good nor bad. It’s what we do with it that matters.</li>
  <li><a href="https://www.businessinsider.com/kelly-mcgonigals-ted-talk-on-stress-2014-3#in-the-first-study-mcgonigal-looked-at-university-of-wisconsin-researchers-tracked-30000-american-adults-for-eight-years-they-found-that-subjects-with-a-lot-of-stress-had-a-43-increased-risk-of-dying--but-only-if-they-believed-stress-was-harmful-1">Kelly McGonigal</a> looked at a study made for 30k American adults, and noticed that people who experienced a lot of stress during their lives had 43% increased risk of dying, but this was only true for the ones who perceived stress as harmful. The ones that did not perceive it as harmful had the lowest risk of dying, even when compared to the ones who experienced relatively little stress.</li>
  <li>Objective is not to get rid of pressure, it’s to change your relationship with it altogether.</li>
  <li><a href="https://www.goodreads.com/quotes/7-it-is-not-the-critic-who-counts-not-the-man"><em>“It is not the critic who counts; not the man who points out how the strong man stumbles, or where the doer of deeds could have done them better. The credit belongs to the man who is actually in the arena, whose face is marred by dust and sweat and blood; who strives valiantly; who errs, who comes short again and again, because there is no effort without error and shortcoming; but who does actually strive to do the deeds; who knows great enthusiasms, the great devotions; who spends himself in a worthy cause; who at the best knows in the end the triumph of high achievement, and who at the worst, if he fails, at least fails while daring greatly, so that his place shall never be with those cold and timid souls who neither know victory nor defeat”</em></a> - Theodore Roosevelt</li>
</ul>

<h2 id="building-good-habits">Building good habits</h2>
<ul>
  <li>Instead of fighting against a bad habit, acknowledge the cue, routine, reward habit loop. When removing any of these elements, its void will need to be replaced. Replace rather than delete.</li>
  <li>Cues are powerful, since they are the starting points to routines. As such, be mindful of how you set up your environment. For example, Steven Bartlett placed his DJ set in the kitchen table, in plain sight, and made sure to take only one click to start practicing, in order to reduce perceived cost of practicing it. I’ve personally done the same thing with my camera setup to shoot <a href="https://www.youtube.com/@lopespm">YouTube videos</a>, by using a simple and predictable set up for video and microphone, which I have with highly visible in my living room, incentivizing me to do more videos.</li>
</ul>

<h2 id="persistence">Persistence</h2>
<ul>
  <li><a href="https://www.goodreads.com/quotes/10644791-we-don-t-have-to-be-smarter-than-the-rest-we"><em>“We don’t have to be smarter than the rest. We have to be more disciplined than the rest.”</em></a> - Warren Buffett</li>
  <li>Katherine Milkman shared <a href="https://www.wsj.com/articles/plan-a-works-better-when-theres-no-plan-b-1471356000">research</a> that having a plan B, in any ambition, has a net negative on our chances of succeeding with a plan A.
    <ul>
      <li>The more you perceive negative emotions in the event of failure, the more driven you will be to succeed-</li>
      <li>But don’t be reckless. Take risks that don’t put you in irreversible and dangerous circumstances.</li>
    </ul>
  </li>
  <li><a href="https://courses.lumenlearning.com/suny-jeffersoncc-introliterature/chapter/680/"><em>“If there be no alternative but death, the soldiers exert themselves to the utmost.”</em></a> - Sun Tzu, The Art of War</li>
</ul>

<h3 id="incremental-wins-keeping-momentum">Incremental wins, keeping momentum</h3>
<ul>
  <li>How much you are achieving is pretty much irrelevant to your motivation: but if you feel like you are getting somewhere, you’ll be driven to keep going.
    <ul>
      <li>When problems seem insurmountable or too hard or unknown, that’s when procrastination creeps in.</li>
      <li>The key here is to break down the problem into smaller, more manageable ones. The small resulting improvements and the sense of momentum will keep you going, and these will eventually compound.</li>
    </ul>
  </li>
</ul>

<h2 id="applying-time-and-energy-effectively">Applying time and energy effectively</h2>
<ul>
  <li>The exact same skill applied in a different industry or context can have a widely different value, as seen by a <a href="https://www.washingtonpost.com/lifestyle/magazine/pearls-before-breakfast-can-one-of-the-nations-great-musicians-cut-through-the-fog-of-a-dc-rush-hour-lets-find-out/2014/09/23/8a6d46da-4331-11e4-b47c-f5889e061e5f_story.html">Washington Post experiment</a> where one of the world’s greatest violinists Joshua Bell, who was able to professionaly command $1,000 a minute, barely got any attention or spare change from playing in the subway.</li>
  <li>Position yourself correctly, and get the skills that your industry finds to be rare and valuable, and that your competitors don’t have.</li>
</ul>

<h3 id="time">Time</h3>
<ul>
  <li>Time betting exercise
    <ul>
      <li>Imagine you, and everyone is sitting around the game of life. Each player is assigned a number of chips, each representing an hour. They don’t know how many they have. Maybe it’s one, maybe it’s 500k. You can try to predict, but you don’t really know.</li>
      <li>The rule is that every hour you need to put one chip on the table, or it will just be placed automatically. You can place it on Netflix, learning a new skill, sleeping, etc. Certain actions that increase your health will increase your stock of chips.</li>
      <li>Your fitness will block you from betting on certain positions. For example, if you have a serious locomotion injury, you cannot choose to run.</li>
      <li>The game ends when all chips are gone. You don’t get to keep anything you earned during the game.</li>
    </ul>
  </li>
  <li>Being selective about how you spend your time, and who you spend your time with, is the greatest sign of self respect.</li>
</ul>

<h2 id="failure-as-an-advantage">Failure as an advantage</h2>
<ul>
  <li>Ask the questions: Why will this fail? Why is this a bad idea?</li>
  <li>Apply the pre-mortem process to visualize and attempt to preempt failures in your plan. This will mitigate risk and likely increase your prediction accuracy.
    <ul>
      <li>A <a href="https://hbr.org/2007/09/performing-a-project-premortem">1989 study</a> found that prospective hindsight—imagining that an event has already occurred—increases the ability to correctly identify reasons for future outcomes by 30%.</li>
      <li>Steven Bartlett’s pre-mortem method:
        <ul>
          <li>Set the stage: the objective of the exercises. It is to uncover risks, not to look for escape goats.</li>
          <li>Fast forward to failure. Ask team to visualize failure as clearly as possible.</li>
          <li>Brainstorm reasons for failure.</li>
          <li>Ideate independently, and then share and discuss.</li>
          <li>Develop contingency plans.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Share experiment failures, so that their knowledge can be leveraged when building new experiments.</li>
  <li><a href="https://www.oxfordreference.com/display/10.1093/acref/9780191826719.001.0001/q-oro-ed4-00003960"><em>“I have not failed, I have just found 10k ways that won’t work”</em></a> - Thomas Edison</li>
</ul>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Feeling seen]]></title>
    <link href="https://lopespm.com/notes/2024/12/21/feeling-seen.html"/>
    <updated>2024-12-21T00:00:00+00:00</updated>
    <id>https://lopespm.com/notes/2024/12/21/feeling-seen</id>
    <content type="html"><![CDATA[<center>
          <picture aria-label="Being seen ad">
             <source type="image/webp" srcset="/files/feeling_seen/p1.webp" aria-label="Being seen ad" />
             <source type="image/png" srcset="/files/feeling_seen/p1.png" aria-label="Being seen ad" />
             <img src="https://lopespm.com/files/feeling_seen/p1.png" aria-label="Being seen ad" />
           </picture>
         </center>

<p><br /></p>

<p>This ad struck me as the culmination of a long-standing trend. I struggled to articulate it at the time, but I’ll attempt to do just that in this article.</p>

<p>Let’s start by the ad itself. It carries implicit symbols and memes, whose interpretations will vary wildly from person to person, but in general I believe it attempts to convey these subtle messages:</p>

<ol>
  <li>In order to be seen and acknowledged as an individual, one must spark admiration and rise above the crowd with a stylish look, makeup and fashionable garments. Appearance <em>is</em> the solution.</li>
  <li>Feeling seen is about exterior validation (which requires the advertised beauty products), rather than real understanding and connection with another being.</li>
  <li>You need to command the attention of acquaintances and strangers, their judgement is important for your self worth.<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup></li>
</ol>

<!--more-->

<p>Relying only on external validation, specially from foreign entities, as a means to sustain one’s self-esteem is a time honored strategy to produce nefarious results. Yet, it’s celebrated by certain influencers, mainstream media, TV shows, ads and movies that attempt to distort a small sample into a normality.</p>

<center>
          <picture aria-label="Lasting more than your last relationship ad">
             <source type="image/webp" srcset="/files/feeling_seen/p5.webp" aria-label="Lasting more than your last relationship ad" />
             <source type="image/png" srcset="/files/feeling_seen/p5.png" aria-label="Lasting more than your last relationship ad" />
             <img src="https://lopespm.com/files/feeling_seen/p5.png" aria-label="Lasting more than your last relationship ad" />
           </picture>
         </center>

<p><br /></p>

<h1 id="demanding-standards">Demanding Standards</h1>

<p>When external validation is postulated as a basic human need, and one’s default natural, vanilla body is not sufficient to garner the validation one needs (as the above ad suggests), it soon follows that external interventions are required to achieve it.</p>

<p>I was fortunate enough to grow in an environment where artificial external displays of vanity were seen as a quirk, and sometimes even frowned upon (depending on the situation), thus not a requirement for a happy and fulfilled life. But once one is born or dislodged into the eye of a hurricane, it is hard to see the surrounding damage, especially when peers abide by those standards, generating an underlying group integration peer pressure.</p>

<h2 id="hazardous-trends">Hazardous trends</h2>

<p>Several off-the-shelf beauty products are known for their <a href="https://www.youtube.com/watch?v=rObAX1r8r0s">toxicity</a>, contributing to increased prevalence of cancer and infertility, yet they stand as one of the cornerstones of modern standards of beauty.</p>

<p>How we show up is important, and is a meaningful way of self expression, but when the baseline for allowing one’s self expression requires one to consume / apply several products (sometimes on the go), or even subject to invasive body modifications, then I would argue that something is wrong in the underlying societal system.</p>

<center>
          <picture aria-label="Makeup in the tube ad">
             <source type="image/webp" srcset="/files/feeling_seen/p3.webp" aria-label="Makeup in the tube ad" />
             <source type="image/png" srcset="/files/feeling_seen/p3.png" aria-label="Makeup in the tube ad" />
             <img src="https://lopespm.com/files/feeling_seen/p3.png" aria-label="Makeup in the tube ad" />
           </picture>
         </center>

<p><br /></p>

<h3 id="mind-the-ouch">Mind the ouch</h3>

<p>One such body modification, turned mainstream, is the injection of botox.</p>

<p>Botulism is an often-fatal nervous system disease, first recorded in Europe in 1793, claiming the death of over half of those patients who had become ill through eating uncooked blood sausages. <em>botulus</em> being the Latin word for sausage. One one-millionth of a gram this neurotoxic protein can kill a man, and one pint would be enough to kill everyone on earth.</p>

<p>In 1989, purified botulinum toxin was approved as a drug under the brand name Oculinum, and later renamed to <em>Botox</em>. In small doses, the same nerve damage that causes fatal paralysis in poisoning cases, helps to remove forehead creases and crow’s feet, with the only side effects being an inability to express emotion using your face, and an occasional case of drooping eyelids.</p>

<p>Today, injecting the deadliest substance on earth into one’s face is normalized, as seen in this <a href="https://www.youtube.com/watch?v=uSjIfBNwvYw">TV commercial</a> (where its mid-commercial disclaimers makes one question if it’s a real ad, or a parody<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>), or as seen in this suggestive London tube ad:</p>

<center>
          <picture aria-label="Mind the ouch ad">
             <source type="image/webp" srcset="/files/feeling_seen/p2.webp" aria-label="Mind the ouch ad" />
             <source type="image/png" srcset="/files/feeling_seen/p2.png" aria-label="Mind the ouch ad" />
             <img src="https://lopespm.com/files/feeling_seen/p2.png" aria-label="Mind the ouch ad" />
           </picture>
         </center>

<p><br /></p>

<h1 id="look-within">Look Within</h1>

<p>I hold nothing against those who choose to subscribe to a certain mode of expression or style. I too, have my own. I do welcome you to introspect <em>why</em> you chose it. If your sincere <em>why</em> comes from a deep rooted desire to feel accepted and valued by others (good to receive these in healthy dosages, but dangerous when overbearing), then it might be something to look out for.</p>

<p>Relying <em>solely</em> on external validation likely results in feelings of emptiness and insatisfaction. I’ve been there several times, and its not pleasant. Instead, attempt to obtain self validation by looking in, rather than out. <a href="](https://www.youtube.com/watch?v=LzHmifZo5Jk)">Some simple, yet powerful strategies</a>:</p>

<ol>
  <li>Consider your ancestors, a stable past. For example, what would your ancestors eat, do, that worked out for their health? Our bodies have adapted throughout milenia to certain patterns, and if we are on their descendancy line, surely they did <em>something</em> right. Time is the great filter of nonsense and fallacies.</li>
  <li>Recognize the cycle: ask yourself why you are seeking external validation, and understand the patterns and needs that lead to it.</li>
  <li>Practice self-appreciation: build your self-acceptance structure, practice gratefulness and appreciation for what you are and did (a journal might help).</li>
  <li>Rejection therapy: put yourself in situations you seek rejection. Start small, such as asking for a discount or applying for a job you think you are not qualified for. It helps you realise that rejection is not as bad as it appears, which decreases the need for other’s validations.</li>
  <li><a href="https://lopespm.com/notes/2023/08/05/real_question_behind_what_you_want.html#an-example">Set personal goals</a>: instead of relying on others to measure against, take control, and set goals that serve your needs and desires. Keep yourself accountable to hit them.</li>
  <li>Listen to your intuition: you know yourself best, so why rely on others for answers? Reach within and take distraction free time to listen to yourself.</li>
  <li>Self care to self validate: do activities that make you feel good, use self affirming thoughts, take care of yourself.</li>
</ol>

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p><em>Why: friends, family and close connections likely already acknowledge you by who you really are, or at least should. Why would they need you to wear a beauty product in order for you to feel seen? Therefore the remaining target audience are acquaintances and strangers</em><a href="#fnref:1" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:2">
      <p>Transcript from the TV commercial: <em>(…) FDA approved to temporarily make frown lines crow’s feet and forehead lines look better. The effects of Botox Cosmetic may spread hours to weeks after injection causing serious symptoms alert your doctor right away as difficulty swallowing, speaking, breathing, eye problems, or muscle weakness may be a sign of a life-threatening condition. Do not receive Botox Cosmetic if you have a skin infection. Side effects may include allergic reactions, injection site pain, headache, eyebrow, eyelid drooping and eyelid swelling. Tell your doctor about your medical history muscle or nerve conditions and medications including botulinum toxins, as these may increase the risk of serious side effects. So get that “just saw a puppy look”! (…)</em><a href="#fnref:2" rel="reference">&#8617;</a></p>
    </li>
  </ol>
</div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[48 Laws of Power: Lessons]]></title>
    <link href="https://lopespm.com/notes/2024/12/08/48-laws-of-power-lessons.html"/>
    <updated>2024-12-08T00:00:00+00:00</updated>
    <id>https://lopespm.com/notes/2024/12/08/48-laws-of-power-lessons</id>
    <content type="html"><![CDATA[<p>I’ve recently finished Robert Greene’s <a href="https://www.amazon.co.uk/Laws-Power-Robert-Greene-Collection/dp/1861972784">48 Laws of Power</a>, a controversial, yet useful book. The information it shares makes one better prepared to navigate our complex and perilous world of influences, power and subtle manipulations.</p>

<p>I found it to be an eye-opener on some fronts, but mostly as providing different perspectives on things that on the surface, appear obvious. </p>

<p>I can recommend this book to just about anyone. Its information, just like a knife, can be used for useful, enriching and productive endeavours (like cutting vegetables for a family dinner), or for nefarious activities (such as inflicting harm upon others). It’s ones responsibility to use it correctly and morally.</p>

<p>Below are my key takeways, segmented by <strong>Behaviour</strong>, <strong>Resources</strong>, <strong>Relationships</strong>, <strong>Strategies</strong> and <strong>How you Show Up</strong>.</p>

<!--more-->

<h1 id="behaviour">Behaviour</h1>

<h2 id="attitude-and-behaviour">Attitude and Behaviour</h2>
<ul>
  <li>Be royal in your demeanor. How you present and carry yourself tells the people how they should treat you. As seen in Columbus, son of a cheese maker, who behaved like royalty, as someone who deserved to be treated well. He amazed the Portuguese king, and eventually got the Spanish royalty to get him what he wanted: a fully paid expedition, except for a lifetime 10% profit shares for him and his descendants. They felt like he was one of them. Even though he knew less about navigation than any of his sailors and was a bad leader, he still got what he wanted, because of how he carried himself.</li>
  <li>Beware of venerating a new seductive culture that is not your original one. Don’t despise and look down upon the culture that raised you and provided you gifts, for it will grow resentment of the ones that follow it.</li>
  <li>Boldness over timidity. Both are acquired behaviours. Timidity gives others time to think and plan. Makes even the tamest prone to attack when they sense blood in the water.</li>
  <li>Only the weak rest on their laurels and dote on past triumphs.</li>
</ul>

<h2 id="in-victory-dont-go-past-your-mark">In victory, don’t go past your mark</h2>
<ul>
  <li>Success is intoxicating and dangerous. The moment of victory is the moment of greatest peril. Do not allow success to come to your head. Set a goal, and when you reach it, stop.
    <ul>
      <li>Know when to stop and consolidate wins, instead of persisting in pushing forward.</li>
      <li>When success is attained, step back, and reflect upon the conditions that led to it. Don’t simply repeat the same actions again and again.</li>
      <li>History is littered with corpses and fallen empires who did not know when to stop.</li>
      <li>There is a Japanese saying that Furuya Sensei was fond of, “Katte kara kabuto no o wo shime yo” which means After victory, tighten your helmet. Never let your guard down even if you think you have won. That just might be what your opponent wants you to think.</li>
      <li>The moment when you stop has great dramatic importance. What comes last sticks in the mind as an exclamation point. Best time to stop is after a victory. Keep going, and it will lessen it’s effect, or even reverse it.</li>
      <li><em>“Nothing can be more important than to close your examination with a triumph. So many lawyers succeed in catching a witness in a serious contradiction; but, not satisfied with this, go on asking questions, and taper off their examination until the effect upon the jury of their former advantage is lost altogether. “Stop with a victory” is one of the maxims of cross-examination”</em> - <a href="https://www.gutenberg.org/files/40781/40781-h/40781-h.htm">Francis L. Wellman, The Art of Cross Examination</a></li>
    </ul>
  </li>
  <li>Bad luck teaches you patience, timing and the need to be prepared for the worst. Good luck deludes you into making you think your brilliance will carry you forward. And when inevitably misfortune comes you will lack adequate preparation.</li>
  <li>As it’s taught in riding school: you have to be able to control yourself, before your can control the horse.
    <ul>
      <li>And even when you can control yourself, there will be people forcing you to push forward. Be careful, and manage them. Feed them with small victories, but don’t allow yourself to be engulfed in the momentum and go all in.</li>
    </ul>
  </li>
  <li><em>“A man famed for his tree-climbing skills once directed another to climb a tall tree and cut branches. While the fellow was precariously balanced aloft, the tree-climber watched without a word, but when he was descending and had reached the height of the eaves the expert called to him, ‘Careful how you go ! Take care coming down !’. ‘Why do you say that ? He’s so far down now that he could leap to the ground from there,’ I said. ‘Just so,’ replied the tree-climber. ‘While he’s up there among the treacherous branches I need not say a word – his fear is enough to guide him. It’s in the easy places that mistakes will always occur.’ Lowly commoner though he was, his words echoed the warnings of the sages.”</em> - Yoshida Kenkō, Essays in Idleness</li>
</ul>

<h2 id="dont-appear-too-perfect-dont-boast">Don’t appear too perfect. Don’t boast.</h2>
<ul>
  <li>By making others aware of their inferior position, you are only stirring an unhappy admiration, this is, envy.
    <ul>
      <li>To show envy, is to admit your inferiority, and that is why people don’t normally admit it.</li>
      <li><em>“Of all the disorders in the soul, envy is the only one no one confesses to.”</em> -  Plutarch</li>
      <li>Cosimo de’ Medici avoided such issues by being simple on the outside, and only showing his wealth, elegance and opulence on the inside (of his house, for example).
        <ul>
          <li><em>“There is in the garden a plant which one ought to leave dry, although most people water it. It is the weed called Envy.”</em> - Cosimo de’ Medici</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Kierkegaard believed that the creator of envy is as much to blame as the person who feels envy. Don’t crow about your victories and superiority.
    <ul>
      <li>The naturally perfect are the ones that need to work the most to hide their features. One does not require innate characteristics to aquire money and power, in contrast to bearing sharp natural intellect and bodily features considered to be beautiful.</li>
    </ul>
  </li>
  <li>A sudden increase in power or promotion are dangerous. Downplay them, don’t flaunt them, and attribute them to luck, since luck is possible to all.</li>
  <li>Be careful of false modesties that can be seen through. Put on a good act. Otherwise it will only create more envy.</li>
  <li>People cannot envy power that they themselves have bestowed upon a person.
    <ul>
      <li>When Ivan the Terrible died, Boris Godunov knew he was the only one on the scene who could lead Russia. But if he sought the position eagerly, he would stir up envy and suspicion among the boyars, so he refused the crown, not once but several times. He made it point for people insist that he take the throne. George Washington used the same strategy to great effect, first in refusing to keep the position of Commander in Chief of the American army, second in resisting the presidency. In both cases he made himself more popular than ever.</li>
    </ul>
  </li>
  <li>If needed, pay a high price to keep envy in check.</li>
  <li><em>“Envy is the tax which all distinction must pay”</em> - Thoreau</li>
  <li><em>“It takes a great talent and skill to conceal one’s talent and skill”</em> - La Rochefoucauld</li>
</ul>

<h2 id="rationality-and-control">Rationality and Control</h2>
<ul>
  <li>In the face of a hot headed enemy, an excellent response is no response.</li>
  <li>Nothing is as infuriating as a man who keeps his cool, when others are losing theirs.</li>
  <li>Petulance is not power, it is a sign of helplessness.</li>
  <li>Only use raging tirades if you are in control of them, with precision, and very rarely. They are a (dangerous) tool.</li>
  <li><em>“Wise men [should be] like coffers with double bottoms: which when others look into, when opened, they see not all that they hold.”</em> - Sir Walter Raleigh</li>
</ul>

<h2 id="use-your-words-and-actions-wisely">Use your words and actions wisely</h2>
<ul>
  <li>Once your words are out, you cannot take them back. Keep them under control and be particularly careful about sarcasm. The momentary satisfaction you get from your biting words will be <a href="https://medium.com/@praisenicholas/the-art-of-shutting-up-9bc7d08799a2">outweigh by the price you pay</a></li>
  <li><em>“Oysters open completely when the moon is full; and when the crab sees one it throws a piece of stone or seaweed into it and the oyster cannot close again so that it serves the crab for meat. Such is the fate of him who opens his mouth too much and thereby puts himself at the mercy of the listener.”</em> - Leonardo Da Vinci</li>
  <li><em>“If you are not in danger, do not fight”</em> - Sun Tzu</li>
</ul>

<h2 id="be-strategic-in-your-approach">Be strategic in your approach</h2>
<ul>
  <li>When in a position of power, don’t be completely predictable, as that could be exploited. when is a position of serving others, be careful when doing that, because it might make you be seen as unreliable, or even having a psychological pathology.</li>
  <li>Attach yourself to the real decision maker, not people with titles. As seen for Richelieu, who attached himself to King Louis XIII’s mother, instead of the king himself, since she was the one calling the shots. As a result, Richelieu rose quickly through the ranks.</li>
  <li>Winston Lord had worked on a report for days, which Kissinger handed back with the notation “Is this the best you can do?”. Lord rewrote and polished and finally resubmitted it; back it came with the same curt question. After redrafting it one more time–and once again getting the same question from Kissinger–Lord snapped, “Damn it, yes, it’s the best I can do.”. To which Kissinger replied: “Fine, then I guess I’ll read it this time.”</li>
  <li><a href="https://en.wikipedia.org/wiki/The_North_Wind_and_the_Sun">North wind and the Sun</a> made a bet on who could make a man take off his coat. First, the North wind gushed one him, but that only made the man hold on to it more tightly. Then, the Sun provided a warm heat that made the man take off top coat, and then blazing heat which made the man strip and bath in the river. Persuasion is more effective than force.</li>
  <li><em>“MAN: Kick him-he’ll forgive you. Flatter him-he may or may not see through you. But ignore him and he’ll hate you”</em> - Idries Shah</li>
</ul>

<h1 id="resources">Resources</h1>

<h3 id="focus-your-energies">Focus your energies</h3>
<ul>
  <li>What’s concentrated, coherent, and connected to it’s past, has power.</li>
  <li>Concentrate your forces: Intensity beats extensity every time. You gain more by finding a rich mine and digging it deeper, than by fleeting from one shallow mine to another</li>
  <li>Dispersion can be a good strategy when your opponents are stronger.</li>
  <li>Caveat: if the sole person providing you power dies or leaves the scene, you will be in trouble. Protect yourself against that risk by having different concentrated sources of power. As seen with Cesare Borgia’s transgression of this, who derived his power mainly from his father, the Pope, who gave him armies to fight with. When his father died, he was as good as dead.</li>
  <li>Do not spend time, attention or energy on things you cannot have. Your attention, or lack of, is a form of power. When King Louis wanted to punish someone on their court, he would just ignore them and cut them off.</li>
  <li><a href="https://isaacjeffries.com/blog/2020/6/25/the-goose-and-the-horse">“I had far rather be confined to one element, and be admired in that, than be a Goose in all.”</a></li>
</ul>

<h2 id="focus-on-the-important-things">Focus on the important things</h2>
<ul>
  <li>Paranoia over small ticket issues are often destructive in the end. As seen when Kissinger made a recommendation to create a group to “plug the leaks” after the publication of the Pentagon Papers. The <a href="https://en.wikipedia.org/wiki/White_House_Plumbers">Plumbers</a>, as they became known, eventually broke into the Democratic Party offices in the Watergate Hotel, setting off the chain of events that led to Nixon’s downfall.</li>
  <li>When you make a mistake, treat it lightly. When a petty enemy attacks you, make none of it, show contempt. Show contempt publicly, but keep track of it privately. Don’t let a small problem or foe become a cancerous cell that gains power and overtakes you. Deal with them as appropriate.</li>
  <li><em>“To disregard, is to win regard”</em> - Italian proverb</li>
</ul>

<h2 id="the-value-of-time">The value of Time</h2>
<ul>
  <li>Time is a human construct. Perception of time is subjective. Younger people feel like time is going slowly. Older people feel like time is whizzing by.</li>
  <li>Three types of time: Long, Forcing, and End Time:
    <ul>
      <li>Long Time: happening on a years time scale, and must be managed with patience and gentle guidance. Key is to not react impulsively, and wait for the right opportunity.</li>
      <li>Forcing Time: when people are indecisive, give them a deadline. Never give them time. As seen with successful art dealer Joseph Duveen, who when dealing with indecisive clients, would mention that another tycoon would be interested, something happened and he had to leave the country, etc. This strategy works as long as the party does not know what you are up to.</li>
      <li>End Time: when a plan must be executed with speed and force.</li>
    </ul>
  </li>
  <li>Patience is worthless if it doesn’t conclude with action. A period of waiting that does not lead into an action is a sign of indecision and procrastination. Timing is important.</li>
  <li><em>“Space we can recover. Time, never”</em> - Napoleon Bonaparte</li>
</ul>

<h2 id="despise-the-free-lunch">Despise the free lunch</h2>
<ul>
  <li>Nothing is more costly than something given free of charge.</li>
  <li>What is worth, is worth paying for. Always pay the full price, there is no cutting corners to excellency, for bargains are often accompanied by a complicated psychological price tag.</li>
  <li>Generosity is a sign, and a magnet for power. Keep money in constant circulation.</li>
  <li>The powerful understand they need to protect their most precious resources. Indepence, time, energy and room to maneuver. By paying the full price they keep themselves free of dangerous engagements and worries.</li>
  <li>Avoid bargain demons (who only consider the explicit price tag, and not the cost in time, energy, dignity and peace of mind), the money sadists (who abuse their payer position power, by for example making you wait for a payment), the indiscriminate givers (who likely are looking qualm a emotional need, are emotional drains, and want to be loved; if they give to everyone, why should you feel special?)</li>
  <li>The powerful must have have grandiosity if spirit, and should never reveal any pettiness. Money is the most visible arena in which to display either grandior or pettiness.</li>
  <li>And if you want to meddle with the work of the creative people you hire, at least pay them well. Your money will more easily buy their decision, rather than your shows of power.</li>
  <li>Powerful people give freely, buying influence, rather than things.</li>
  <li>Consider strategic generosity: give when you are about to take.</li>
  <li>A one time gift given at a sudden unexpected time, bears more force and impact. It will not spoil your children, but rather keep them under your thumb.</li>
  <li>The more the money you spend on gifts and acts of generosity that <a href="https://medium.com/bouncin-and-behavin-blogs/banksy-fushimiya-and-the-value-of-a-teacup-f6b2904d799f">play with sentiment, the more powerful they are.</a></li>
  <li>Don’t give in to greedy and inconsequent <a href="https://en.wikipedia.org/wiki/El_Dorado">“El Dourado”</a>s that will only exhaust your time and energy.</li>
</ul>

<h1 id="relationships">Relationships</h1>

<h2 id="perils-of-isolation">Perils of Isolation</h2>
<ul>
  <li>Do not create a fortress around you, it will make you detached from the world and make you an easy target, since it will be easy to know where you are, and be attacked.</li>
  <li>Pontormo, a painter who spent 11 years secluded inside a chapel painting for his patron. Terrified of being copied by others and growing more and more afraid of fellow humans, he died, and his paintings / frescos did not survive him. Vesari, who saw his paintings, described them as being embodied by madness. Perspective flaws, too many characters, several compositional flaws, figures that overlapped one another. Pontormo obsessed over details, and lost track of the composition.</li>
  <li>Shakespeare was well known because many people knew about his works, he didnt work in isolation.</li>
  <li>Isolation is good to gather one’s thoughts and escape the claws of conformity by society, but this should be done judiciously.</li>
  <li>The more time you spend isolated, the harder it is to come back to society. Make sure you always have a way to come back to society.</li>
</ul>

<h2 id="enemies-and-friends">Enemies, and Friends</h2>
<ul>
  <li>Without enemies we grow lazy. Having enemies sharpens our wits. If you don’t have enemies, find them</li>
  <li>Without a worthy opponent, a man, woman or group cannot grow stronger.</li>
  <li>You are better having declared opponents, instead of not knowing where they lie.</li>
  <li>You need people who deliver results, not that appease you.</li>
  <li>Men are more ready to repay an injury than a benefit. Gratitude is felt as a burden, revenge as a pleasure.</li>
  <li>A brahman, a great expert in Veda who has become a great archer as well, offers his services to his good friend, who is now the king. The brahman cries out when he sees the king, “Recognize me, your friend!”. The king answers him with contempt and then explains: “Yes, we were friends before, but our friendship was based on what power we had. I was friends with you, good brahman, because it served my purpose. No pauper is a friend to the rich, no fool to the wise, no coward to the brave. It is two men of equal wealth and equal birth who contract friendship and marriage, not a rich man and a pauper. An old friend—who needs him?” - The Mahabharata</li>
  <li><em>“To have a good enemy, choose a friend: They know where to strike”</em> - Diane De Poitiers, 1499-1566, Mistress of Henry II of France</li>
</ul>

<h2 id="succession">Succession</h2>
<ul>
  <li>The formulas used by the successful father worked well for him, because he had nothing to lose, and gave him his kingdom and fortunes. The son, who lives in a different set of circumstances, could have his father’s ways imposed onto him, in a domineering and oppressive way, imposing his lessons on the son. Instead of trying to put the son in a new direction, the father tries to put him on his own shoes, perhaps secretly wanting the son to fail, as he often <a href="https://www.colorado.edu/classics/2018/06/19/alexander-and-bucephalus">resents his youth and opportunities</a>. Resulting in the son to be cowed and cautions and fearful of losing what the father had gained.
    <ul>
      <li>Alexander the Great only wanted to outdo his father. To obliterate his name from history. He resented that his father conquered most of Greece, leaving not much for him to conquer. He wanted to out his successful father in the shadows, instead of the opposite. Which he did.</li>
      <li>As a young rebel grows older, his struggle with his father often wanes, and he gradually comes to resemble the very man he used to defy.</li>
      <li>The presence of the “father” must be constantly slain and kept in check. The old ways, the father, the comfort, are enemies of progression and power.</li>
      <li>Keep an eye on the young, since they will do the same to you. Identify them and keep them under control.</li>
    </ul>
  </li>
  <li>It would seem easy for the son or successor to build on a grand foundation left for him. But in the realm of power, the opposite is true. The pampered indulged child, almost always squanders their inheritance, for it doesnt start with a need to fill a void. As seen with Louis XIV, XV, XVI. Louis XIV, while navigating through troubled times, built Versailles instead of taking over his father’s palace, the Louvre, and reigned for (mostly glorified) 55 years. The last years of his reign were difficult, but it was hoped that his child would develop into the kind of strong ruler who would reinvigorate the land and add to the firm foundation that Louis XIV had laid. Instead, his son, Louis XV gave himself over to pleasure. Worn out by debauchery, his country and his own finances were in horrible disarray. His grandson Louis XVI inherited a realm in desperate need of reform and a strong leader. But Louis XVI was even weaker than his grandfather, and could only watch as the country descended into revolution.
    <ul>
      <li><em>“Necessity is what impels men to take action, and once the necessity is gone, only rot and decay are left”</em> - Niccolò Machiavelli</li>
    </ul>
  </li>
  <li>In Sumatra, the king would be killed ritually in a brutal fashion, in order to limit his boundless power and give space for the new generations.</li>
</ul>

<h1 id="strategies">Strategies</h1>

<h2 id="strike-the-shepherd-and-the-sheep-will-disband">Strike the Shepherd, and the sheep will disband</h2>
<ul>
  <li>Athenians found an effective way to deal with socially undesirable individuals. They didn’t fight, punish, or re-educate them. <a href="https://www.greekboston.com/culture/ancient-history/hyperbolus/">They ostracized them</a>.</li>
  <li>Cancer begins with a single cell. Be quick and swift to isolate bad seeds from the group, before they infect a critical mass.
    <ul>
      <li>It’s better to isolate them, rather than destroy them. It’s less brutal. For in a game power, isolation spells defeat. Ostracize, limit their power. Spare no time arguing with them.</li>
      <li>Swindlers isolate their targets from their normal social circles, making them more vulnerable to influence and manipulation. Apart from the void left I’m the sheep</li>
      <li>Lure the poisonous person away, while staying away from their attacks, as seen with Pope Boniface’s <a href="https://en.wikipedia.org/wiki/Dante_Alighieri#Exile_from_Florence">isolation</a> of Dante from the “Whites”, leaving a power void upon their faction. As a resultm Florence was taken over by the “Blacks”.</li>
      <li><em>“If an injury has to be done to a man it should be so severe that his vengeance need not be feared”</em> - Niccolo Machiavelli, The Prince</li>
    </ul>
  </li>
  <li><em>“When the tree falls, the monkeys scatter”</em> - Chinese psroverb</li>
  <li>Alternate harshness with mercy to soften your target. Play on their fears, but also their loves. Target primary emotions: Love, hate, jealousy.</li>
</ul>

<h2 id="mirror-effect">Mirror effect</h2>
<ul>
  <li><a href="https://www.lecturesbureau.gr/1/the-trick-of-the-mirror-helps-communication-2760/?lang=en">Dr. Milton H. Erickson</a>, when faced with a couple with problems in bed, Erickson observed the same dynamics when they talked how they liked to dine. He didn’t address the problem directly, but rather them to schedule a dinner where both would have their desires met (for one desired a slow pace, the other a big meal). It worked as expected, and they transferred the lessons aquired in the dining table into their bedroom.</li>
  <li>Addressing people head-on will often lead to conflict. Instead, mirror their actions so they can reflect at their own time and pace, and fix themselves without admitting fault. They will think to have achieved it on their own, without anyone realising it. But be careful when being too obvious, as it will make them think you are manipulating them, undermining your efforts.</li>
</ul>

<h2 id="reformation-perils">Reformation Perils</h2>
<ul>
  <li>People know that change is needed, and are ok with superficial changes, but are deeply troubled when the changes are deep and affect their core beliefs, structures and habits.
    <ul>
      <li>Change is upsetting to the human animal, even when it’s for the good. If change is needed, find ways to disguise it. Sweeten the poison.</li>
      <li>As seen from Cromwell’s beheading due to his role in the overly ambitious reform and <a href="https://www.cambridge-news.co.uk/news/history/thomas-cromwells-disastrous-fall-favouritism-23904583">uprooting of Roman Catholicism</a>.</li>
    </ul>
  </li>
  <li>When you destroy the familiar, you create a void that people will rush fill. The past is powerful. Borrow from its legitimacy to create a comforting and familiar presence. It will sustain your actions with a familiar and romantic feel, cloaking the nature of the changes you are attempting.
    <ul>
      <li>Because the past is buried and dead, it gives you the <a href="https://en.wikipedia.org/wiki/Criticize_Lin,_Criticize_Confucius">flexibility to interpret it as you see fit</a>.</li>
      <li>The Roman used this when transforming monarchy to republic</li>
      <li>Romans used this device when they transformed their monarchy into a republic. They may have installed two consuls in place of the king, but since the king had been served by twelve lictors, they retained the same number to serve under the consuls. The king had personally performed an annual sacrifice, in a great spectacle that stirred the public; the republic retained this practice, only transferring it to a special “chief of the ceremony, whom they called the King of the sacrifice.” These and similar gestures satisfied the people and kept them from clamoring for the monarchy’s return.</li>
      <li>When Romans declared Christianity to be Rome’s official imperial religion, the evocation of light and fertility (Saturnalia, Festival of Lights, Germanic celebrations of the re-birth of the Sun which all happened in December) could not be ignored. In 354 AD, the Christian church co-opted the birthday of Mithras (the Aryan god of light), and declared December 25th to be the birthday of Jesus Christ.</li>
    </ul>
  </li>
  <li>The ones that finish a revolution are rarely the bones who started it.</li>
</ul>

<h1 id="how-you-show-up">How you Show Up</h1>

<h2 id="be-flexible-assume-formlessness">Be flexible, assume formlessness</h2>
<ul>
  <li>Just like an animal’s shell protects them from dangers, it also makes them slower and inflexible to change. Same can be said for governments and systems that build protections that ultimately make them more rigid and vulnerable to change.
    <ul>
      <li>Rigidity heightens the desire for change.</li>
    </ul>
  </li>
  <li>In a Chinese tale, a farmer observed a hare running straight into a tree, breaking it’s neck. Afterwards, he waited in front of the tree waiting for the same thing to happen. He never caught another one, and was ridiculed. Same could be said for someone who tries to govern using the same strategies as those of early kings. They would be acting no differently than the tale’s farmer.</li>
</ul>

<h2 id="presence-dilution">Presence dilution</h2>
<ul>
  <li><em>“Love never dies of starvation, but often of indigestion”</em> - Ninon de Lenclos</li>
  <li><em>“Absence diminishes small passions, and inflames greater loves. Just as wind douses a candle, and fans a fire.”</em> - François de La Rochefoucauld</li>
</ul>

<h2 id="reputation-and-respect">Reputation and Respect</h2>
<ul>
  <li>Be the master of your fate, and your reputation.</li>
  <li>Reputation is a critical resource. When you have it, protect it.</li>
  <li><em>“When the great lord passes, the peasants bow deeply and silently fart”</em> - Ethiopian proverb</li>
</ul>

<h2 id="symbology">Symbology</h2>
<ul>
  <li>A symbol is a powerful form of expression that summaries several concepts
    <ul>
      <li>For example, the Sun King symbology created for Louis XIV which symbolized his provider god like status.</li>
      <li>Or Diana the mistress of king Henri II of France, who dodged the common fate shared by many other elder mistresses of abandonment, by scattering around the reign multiple symbols related to her (Diana’s favorite colours [black and white] imprinted  in several buildings and images, associations with goddess of hunt Diana), and creating a motif intertwining her initials and the king’s, which king Henri disseminated widely. There was no escaping her presence. Until his death, in 1559, he remained faithful to her.</li>
    </ul>
  </li>
  <li>A symbol is a shortcut of expression, containing in itself several dozen meanings. Symbols are generally subtler and less threatening than words, which can be too incisive.</li>
  <li>Primacy of sight amongst the senses: <em>“Truth is generally seen, rarely heard”</em> - Baltasar Gracián</li>
</ul>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Lessons from Roman History]]></title>
    <link href="https://lopespm.com/notes/2024/10/13/lessons_roman_history.html"/>
    <updated>2024-10-13T00:00:00+00:00</updated>
    <id>https://lopespm.com/notes/2024/10/13/lessons_roman_history</id>
    <content type="html"><![CDATA[<p>Keeping up with the <a href="https://lopespm.com/notes/2024/09/12/interview_learnings_cia.html">theme</a> on capturing lessons from content I consume, I’ve recently seen an <a href="https://www.youtube.com/watch?v=DyoVVSggPjY">interview from Lex Fridman to Gregory Aldrete</a>, an historian specializing in ancient Rome and military history, in which Gregory eloquently spoke about many of the fascinating details on the rise and fall of ancient rome. Here are my takeaways from it.<sup id="fnref:4"><a href="#fn:4" rel="footnote">1</a></sup></p>

<!--more-->

<h1 id="rise-and-fall-of-rome">Rise and Fall of Rome</h1>

<h2 id="romans-were-obsessed-with-the-past">Romans were obsessed with the past</h2>

<p>Romans were absolutely obsessed with the past, especially with their own family.</p>

<p>Entering an aristocrat Roman’s house, the first thing you would see would be a big wooden cabinet with several rows of wax death masks. These masks were imprints of Roman aristocrats at the time of their death.</p>

<p>Every child in the family had obsessively memorized every accomplishment of every one of those ancestors: their career, what offices they held, what battles they fought in, what they did.</p>

<p>At a funeral, people would talk about all the things their ancestors had done. The children would take out these masks, tie them onto their own faces, and wear them in the funeral procession. They were wearing the face of their own ancestors. You, as an individual, weren’t important. You were just the latest iteration of that family, and was a huge weight to live up to the deeds of their ancestors.</p>

<h2 id="brutus-honors-the-past-kills-julius-caesar-roman-republic-dawns">Brutus honors the past, kills Julius Caesar, Roman Republic dawns</h2>

<p>Rome started out as a monarchy. They had kings and were not happy with their kings. Around 500 BC, they held a revolution and they kicked out the kings, and the Roman Republic started at that point. One of the people who played a key role in this was a man named Lucius Junius <em>Brutus</em>.</p>

<p>500 years later, Julius Caesar<sup id="fnref:6"><a href="#fn:6" rel="footnote">2</a></sup> came along as the culmination of a sequence of generals trying to overtake Rome and declare themselves as kings. Even though he was populist who provided entertainment to the state, Julius Caesar was arrogant, didn’t hide his power, ignored the senate, and got several people angry. Romans don’t like kings.</p>

<p>Just so happens that one of Caesar’s best friends is Marcus Junius Brutus. People went to Brutus’ house and wrote graffiti saying “Remember your ancestor” or “You are no real Brutus”. He had no choice. He forms a conspiracy, and on the Ides of March, 44 BC, he and 23 other senators take daggers, stick them in Julius Caesar, and kill him for acting like a king.</p>

<p>Brutus killed his best friend because of something his late ancestor did.</p>

<h2 id="filling-julius-caesars-power-void">Filling Julius Caesar’s power void</h2>

<p>Julius Caesar and left a power void. There are many contenders for filling it up:</p>

<ul>
  <li>Mark Antony: a relative and supporter of Julius Caesar. Most expected him to be the new Ceaser.</li>
  <li>Lepidus: another of Caesar’s lieutenants.</li>
  <li>Senate: which wants to reassert its power, to become the dominant force in Rome again.</li>
  <li>Assassins who killed Caesar: Led by Brutus and Cassius.</li>
  <li>Pompey’s son: Pompey was Caesar’s great rival. Pompey’s son, Sextus Pompey, was at the time a warlord who seized control of Sicily, one of the richest provinces, and amassed a whole navy.</li>
  <li>Octavian: Julius Caesar’s 18-year-old kid grand nephew. When Caesar’s will was opened after his death, he posthumously adopted Octavian as his son.</li>
</ul>

<h2 id="octavian-emerges-victorious">Octavian emerges victorious</h2>

<p>By now being Caesar’s son, Octavian gets to rename himself Gaius Julius Caesar Octavianus, and it just so happened that in the Mediterranean, there were about 12 legions full of hardened soldiers following the orders of a man named Gaius Julius Caesar.</p>

<p>As such, Octavian inherits an army overnight and becomes a player in this game for power, and a civil war starts.</p>

<p>Octavian emerges from it as the victor. He wasn’t a good general and lost almost every battle, but was politically savvy and very good at manipulating public image and propaganda. Octavian waged a propaganda war against Antony, portraying Antony as a foreign aggressor allied with an enemy queen, Cleopatra, and who was an official enemy of the Roman state). Octavian takes what’s a civil war and makes it look like a war against a foreign enemy.</p>

<h2 id="octavian-is-the-king-but-cant-act-like-one">Octavian is the “king”, but can’t act like one</h2>

<p>Octavian now becomes the sole ruler, essentially a king, but could not take the same approach as Julius Caesar, otherwise he would end up murdered all the same.</p>

<p>Instead, he was very modest, lived in an ordinary house like other aristocrats, wore just a plain toga, was respectful to the Senate, and ate simple foods. He’s someone who cared about the reality of power, not its external trappings. He wanted real power, not the appearance of it.</p>

<p>In terms of government, everything seemed the same from the outside, but in reality Octavian was able to retain absolute power. He did by resigning from all public offices to give that appearance, but at the same time got voted to have the powers of a consul, by which he could command armies, he got tribune power, to control meetings at the Senate, he could veto anything, and got several other powers.</p>

<p>Each year elections are held, and notionally, these people are in charge. But floating off to the side, there Octavian, who can just appear and say that “I don’t like this, let’s change it”</p>

<h2 id="nor-can-he-be-named-like-a-king">Nor can he be named like a king</h2>

<p>Octavian wondered what to call himself. He couldn’t call himself a king, or anything that could suggest it, so instead he picked ambiguous names, that when joined an interpret in a certain way, would proved to be powerful:</p>

<ul>
  <li>Augustus: Augustus could mean that someone is very pious, or could mean that something is divine.</li>
  <li>Princep<sup id="fnref:5"><a href="#fn:5" rel="footnote">3</a></sup>: Meaning, first citizen. Could be interpreted as a citizen just like everybody, or the first citizen, superior to all the others.</li>
  <li>Imperator: traditionally something that soldiers shout at a victorious general who’s won a battle. Octavian took this as a permanent title, implying he was a good general<sup id="fnref:3"><a href="#fn:3" rel="footnote">4</a></sup>.</li>
</ul>

<h2 id="what-being-roman-meant">What being Roman meant</h2>

<p>It’s wonderful to contemplate how the roman empire in about 100 AD overlaps with the regions <a href="https://www.reddit.com/r/MapPorn/comments/zpm0h4/hi_everyone_i_made_this_map_showcasing_the/#lightbox">where olives could be grown</a>. Romans consumed olives, grapes, wheat. Barbarians meat, dairy, beer. When you are a farmer, you tend to stay in the same place, when you raise cattle you follow them around. They are two fundamental forms of living. Diet was a big part of their culture and one of characteristics that was considered fundamentally Roman. Not having their diet was barbaric.</p>

<h2 id="roman-empire-crumbles">Roman empire crumbles</h2>

<p>There are many factors that could explain the fall of Rome, and there is not a single clear cut explanation. Even the date of the empire fall is debated. </p>

<p>Geography, climate, religion, disease (there were a whole series of waves of plague that started to hit under Marcus Aurelius and continued after him, which seemed to caused real serious death and economic disruption), Marcus Aurelius leaving is succession to his child (who turned out to be deranged), instead of picking the best suited person for that role <sup id="fnref:1"><a href="#fn:1" rel="footnote">5</a></sup>, as it was done on the previous 80 years, which is often regarded as the high point of the Roman Empire.</p>

<h1 id="power-of-the-past">Power of the past</h1>

<h2 id="no-way-to-escape-the-power-of-the-past">No way to escape the power of the past</h2>

<p>Gregory and his wife wife wrote <a href="https://www.amazon.co.uk/Long-Shadow-Antiquity-Gregory-Aldrete/dp/144116247X">The Long Shadow of Antiquity: What Have the Greeks and Romans Done for Us?”</a>, where they provide several examples of things that we think are just in truly unique parts of our culture or things that we think are just innate to human nature, that are actually rooted in the past, such as government, education, art, architecture, language / words, culture, medicine, habits, law, the way we get married, the calendar (Julius Caesar was the one who basically came up with the 365 days, 12 months, leap years).</p>

<p>We’re the accumulation of the knowledge of several generations that have come before us. Everything we do is based on that. Otherwise, we’d all just be starting at ground zero.</p>

<h2 id="understanding-the-past-to-mold-the-future">Understanding the past to mold the future</h2>

<p>It’s vital to have some understanding of the past in order to make competent decisions in the present. Not just in your own life, but it’s in understanding others. You need to understand where they’re coming from, where they came from, and what shaped them, and what forces affect them.</p>

<blockquote>
  <p>The study of history is the best medicine for a sick mind; for in history you have a record of the infinite variety of human experience plainly set out for all to see: and in that record you can find for yourself and your country both examples and warnings: fine things to take as models, base things, rotten through and through, to avoid.</p>

  <p><em>― Livy, The History of Rome</em></p>
</blockquote>

<p>People from antiquity had different environments, technologies, and information available, but were just as sharp as we are nowadays. They were not stupid. Even though it might seem that many concepts and ideas were invented by our contemporaries, many lessons, successes and mistakes were already discovered in the past <sup id="fnref:2"><a href="#fn:2" rel="footnote">6</a></sup>. The real challenge is to incorporate them into our own lives.</p>

<div class="footnotes">
  <ol>
    <li id="fn:4">
      <p>Gregory Aldrete portrayed several of these concepts beautifully, so some passages of this article are literal paraphrasing of his discourse.<a href="#fnref:4" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:6">
      <p>Kaiser, Tsar, Tzar, Czar. These are based on the word Caesar.<a href="#fnref:6" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:5">
      <p>Princep is the reason why we have “Princes” and “Princesses” afterwards. Everyone wanted to be like Octavian.<a href="#fnref:5" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:3">
      <p>It’s from the imperator that we get the word emperor and empire.<a href="#fnref:3" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:1">
      <p>How did these emperors pick the best suited person for that role, while still sticking with the tradition of leaving succession to the emperor’s children? By adopting middle aged men that they considered fit for the role.<a href="#fnref:1" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:2">
      <p>For example, Cicero (assassinated on the orders of Octavian and Marc Antony) is considered one of the prime examples of a good orator, and wrote at length about it. Many of his experiences, skills and tricks are still used nowadays by several orators.<a href="#fnref:2" rel="reference">&#8617;</a></p>
    </li>
  </ol>
</div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Connection with reality]]></title>
    <link href="https://lopespm.com/notes/2024/09/15/connection_with_reality.html"/>
    <updated>2024-09-15T00:00:00+00:00</updated>
    <id>https://lopespm.com/notes/2024/09/15/connection_with_reality</id>
    <content type="html"><![CDATA[<div>
  <div class="youtube-player" data-id="wk2DwbfgmMU" data-thumbsize="1"></div>
</div>
<p><br /></p>

<p>As we experience an increase of massive amounts of AI generated content, this note will go through the role and added value that a connection with reality and nature brings not only to your business and craft, but also to yourself.</p>

<h2 id="striking-a-balance">Striking a balance</h2>

<p>Walking or hiking has been a recurrent weekly habit of mine for several years, and its one of my favorite activities.</p>

<p>I find it essential to have a walk outside the office / home and be in contact with the surrounding world, be it in nature or around the city. This is especially relevant for those, like me, who have their daily jobs working at the computer.</p>

<p>I love to be enthralled in the digital world, think about abstract concepts, and use digital devices to, for example, communicate this content to you. But like anything else, a balance needs to be kept, and a balance between the digital and real domains seems essential.</p>

<!--more-->

<h2 id="the-added-value-of-connecting-with-reality">The added value of (connecting with) reality</h2>

<p>As generative models get better, more and more people will just assume that a given piece of text, image or video is likely fake, and I believe there will be an increased demand for a connection with the real world through experiences such as in-person events, travel, spirituality, or consumption of digital content by certified entities.</p>

<p>Businesses and creators that prove their connection with the real world and real people, will likely have an edge and rise against the noise.</p>

<p>So if you’re creating a business, a piece of content, anything really, think how it relates with the real world. Ask yourself: how can you provide that connection? How can you provide <em>reality as a service</em>?</p>

<h2 id="keep-yourself-connected-with-reality">Keep yourself connected with reality</h2>

<p>Apart from all this, and just as important, it’s for <em>you</em> to maintain <em>your</em> contact with reality.</p>

<p>So if you feel you spend too much time around the internet, digital devices, TV series, etc, I invite you to the outdoors, the world outside. It’s free, it’s accessible. You just need to open the door and step out, provided you are fortunate enough to have the required physical capabilities. I’m pretty sure that it will make your life much better.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Interview Learnings from former CIA Intelligence Officer]]></title>
    <link href="https://lopespm.com/notes/2024/09/12/interview_learnings_cia.html"/>
    <updated>2024-09-12T00:00:00+00:00</updated>
    <id>https://lopespm.com/notes/2024/09/12/interview_learnings_cia</id>
    <content type="html"><![CDATA[<div>
  <div class="youtube-player" data-id="vlFAvIOUFCk" data-thumbsize="1"></div>
</div>
<p><br /></p>

<p>I’ve been getting into the habit of writing down what I learned from content I consume and I’ve recently seen an interview with Andrew Bustamante,
a former CIA intelligence officer on the <a href="https://www.youtube.com/watch?v=QVVe2rCHtN0">Diary of a CEO with Steven Bartlett</a>.</p>

<p>Andrew Bustamante is a former covert CIA intelligence officer, US Air Force combat veteran, and Fortune 10 corporate advisor, who founded Everyday Spy, where individuals and teams are trained to leverage influence, intelligence and intent. Techniques once reserved for elite spy agencies can now serve everyday people in their pursuit of personal and professional objectives.</p>

<p>Andrew shared his candid and unfiltered views on the human condition and how his previous CIA intelligence officer (commonly known as a spy) can be leveraged towards gaining an advantage in business and everyday life, and in this article I will share some of the highlights and learnings from this interview. Here are my key takeaways:</p>

<!--more-->

<h2 id="do-an-action-any-action">Do an Action, Any Action</h2>

<p>For you to be a step ahead of everyone else just do an action, any action, and you’ll already be ahead of everyone. Even if you fall, you’ll already be four steps ahead of everyone else.</p>

<h2 id="two-kinds-of-people">Two kinds of people</h2>

<p>There are two kinds of people:</p>

<ol>
  <li>Those who fall victim to their fears and will be stuck on a cycle of consumption, he calls them the cogs, the bobbleheads. He mentions that we actually need them, because they are needed by the kind.</li>
  <li>Those who face their fears and produce the things that the cogs want, but fear of doing. So they exploit them.</li>
</ol>

<h2 id="motivation--manipulation">Motivation &amp; Manipulation</h2>

<p>Motivation and manipulation are two sides of the same coin.</p>

<p>Using motivation just exploits something that people are already prone to do, and we just give them something that they want.</p>

<p>If they’re not motivated, then we use manipulation, so they can actually give us what we want.</p>

<h2 id="moral-flexibility">Moral Flexibility</h2>

<p>Moral Flexibility is a gateway for manipulation, which makes something acceptable in one context, but unacceptable in another context.</p>

<h2 id="public-private-and-secret-spheres">Public, Private and Secret Spheres</h2>

<p>Then there are three spheres: the public, the private and the secret.</p>

<h3 id="public-sphere">Public Sphere</h3>

<p>The public sphere is the safe zone:</p>

<ul>
  <li>It’s what you wear</li>
  <li>It’s what you say in Instagram</li>
  <li>It’s what you state to everyone</li>
  <li>It’s the identity that you want other people to perceive</li>
</ul>

<h3 id="private-sphere">Private Sphere</h3>

<p>The private sphere is what the people in your inner circle see:</p>

<ul>
  <li>They know your birthday</li>
  <li>They know your favorite ice cream</li>
  <li>They are the ones that really know you</li>
</ul>

<p>So it’s small by definition. This makes you feel good and special, and you have this elite group which is distinct from the public.</p>

<h3 id="secret-sphere">Secret Sphere</h3>

<p>The secret sphere is where all of your secrets lie:</p>

<ul>
  <li>It’s the affair you’re having</li>
  <li>It was the molestation you had as a kid</li>
  <li>It’s all of your dark thoughts</li>
</ul>

<p>To move from one person’s public to secret sphere, you need to pass by the private one first.</p>

<p>We want to have someone to tell our secrets, but we don’t have enough trust on the people that are in our private sphere.</p>

<p>Once you get to someone’s secrets, they’ll trust you so much that even if you break their heart. They’ll resist leaving you, because it is very rare to find someone who we can tell our secrets to.</p>

<h2 id="core-motivations">4 Core Motivations</h2>

<p>About the four core motivations, they are described by RICE: Reward, Ideology, Coercion and Ego</p>

<ol>
  <li>Ideology is the biggest driver. This could be politics, values, morals, etc</li>
  <li>Ego comes next. Even showing yourself to the world for people to see and to validate how you want to be seen is ego. Andrew mentioned that Madre Teresa wanted to be seen as someone who is a martyr.</li>
  <li>Reward: Money, sex, alcohol, drugs, etc</li>
  <li>Coercion: this is the negative one, and includes things like blackmailing</li>
</ol>

<h2 id="questions-1-validation">2 Questions, 1 Validation</h2>

<p>If you want to get information from a person, then you can ask two questions and then follow up with the validation.</p>

<p>For example, if the other person mentioned that they have an issue with their wife, then you ask:</p>

<ul>
  <li>“Oh what happened?”</li>
  <li>After their reply you ask: “Did she really do that?”</li>
  <li>Again, after their reply, you do a validation, so it doesn’t sound like an interrogatory, by saying for example “Yeah, I had a girlfriend that did the same thing”</li>
  <li>After their reply, you then ask another two questions, and so on and so forth.</li>
</ul>

<h2 id="doors-and-windows">Doors and Windows</h2>

<p>Use windows instead of doors when leading a conversation.</p>

<p>Opening a door is when you change the topic completely. For example, if the conversation is about the weather and all of a sudden you ask about someone’s income. The analogy is that you’re breaking through someone’s door.</p>

<p>Instead you’ll want to open a window, which is to leave a hint for the other party that will organically lead them towards a new ramification of the conversation. You open a window by giving a queue, a suggestion, or an implicit conversation seed.</p>

<h2 id="volunteered-information">Volunteered Information</h2>

<p>People will also volunteer information to you, and you can actually assess that by the information that they give you through their statements.</p>

<h2 id="the-power-of-questions">The Power of Questions</h2>

<p>The person that is asking the questions has the power over the conversation, and not the person who is saying the most words. For example, in the interview it was agreed by both  that Steve was the interviewer, so Steve had the power there.</p>

<h2 id="sadrat-in-business">SADRAT in Business</h2>

<p>Andrew mentioned how the SADRAT methodology can be used in business. SADRAT stands for: spotting, assessing, development, recruiting, agent handling and termination.</p>

<ul>
  <li>Spotting is finding the client, this is, you need to kiss a lot of frogs to get to the prince.</li>
  <li>Recruit means you provide a given product in exchange for their money.</li>
  <li>Assess is about finding if someone is going to be a good productive client, so you can place your Investments on the clients that give you the return on the time span that you want. This can be known through their common traits, their profile, etc.</li>
</ul>

<h2 id="detecting-lies">Detecting Lies</h2>

<p>In order to know if someone is a liar, you need to first establish a baseline. Once that is acquired, you need to put pressure on them to see if they react differently.</p>

<p>The difference between good liars and bad liars is that bad liars tend to twitch and turn, as if they were in a hot seat when they get exposed to pressure.</p>

<p>Good liars, on the other hand, they occlude all of these signals. Good liars tend to be the ones at parties that ask a lot of questions, and you felt like they were so friendly, but in reality you know nothing about them.</p>

<h2 id="perception-vs-perspective">Perception vs Perspective</h2>

<p>Perception is your gut view. Perspective is seeing the event through other lenses.</p>

<p>You should not trust your perception, because most of the time it is wrong and it is emotion based. You need to use your rational side to process challenging situations.</p>

<p>To achieve that, you need to be inoculated by getting exposed to small doses of something you fear. For example, asking someone if you’re overweight. You’ll get the physical fear arousal, but once it’s over no real harm was done.</p>

<p>You can train yourself to not respond to that physical jolt to make your emotional part slower, and your rational part faster.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Obsidian Encrypted Backup - Google Drive, Dropbox, OneDrive]]></title>
    <link href="https://lopespm.com/notes/2024/09/11/obsidian-backup.html"/>
    <updated>2024-09-11T00:00:00+00:00</updated>
    <id>https://lopespm.com/notes/2024/09/11/obsidian-backup</id>
    <content type="html"><![CDATA[<p>After several years using Evernote, I’ve eventually migrated all my notes into Obsidian, which allowed me to have full control of my notes, in a format that I could use, move, or <a href="https://lopespm.com/machine_learning/2024/06/24/personal-llm.html">leverage upon</a>. As a consequence, my notes would no longer live in the cloud and my personal device, so any redundancy and backups would need to be guaranteed by me, via my personal periodic backups.</p>

<p>Having more than a decade’s worth of notes relying on a single redundancy made me somewhat uneasy, so the options I could think of were either:</p>

<ol>
  <li>Subscribe to <a href="https://obsidian.md/sync">Obsidian’s Sync service</a>, which would recurrently cost $4 every month, <em>every month</em>. My encrypted notes would be tethered to Obsidian’s cloud service</li>
  <li>Have a custom solution that leverage’s Obsidian’s outstanding customizability, compress and encrypt all my notes, and use a cloud service to host this archive. I would have the flexibility to choose any cloud provider I would desire.</li>
</ol>

<p>I’ve chosen option 2., using the Google Drive cloud service, and in this note will share how you can too.</p>

<!--more-->

<h1 id="how-to-do-it">How to do it</h1>

<p>The idea is simple: use the <a href="https://obsidian.md/plugins?search=obsidian-shellcommands">obsidian-shellcommands</a> shell plugin to run a custom script, whenever Obsidian quits. This event is configurable, but I find the application quit event to have the necessary periodicity for my use case, since I often sporadically open Obsidian, write on it, and exit the application straight after.</p>

<h2 id="step-1-custom-script-that-encrypts-and-backs-up-all-notes">Step 1. Custom script that encrypts and backs up all notes</h2>

<p>First, save the below script into a folder in your computer (for example, at <code>/Users/yourunixname/backups/my_backup_script.sh</code>), and update it with your own Obsidian, backup destination folders and your own archive password:</p>

<div><div class="CodeRay">
  <div class="code"><pre>#!/bin/zsh

obsidian_notes_folder=&quot;&lt;your_obsidian_folder&gt;&quot; ; # For example, /Users/yourusername/Library/Application Support/obsidian
obsidian_notes_tar_archive=&quot;${obsidian_notes_folder}/obsidian_backup.tar.gz&quot; ;
backup_folder=&quot;&lt;folder_where_the_final_encrypted_backup_will_be_placed&gt;&quot;; # For example, /Users/yourusername/Library/CloudStorage/GoogleDrive/MyDrive/backup_folder

echo &quot;Starting to compress obsidian notes...&quot; ;

# Create a .tar archive that contains all the contents inside the obsidian folder
tar -czf ${obsidian_notes_tar_archive} ${obsidian_notes_folder}/obsidian_backup

# Compress the .tar archive into an encrypted .7z with password &quot;PasswordOfYourChoosing&quot;
# In this example, 7za installed from the nix package manager is used (https://nixos.org/), but you can use 7za from any other reputable source
/Users/yourusername/.nix-profile/bin/7za a -tzip -mem=AES256 -mx=0 -mmt=12 -pPasswordOfYourChoosing ${obsidian_notes_folder}/obsidian_backup.7z ${obsidian_notes_tar_archive} ;

# Move the .7z file into the the backup folder (e.g. your Google Drive / Dropbox / OneDrive folder)
mv ${obsidian_notes_folder}/obsidian_backup.7z ${backup_folder}/obsidian_backup.7z ;

echo &quot;Finished compressing and moving to backup folder&quot;
</pre></div>
</div>
</div>
<p><em>(Download this <a href="https://gist.github.com/lopespm/fcfceebc311d8ba364919cdf4fa61e8d">script from GitHub Gists</a>)</em></p>

<p>The comments are mostly self-explanatory, but essentially this is what the script does:</p>

<ol>
  <li>First create a .tar archive that contains all the contents inside the obsidian folder</li>
  <li>Compresses the .tar archive into a password encrypted <code>.7z</code> file. Remember to update the password with your own private password</li>
  <li>Moves the <code>.7z</code> file into the destination folder, which could be the folder used by your cloud storage sync folder of choice (e.g. your Google Drive / Dropbox / OneDrive folder).</li>
</ol>

<p>Since the final file name on <code>3.</code> is always the same, it will be re-written, but likely your cloud storage sync will keep track of the different versions, as they change, which could progressively inflate your quota usage. If that is a problem, just purge them periodically using your cloud storage interface.</p>

<p>You can test drive your script by granting execution privileges to your script (<code>chmod +x &lt;script_file_name&gt;</code>), and running <code>./&lt;your_script_name&gt;</code>. Your final encrypted archive should appear on the final <code>backup_folder</code></p>

<h2 id="step-2-run-the-script-when-obsidian-quits">Step 2. Run the script when Obsidian quits</h2>

<p>Now that we have the script ready, it makes our life easier if it is run automatically, upon a given Obsidian event, such as when Obsidian quits. Running a shell script upon a given Obsidian event is made easy by using the <a href="https://obsidian.md/plugins?search=obsidian-shellcommands">obsidian-shellcommands</a>. These are the steps to set it up:</p>

<p><strong>1.</strong> Go to Obsidian -&gt; Settings. Then select the “Community Plugins” option.</p>

<center>
          <picture aria-label="Community Plugins">
             <source type="image/webp" srcset="/files/obsidian_backup/p0.webp" aria-label="Community Plugins" />
             <source type="image/png" srcset="/files/obsidian_backup/p0.png" aria-label="Community Plugins" />
             <img src="https://lopespm.com/files/obsidian_backup/p0.png" aria-label="Community Plugins" />
           </picture>
         </center>

<p><br /></p>

<p><strong>1.1.</strong> On the “Community Plugins” option, click “Browse”. There, search for “Shell”. The one you want to install is <a href="(https://obsidian.md/plugins?search=obsidian-shellcommands)">Shell Commands by Jarkko Linnanvirta</a></p>

<center>
          <picture aria-label="Browse for Shell Commands">
             <source type="image/webp" srcset="/files/obsidian_backup/p2.webp" aria-label="Browse for Shell Commands" />
             <source type="image/png" srcset="/files/obsidian_backup/p2.png" aria-label="Browse for Shell Commands" />
             <img src="https://lopespm.com/files/obsidian_backup/p2.png" aria-label="Browse for Shell Commands" />
           </picture>
         </center>

<center>
          <picture aria-label="Selected Shell Commands Plugin by Jarkko Linnanvirta">
             <source type="image/webp" srcset="/files/obsidian_backup/p3.webp" aria-label="Selected Shell Commands Plugin by Jarkko Linnanvirta" />
             <source type="image/png" srcset="/files/obsidian_backup/p3.png" aria-label="Selected Shell Commands Plugin by Jarkko Linnanvirta" />
             <img src="https://lopespm.com/files/obsidian_backup/p3.png" aria-label="Selected Shell Commands Plugin by Jarkko Linnanvirta" />
           </picture>
         </center>

<p><br /></p>

<p><strong>2.</strong> Now that the plugin is installed, go again to Obsidian -&gt; Settings. You should see in the bottom left, under the “Community plugins” pane, an option named “Shell commands”. Click it.</p>

<center>
          <picture aria-label="Shell Commands Plugin entrypoint">
             <source type="image/webp" srcset="/files/obsidian_backup/p4.webp" aria-label="Shell Commands Plugin entrypoint" />
             <source type="image/png" srcset="/files/obsidian_backup/p4.png" aria-label="Shell Commands Plugin entrypoint" />
             <img src="https://lopespm.com/files/obsidian_backup/p4.png" aria-label="Shell Commands Plugin entrypoint" />
           </picture>
         </center>

<p><br /></p>

<p><strong>3.1.</strong> On the “Shell commands” plugin, select the “Shell commands” tab, and inside it, click “New shell command”, and the created row, click its respective cog icon. This will show you a new modal with several tabs.</p>

<p><strong>3.2.</strong> On this command modal, select the “Environments” tab and insert on the “Default shell command” something like this: <code>zsh /Users/yourunixname/backups/my_backup_script.sh</code>. This assumes that your script is located at <code>/Users/yourunixname/backups/my_backup_script.sh</code></p>

<center>
          <picture aria-label="New shell commands on the Environment tab">
             <source type="image/webp" srcset="/files/obsidian_backup/p5.webp" aria-label="New shell commands on the Environment tab" />
             <source type="image/png" srcset="/files/obsidian_backup/p5.png" aria-label="New shell commands on the Environment tab" />
             <img src="https://lopespm.com/files/obsidian_backup/p5.png" aria-label="New shell commands on the Environment tab" />
           </picture>
         </center>

<p><br /></p>

<p><strong>3.3.</strong> Still on this command modal, select the “Events” tab. There you can choose when should the script execution be done. For example, search for “Obsidian quits”, and enable it (there is a toggle in the right)</p>

<center>
          <picture aria-label="New shell commands on the Events tab">
             <source type="image/webp" srcset="/files/obsidian_backup/p6.webp" aria-label="New shell commands on the Events tab" />
             <source type="image/png" srcset="/files/obsidian_backup/p6.png" aria-label="New shell commands on the Events tab" />
             <img src="https://lopespm.com/files/obsidian_backup/p6.png" aria-label="New shell commands on the Events tab" />
           </picture>
         </center>

<center>
          <picture aria-label="How Shell Commands looks like when everything is configured">
             <source type="image/webp" srcset="/files/obsidian_backup/p7.webp" aria-label="How Shell Commands looks like when everything is configured" />
             <source type="image/png" srcset="/files/obsidian_backup/p7.png" aria-label="How Shell Commands looks like when everything is configured" />
             <img src="https://lopespm.com/files/obsidian_backup/p7.png" aria-label="How Shell Commands looks like when everything is configured" />
           </picture>
         </center>

<p><br /></p>

<p>All done! After performing these steps, your backup script will run whenever you chose to, and the encrypted backup will be created and placed in the location that you chose on <a href="https://lopespm.com/notes/2024/09/11/obsidian-backup.html#step-1-custom-script-that-encrypts-and-backs-up-all-notes">Step 1.</a> above 🎉</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Investment Tracker - Free Spreadsheet Template]]></title>
    <link href="https://lopespm.com/notes/2024/09/01/investment-tracker.html"/>
    <updated>2024-09-01T00:00:00+00:00</updated>
    <id>https://lopespm.com/notes/2024/09/01/investment-tracker</id>
    <content type="html"><![CDATA[<p>Do you know:</p>

<ul>
  <li>Your current net worth?</li>
  <li>How much money do you have in the bank?</li>
  <li>Which are your most profitable investments?</li>
  <li>Which investments do you currently have?</li>
  <li>How much of your revenue (e.g. salary) contributes to your wealth?</li>
  <li>How did the above evolve over time?</li>
</ul>

<p>If coming up with the above answers is hard, or their values are fuzzy, then it might be time to revamp your <a href="https://lopespm.com/notes/2024/08/26/uk-investment-guide.html">investment</a> tracking.</p>

<p>This article will:</p>

<ul>
  <li>share a Google Spreadsheet template to track your investments, and explain it</li>
  <li>provide a guide on how to use it</li>
  <li>suggest a simple process to make sure the above questions will not be a problem anymore</li>
</ul>

<div>
  <div class="youtube-player" data-id="dX2UVWU97vc" data-thumbsize="1"></div>
</div>
<p><br /></p>

<!--more-->

<h1 id="the-template">The Template</h1>

<h2 id="get-it">Get it</h2>

<ul>
  <li><strong>Download / copy the <a href="https://docs.google.com/spreadsheets/d/1cR0oOcvwQIXsdOEbtFBoneOfdzrVYB_QkADc1h0BTBk/edit?usp=sharing">Google Sheet Template here</a></strong></li>
  <li><a href="https://lopespm.com/notes/2024/09/01/investment-tracker.html#how-to-use-it">How to use it</a></li>
</ul>

<h2 id="how-it-is-structured">How it is structured</h2>

<p>The template has several sheets, which are built to have the essential tracking elements that can be immediately used, while also allowing for extensibility for your own custom case.</p>

<h3 id="dates-sheet">Dates sheet</h3>

<center>
          <picture aria-label="Dates Sheet">
             <source type="image/webp" srcset="/files/investment-tracker/pdates.webp" aria-label="Dates Sheet" />
             <source type="image/png" srcset="/files/investment-tracker/pdates.png" aria-label="Dates Sheet" />
             <img src="https://lopespm.com/files/investment-tracker/pdates.png" aria-label="Dates Sheet" />
           </picture>
         </center>

<p>The entire sheeet revolves around these dates. Each of these represents the temporal <em>snapshot</em> of all your assets. All the other sheets use these dates as the starting point for their values, and this would be first thing you would add whenever entering a new series of entries</p>

<h3 id="revenue-sheet">Revenue sheet</h3>

<center>
          <picture aria-label="Revenue Sheet">
             <source type="image/webp" srcset="/files/investment-tracker/prevenue.webp" aria-label="Revenue Sheet" />
             <source type="image/png" srcset="/files/investment-tracker/prevenue.png" aria-label="Revenue Sheet" />
             <img src="https://lopespm.com/files/investment-tracker/prevenue.png" aria-label="Revenue Sheet" />
           </picture>
         </center>

<p>Represents all the resources <em>coming in</em>, which are not a result of your investments. This could be the income from your salary, side-hustle, the app you are selling on the app store, etc.</p>

<h3 id="account-sheet">Account sheet</h3>

<center>
          <picture aria-label="Account Sheet">
             <source type="image/webp" srcset="/files/investment-tracker/paccount.webp" aria-label="Account Sheet" />
             <source type="image/png" srcset="/files/investment-tracker/paccount.png" aria-label="Account Sheet" />
             <img src="https://lopespm.com/files/investment-tracker/paccount.png" aria-label="Account Sheet" />
           </picture>
         </center>

<p>There are two example account sheets provided with the template, each representing a different account on your portfolio, but you can add how many you would need. These could be your bank account, transaction broker, private pension, etc. To create a new one, grab one of the example account sheets, and copy it into a new spreadsheet.</p>

<p>On the template, the <em>Example Account1</em> shows how a bank account could roughly look like, and <em>Example Account2</em> how an investment platform (such as Vanguard) could look like.</p>

<p>Each of the account sheets is structured in the following way:</p>

<ul>
  <li>Current status: a look at the present, and comparison with the last update
    <ul>
      <li><strong>Date Column</strong>: referenced from the <a href="https://lopespm.com/notes/2024/09/01/investment-tracker.html#dates-sheet">dates sheet</a>, representing the date of this current <em>snapshot</em></li>
      <li><strong>Top up movement</strong>: any money that you deposited in this account since the last date, would be accounted for here. For example, salary that is deposited, on deposits made in an investment broker. The objective here is to keep track of the money coming into a specific account, so that its performance doesnt look better than it really is.</li>
      <li><strong>Not Invested</strong>: all uninvested money sitting in the account. For example, money in a bank account which does not yield interest.</li>
      <li><strong>Invested</strong>: all money invested in this account. For example, the amount of money invested in a transaction broker, which is currently invested in stocks or ETFs.</li>
      <li><strong>Investment Delta</strong>: the investment difference between the current date and the last date.</li>
      <li><strong>Investment Delta, minus topup</strong>: the investment difference between the current date and the last date, minus the top up. This value attempts to represent how much money was actually generated by the investment since the last date.</li>
      <li><strong>Total</strong>: the total invested and not invested amount in the account.</li>
      <li><strong>Total Delta</strong>: total difference between current date and last date.</li>
    </ul>
  </li>
  <li>Expected gains: predictions of investment gains
    <ul>
      <li><strong>Expected Yearly Growth % (Gross)</strong>: for example, if overall the invested money is in a Fixed Term Deposit, this value would represent the gross yearly interest accrued from it, pre-taxes.</li>
      <li><strong>Expected Yearly Growth % (Net)</strong>: this value represents the actual expected gains from this investment. For example, taking the Fixed Term Deposit example above, this would be the expected yearly interest, after taxes.</li>
      <li><strong>Expected gains 6 months / 1 year / etc</strong>: taking into consideration the <em>Expected Yearly Growth % (Net)</em>, which would accrue gains from the investment over these time spans.</li>
    </ul>
  </li>
</ul>

<h3 id="summary-sheet">Summary sheet</h3>

<center>
          <picture aria-label="Summary Sheet">
             <source type="image/webp" srcset="/files/investment-tracker/psummary.webp" aria-label="Summary Sheet" />
             <source type="image/png" srcset="/files/investment-tracker/psummary.png" aria-label="Summary Sheet" />
             <img src="https://lopespm.com/files/investment-tracker/psummary.png" aria-label="Summary Sheet" />
           </picture>
         </center>

<p>This is where it all comes together. All the accounts are summed up, resulting in these new relevant columns:</p>

<ul>
  <li><strong>Total</strong>: the total across all investments, for a given date</li>
  <li><strong>Total Delta</strong>: total difference between current date and last date.</li>
  <li><strong>Total Delta minus Revenue (i.e. profit / loss)</strong>: the aim of this column is to roughly represent how much of your net worth is being eaten up by your expenses:
    <ul>
      <li>If this value is negative, it means that either your costs are too high, your investments are not yielding yet high values, or both.</li>
      <li>If this value is neutral, it means that your overall investments are completely covering your costs.</li>
      <li>If this value is positive, it means that your overall investments are not only covering your costs, but are also increasing your net worth on top.</li>
    </ul>
  </li>
</ul>

<h2 id="how-to-use-it">How to use it</h2>

<h3 id="set-up">Set up</h3>

<ol>
  <li><a href="https://lopespm.com/notes/2024/09/01/investment-tracker.html#get-it">Copy the template</a>, by opening it and clicking on <em>File -&gt; Make a Copy</em></li>
  <li>Go to the <a href="https://lopespm.com/notes/2024/09/01/investment-tracker.html#dates-sheet">dates sheet</a>, and leave only the top two dates. The first date would be the previous month, and the second would be the current month. Delete the rest.</li>
  <li>Go to the other sheets, and delete all the rows which don’t have a date now</li>
  <li>Zero out the first line on each of the <a href="https://lopespm.com/notes/2024/09/01/investment-tracker.html#account-sheet">account sheets</a> for <em>Top up Investment</em>, <em>Not Invested</em> and <em>Invested</em>.</li>
  <li>Zero out the first line of the <a href="https://lopespm.com/notes/2024/09/01/investment-tracker.html#revenue-sheet">revenue sheet</a>; or add your revenue from that month.</li>
  <li>Use the existing example accounts to host your own accounts. If a new account is needed:
    <ul>
      <li>Copy one of the account sheets, by right clicking on the sheet’s tab, and selecting <em>Duplicate</em></li>
      <li>Add a new column to the <a href="https://lopespm.com/notes/2024/09/01/investment-tracker.html#summary-sheet">summary sheets</a>, representing the new account. Change its formula’s value to get the information from your new sheet. You can do this by selecting the cell and changing the name of the referenced sheet, to the name of your new sheet. For example, from <code>'Example Account 2'!G2</code> to <code>'Monzo Bank Account'!G2</code>.</li>
      <li>Still in the <a href="https://lopespm.com/notes/2024/09/01/investment-tracker.html#summary-sheet">summary sheets</a>, double click the chart, select the <em>Setup</em> tab, and add the range of the new column to the list. For example, if the new column was on the <em>D</em> column, then the data range would change from <em>H7,A2:A1000,B1:B1000,C1:C1000,G1:G1000</em> to <em>H7,A2:1000,B1:B1000,C1:C1000,<strong>D1:D1000</strong>,G1:G1000</em>. Then, on the <em>Series</em> section of the <em>Setup</em> tab, click on <em>Add Series</em> and add the one from your new account.</li>
    </ul>
  </li>
</ol>

<h3 id="recurrent-workflow">Recurrent workflow</h3>

<p>Once you have the above set up, I suggest that on the first days of every month, right after your main source of income is deposited (e.g. salary), that the sheet is updated with the current values of each of the accounts. This is key, and using a recurrent calendar event will help you make sure this is done. If this update is not made periodically, eventually there will be gaps in the tracking, and its data will lose relevance. The process would look something like this:</p>

<ol>
  <li>Add the current date to the <a href="https://lopespm.com/notes/2024/09/01/investment-tracker.html#dates-sheet">dates sheet</a></li>
  <li>On each the the accounts, expand the date to the new one, and fill in the current <em>Top up Investment</em>, <em>Not Invested</em> and <em>Invested</em> values</li>
  <li>All done!</li>
</ol>

<h1 id="final-thoughts">Final thoughts</h1>

<p>Feel free to expand and customize the above tracker to your needs, and let me know how it could be improved and which was its impact on your investment tracking. Would love to hear your thoughts about it.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[UK Investment Guide]]></title>
    <link href="https://lopespm.com/notes/2024/08/26/uk-investment-guide.html"/>
    <updated>2024-08-26T00:00:00+00:00</updated>
    <id>https://lopespm.com/notes/2024/08/26/uk-investment-guide</id>
    <content type="html"><![CDATA[<p>The sooner investments are made, the more profound their results will be, and if you are living in the United Kingdom and not taking advantage of its welcoming investment opportunities to put your money to work for you, you’re missing out. Don’t postpone it.</p>

<p>This article provides concise, practical, straight to point suggestions on how to kick start your investment journey.</p>

<!--more-->

<h1 id="disclaimer">Disclaimer</h1>

<ul>
  <li>I am not a qualified licensed investment advisor. The contents in this article are not financial advice.</li>
  <li>I will not and cannot be held liable for any actions you take as a result of anything you read here.</li>
  <li>Always do your own research and seek independent financial advice when required.</li>
  <li>When investing, your capital is at risk. Investments can rise and fall and you may get back less than you invested. Past performance is no guarantee of future results. Other fees may apply.</li>
</ul>

<h1 id="foundation">Foundation</h1>

<h2 id="why">Why</h2>

<p>Growing wealth has been vilified and correlated with the unscrupulous and greedy. Far from that, money is more than a number and currency: it provides options. The option to say <em>no</em> to that task / job you don’t want to do; options to provide for your family and close ones; options to give back to society and the world; options to support your health, well being and comfort. There is nothing wrong with that.</p>

<p>So why would you consider investing your hard earned money? Why do it as early as possible?</p>

<p>Let’s say you are 20 years old, and have zero net worth. No money in the bank, no assets. After that point, every month, <strong>for the next 30 years, you invest £250 every month</strong> (roughly equating to £8.4 per day). Let’s assume that investment yields a yearly 7% return on investment every year, on average (which is viable assumption, considering the SP500 historical performance). By 50 years old, this would be the <a href="https://www.unbiased.co.uk/discover/personal-finance/savings-investing/compound-interest-calculator">result</a>:</p>

<ul>
  <li>Contributions: £90,000 (250 * 12 * 30)</li>
  <li>Interest earned: £193,382 (thanks to compound interest you will gain this much. Einstein called compound percentages the 8th wonder of the world)</li>
  <li>Total: £283,382</li>
</ul>

<p>Imagine how much higher these values could get if the invested values are increased. You can use this <a href="https://www.unbiased.co.uk/discover/personal-finance/savings-investing/compound-interest-calculator">calculator</a> to have an idea.</p>

<center>
          <picture aria-label="Investment returns over 30 years">
             <source type="image/webp" srcset="/files/uk_investment_strategy/investment_30_years.webp" aria-label="Investment returns over 30 years" />
             <source type="image/png" srcset="/files/uk_investment_strategy/investment_30_years.png" aria-label="Investment returns over 30 years" />
             <img src="https://lopespm.com/files/uk_investment_strategy/investment_30_years.png" aria-label="Investment returns over 30 years" />
           </picture>
         </center>

<h2 id="long-term-game">Long term game</h2>

<p>Forget about get rich quick schemes. Going down that path would be comparable to buying lottery ticket and wish for a winning prize, but the odds of getting struck by lightning are nearly <a href="https://www.accuweather.com/en/leisure-recreation/powerball-mega-millions-or-a-lightning-strike-which-has-better-odds/882156">20,000 times higher</a> than hitting the winning numbers for the next Powerball jackpot.</p>

<p>Building wealth is a long term game which requires discipline, structure and time.</p>

<h1 id="methodology">Methodology</h1>

<h2 id="create-an-emergency-fund">Create an emergency fund</h2>

<p>Make sure you have the equivalent of about 6 liquid months worth of your income available. Life is unpredictable, so make sure you have a reachable safety net which you can rely on and use promptly.</p>

<h2 id="pay-off-your-consumer-debts">Pay off your (consumer) debts</h2>

<p>Compound investment works both ways:  the more you invest, the more your wealth “snowball” will pick up along the way, growing exponentially. On the other hand, if you have debts that require you to pay interest, the inverse applies, progressively eating into your wealth.</p>

<p>As such, gather all your debts, order them by their interest rate, and make sure to pay the ones with the highest interest rate first. Prioritize non-equity based debts, such as credit card debts. Mortgages are equity based, so a portion of your payments goes towards your equity, so they would have less priority compared with pure consumer debt, but make sure they will not overburden you.</p>

<h2 id="budget">Budget</h2>

<p>Budgeting doesn’t mean living in extreme frugalness. Budgeting is about knowing what you <em>need</em> and <em>want</em>, and how much of your income would you be willing to allocate to them. Budgeting makes it easier to reason about your expenses, and having control over them, rather than them controlling you.</p>

<p>Make it as simple or complicated as you would want. You can start by putting in a sheet your monthly income, and subtract from it your fixed (e.g. rent, mortgage, internet bill) and variable expenses (e.g. entertainment, electricity bill, travel). In the end, the objective is that you have a better grasp of how much comes in / goes out. This will inform you on how much disposable income you will have available towards investments.</p>

<h2 id="automate">Automate</h2>

<p>Unless you are a professional trader, you don’t want to spend the entirety of your (limited) time and energy maintaining your investments. If so, that becomes a chore / job by itself. The whole point is to make money work for you, not the contrary.</p>

<p>So automate everything as much as possible. What you can’t automate, make it into a well defined process that requires minimal effort.</p>

<p>I suggested you review / maintain your investments only once per month, <em>every month</em>. If you are an employee, make this shortly after your paycheck comes in.</p>

<h2 id="systematize-know-where-your-assets-are-visit-them">Systematize. Know where your assets are. Visit them.</h2>

<ul>
  <li>Every month, invest as much as possible from your income (this amount would be informed by your budget, and your risk appetite). You can also automate this process by scheduling a periodic amount from your bank account into your investment platform. I don’t particularly like this full automation strategy, since I prefer to adapt my investment amount to what I predict my spending will be on the following month, allowing for a tighter / more aggressive investment strategy. I personally prefer to have as little uninvested money as possible. YMMV.</li>
  <li>Make a spreadsheet. Doesn’t need to be fancy, just functional. It will only be used by you (in principle), so organize in however way you think it is best. Personally, I have different pages for each bank, trading platform, p2p platform, etc. Each of these pages has an history of the current invested amount in these platform, per month. Then an extra page summarizing / summing up all of these assets, with some optional graphs. Having this visual historical summary of all your assets in a single place is gratifying. Seeing how far you came on your investment journey, explicit in a graph, is incredibly fulfilling and powerful.</li>
  <li>Update this spreadsheet periodically, and re-balance your assets as needed. I recommend every month, right after you receive your salary. There are ways to do it automatically, but taking this time to go through all your assets provides visibility on any gaps and strategy changes that need to be done. Personally, this takes me one hour. That’s how long it takes to perform maintenance on my investments: <em>1 hour every month, that’s it</em>.</li>
</ul>

<h2 id="diversify-adapt-to-your-situation">Diversify. Adapt to your situation</h2>

<p>Having your investments diversified across different baskets allows you to balance your risks are diffuse your liabilities across different spaces, which ultimately protects you.</p>

<p>The strategy you would want to adopt for your investments in your 20s, likely won’t be the same as the strategy in your 60s. For example, later on in life, you might want to invest in safer investment vehicles, such as UK Government bonds (essentially, the country would need to go bankrupt for you to lose your money), savings accounts, cash ISAs and real estate.</p>

<h1 id="investment-vehicles">Investment Vehicles</h1>

<p>With our foundations in place, it’s time to dive into the nuts and bolts.</p>

<h2 id="max-out-your-workplace-pension">Max out your workplace pension</h2>

<p>Usually, if your are employed, your employer will make regular payments into your <a href="https://www.moneyhelper.org.uk/en/pensions-and-retirement/pensions-basics/the-different-pensions-you-can-get-if-you-live-and-work-in-the-uk">pension</a> pot on your behalf. And, depending on the plan you belong to, you may also make monthly contributions which will be taken from your salary. Some employers increase their contributions if you increase the monthly amount you put aside as well. This tends to be a direct match – if you put aside an extra 1%, they add an extra 1%, but there will be a maximum level they will match.</p>

<p>There are two allowances you should keep in mind:</p>

<ul>
  <li>Your annual allowance is the maximum level of total pension contributions to all of your pensions (made by yourself, your employer(s) or anyone else) that will receive tax relief in a tax year. It is currently £60,000, although could be lower if you have an adjusted income over £240,000 or you have already made a taxable withdrawal from any of your pension plans.</li>
  <li>The lump sum allowance (LSA) is the maximum amount of tax-free cash you can take from your pension savings in your lifetime. You can take 25% of your pot tax-free, as long as this amount is not higher than the LSA.  </li>
</ul>

<h2 id="own-the-world-stocks-etfs">Own the World: Stocks, ETFs</h2>

<p>Google, Apple, Tesla, NVIDIA: what if you could own a part of them and profit from their earnings by receiving dividends from them and / or getting capital gains from their (hopefully) raising share prices? </p>

<p>Turns out, you can. Either by buying their individual stocks, or better yet, you can invest on a index fund, such as the <a href="https://en.wikipedia.org/wiki/List_of_S%26P_500_companies">S&amp;P 500</a>.</p>

<h3 id="sp-500">S&amp;P 500</h3>

<p>S&amp;P 500 contains the top 500 U.S.A. publicly traded companies with a primary emphasis on market capitalization. Most interestingly, this list isn’t manually curated by a human or an opaque heuristic. The list is based on the market capitalization only, and it is considered one of the best gauges of large U.S. stocks and even the entire equities market because of its depth and diversity. This dilutes the risk you are exposed to, and historically has provided a realistic yearly <a href="https://en.wikipedia.org/wiki/S%26P_500">~7.5%</a> return on investment.</p>

<p>You can’t invest directly in the S&amp;P 500 because it’s an index but you can invest in one of the many funds that use it as a benchmark and track its composition and performance.</p>

<p>To make it easier, you can get a S&amp;P 500 Exchange-traded fund (ETF). ETFs and index funds are similar in many ways but ETFs are considered to be more convenient to enter or exit.  They can be traded more easily than index funds and traditional mutual funds, similar to how common stocks are traded on a stock exchange.</p>

<p>Here are two S&amp;P 500 ETFs, which have a low maintenance cost:</p>

<ul>
  <li><a href="https://www.vanguard.co.uk/professional/product/etf/equity/9503/sp-500-ucits-etf-usd-distributing">S&amp;P 500 UCITS ETF - Distributing (VUSA)</a>: the dividends are paid out to you, and you can choose to reinvest them, invest them elsewhere, or just cash them out.</li>
  <li><a href="https://www.vanguard.co.uk/professional/product/etf/equity/9694/sp-500-ucits-etf-usd-accumulating">S&amp;P 500 UCITS ETF - Accumulating (VUAG)</a>: the dividends are automatically reinvested into the ETF, which makes the process more automatic, in case you want to reinvest your earnings (which likely, you should). Note that, even though these dividends are reinvested directly into the ETF, they are still <a href="https://monevator.com/income-tax-on-accumulation-unit/">considered as earnings by the HMRC</a>, so in the tax perspective, there is no difference between distributing and accumulating.</li>
</ul>

<h3 id="other-etfs">Other ETFs</h3>

<p>Investing on a S&amp;P 500 is already a significant step up from plain low interest savings accounts, but you would be overly exposed to the U.S.A. market. As such, you can consider ETFs which further diversify your exposure, such as the <a href="https://www.vanguard.co.uk/professional/product/etf/equity/9679/ftse-all-world-ucits-etf-usd-accumulating">FTSE All-World UCITS ETF - (USD) Accumulating (VWRP)</a>, which is comprised of large and mid-sized company stocks in developed and emerging markets.</p>

<p>The above ETFs are provided by Vanguard (which tends to have low maintenance costs for their ETFs), and can be bought in several trading platforms, but there are many other reputable companies providing similar ETF, such as BlackRock.</p>

<h3 id="where-to-buy-these-stocks-and-etfs">Where to buy these Stocks and ETFs</h3>

<ul>
  <li><a href="https://www.justetf.com/uk/how-to/invest-in-uk.html">justetf</a>: is a great website to explore and get details on costs and performance of an ETF you are aiming to invest in</li>
  <li><a href="https://www.vanguardinvestor.co.uk/">Vanguard</a>: if you are starting out on your ETF investment journey, I strongly suggest this platform to invest in your ETFs. Making deposits and managing investments is straightforward and has the right amount of information and process, in order to not be overwhelming</li>
  <li><a href="https://www.interactivebrokers.co.uk/en/home.php">Interactive Brokers</a>: this platform has been around for a long time, is low cost, well-capitalized, provides for very low cost exchange rates, and allows you to invest in a large amount of available stocks and ETFs. The trade-off is that it takes longer to onboard, due to its interface complexity and wide range of tools and information.</li>
  <li><a href="https://www.trading212.com/">Trading212</a>: commission-free platform that doesn’t apply any commission on trades, but does charge <a href="https://www.trading212.com/cards">0.15% on currency conversion fees</a>. Make sure to take these hidden costs into account.</li>
</ul>

<p>Vanguard, Interactive Brokers and Trading 212 are regulated in the UK by the FCA. I recommend you spread out your investments in different platforms, in order to reduce the risk / hassle in case any of them is shut down or rendered illiquid.</p>

<h2 id="isa">ISA</h2>

<p>Every time you sell the above ETFs or Stocks at a gain (for example, you bought £100 worth of an ETF, and then sold it for £150), and every time dividends are received (regardless if they are paid directly to you, or reinvested), you will need to pay taxes on them, unless you are still within their respective allowance. <sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup></p>

<p>One way to not pay any of these taxes<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>, is to use a stocks and shares ISA. The stocks and shares ISA is one of the <a href="https://www.gov.uk/individual-savings-accounts">types of ISA</a>. Other ones being cash ISA (type of savings account that offers tax-free interest), innovative finance ISA (peer to peer lending with tax-free interest) and Lifetime ISA (tax-free savings account that gives a 25% bonus if used for retirement or to buy a first home).</p>

<p>As of the time of this writing, the maximum yearly amount allowed to be saved via ISAs is <a href="https://www.gov.uk/individual-savings-accounts">£20,000</a>. This means that across any of the above 4 types of ISAs you can only deposit in them up to £20,000. You can withdraw them at any point in time. <sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup></p>

<p>Some specifics on this:</p>

<ul>
  <li>Creating a Stocks and Shares ISA is fairly straightforward. The above brokers (Vanguard, Interactive Brokers and Trading212), all allow for you to create a Stocks and Shares ISA account. This account is exactly the same as a normal / general account, except that it is tax sheltered. The ISA account would be separate from a general investment account you might want to create, in case you already reached your £20,000 limit, and want to continue investing (which I recommend).</li>
  <li>You can create ISA accounts in <a href="https://www.moneysavingexpert.com/savings/stocks-shares-isas/">multiple providers</a> of any types you choose, but remember there is a global £20,000 limit. For example, if you have a Cash ISA on HSBC where you deposited £15,000, and Stocks and Shares ISA on Vanguard, you can only deposit up to £5,000 in Vanguard’s Stocks and Shares ISA account. You can transfer your ISA account across providers, to avoid losing your tax free investments.</li>
  <li>If you deposit £18,000 on a ISA account and then withdraw all of it, you will only be able to deposit £2,000 on a ISA account after that (on the same tax year<sup id="fnref:4"><a href="#fn:4" rel="footnote">4</a></sup>)</li>
  <li>Every year, the annual ISA allowance will renew, and your investments from the previous year(s) will still have tax free gains. As such, avoid at all possible costs to withdraw your investments for these ISA accounts. Even if your ISA investment was made several years ago, their gains will still be tax free.</li>
  <li>Any capital gains and dividend gains yielded from your investments made in an ISA account will be tax free.</li>
</ul>

<h2 id="cashback">Cashback</h2>

<p>You can earn, while consuming. That is cashback.</p>

<p>The reason why this is possible in the first place, is because products are originally sold at a higher margin price, and cashback mechanisms are essentially a way to clawback part of that extra margin back to you. There are essentially two ways you can claim this: via credit cards (and bank accounts), cashback reward websites.</p>

<h3 id="credit-cards-and-bank-accounts">Credit cards (and bank accounts)</h3>

<p>There are several credit cards and bank accounts that allow you to gain cashback. Usually you can expect a 1% cashback rate, save from their respective promotional periods.</p>

<ul>
  <li>American Express (Amex) cards are overall the best when it comes to cashback rewards, such as the zero-fee <a href="https://www.americanexpress.com/en-gb/credit-cards/platinum-cashback-everyday-credit-card">Amex Cashback Everyday Credit Card</a>. Trade-off being that not every establishment accepts Amex cards, so you will need a fall back.</li>
  <li>Since Amex cards are not accepted on all establishments, it is a good idea to have a backup Mastercard or Visa card, which are widely accepted. Have a browse through these <a href="https://www.moneysavingexpert.com/credit-cards/best-credit-card-rewards/">top cashback cards</a> to have an idea of what is available.</li>
  <li>There are credit cards which have pre-conditions, such as having minimum spend, an associated bank account, maintenance fee, amongst others, so make sure to take these into consideration to calculate your bottom-line</li>
  <li>There are credit cards which collect Avios instead, such as the <a href="https://www.americanexpress.com/en-gb/credit-cards/ba-credit-card/">British Airways American Express® Credit Card</a>. Unless you plan to use them for travel, use their respective perks (e.g. lounge passes), and have spendings that are leveraged by these points, I would steer away from them. This is because there is an <a href="https://www.ft.com/content/b8d7743f-0c81-4406-ad2d-0f84a2cc78a5">associated monetary value</a> with each of these points, and personally I prefer to have these saving readily available on cash.</li>
  <li>Remember to pay your credit card spending every month <em>in full</em>, otherwise you will be hit by the gargantuan interest rates (about 30%).</li>
</ul>

<h3 id="cashback-reward-sites">Cashback reward sites</h3>

<p>On top of the above credit card cashback rewards, you can clawback another layer of cashbacks via rewards sites. In the United Kingdom, the #1 site is <a href="https://www.topcashback.co.uk/">TopCashback</a>. To leverage it, just quickly search on their website if they offer rewards for a purchase you are about to make (e.g. hotel booking via Expedia, which easily gets you 10% cashback), use their link, and once you complete the purchase the reward will be available in a few weeks. This is incredibly powerful.</p>

<p>You can leverage other reward sites, such as the perks provided via Amex, that need to be activated, but personally, I wouldn’t bother too much with them.</p>

<h2 id="points--loyalty-cards">Points / loyalty cards</h2>

<p>Another level on top of the above cashback methods, is to use points cards on for your favorite merchants / supermarkets, which  can either provide you direct discounts, or accrue points that can be exchanged later on by discounts or perks. In general they are quick to set up, and their respective cards can be added to virtual wallets, so there is no need to carry their physical presence. For example:</p>

<ul>
  <li><a href="https://www.nectar.com/homepage">Nectar Card</a>: useful for Sainsbury’s purchases</li>
  <li><a href="https://www.waitrose.com/ecom/my-waitrose/become-a-member">Waitrose Membership</a></li>
  <li><a href="https://secure.tesco.com/clubcard">Tesco Clubcard</a></li>
</ul>

<h2 id="watch--phone-wallet">Watch / Phone Wallet</h2>

<p>With all of the above credit and points cards, a wieldy and secure way to have them at hand is to add them to your watch or phone. Google and Apple devices largely support these wallets, and adding them is overall straightforward. One aspect I particularly like about this approach, is that carrying around credit cards using wallet appears feels more secure than carrying a physical card, which if stolen, the mechanisms available to block are mostly leveraged via the card provider, whereas via a virtual wallet, apart from have the card’s access walled by the device’s default access (e.g. pin code), the device can also be remotely wiped, if needed.</p>

<h2 id="equity-investments">Equity investments</h2>

<p>Seed investment on companies (such as startups) is not restricted to angel investors and VCs. These investments are now widely available via crowdfunding platforms such as <a href="https://www.crowdcube.com/">Crowdcube</a> or <a href="https://europe.republic.com/">Seedrs / Republic</a>:</p>

<ul>
  <li>These platforms allow you to contribute towards a round of investment in a given company.</li>
  <li>This is a high risk, high reward / loss business proposition, since there are only very specific conditions in which you can withdraw your investment (e.g. company is acquired, gets IPOed). There is a high likelihood that these companies either take a long time span to <em>exit</em>, or that they will go bankrupt.</li>
  <li>Many of these are covered by a <a href="https://www.gov.uk/guidance/venture-capital-schemes-tax-relief-for-investors">tax relief</a>, such as <a href="https://www.gov.uk/guidance/venture-capital-schemes-apply-for-the-enterprise-investment-scheme">Enterprise Investment Scheme (EIS)</a>, meaning that you can deduce a percentage of your investment from your taxes. For example, if you invest £100 of a company under the EIS scheme, you will be able to deduce £30 (30% of £100) from your taxes (if you do not expect to pay that amount of taxes, then this would not be useful for you).</li>
  <li>Commonly there are associated perks provided by the companies, such as redeemable vouchers on their businesses.</li>
</ul>

<h2 id="other-vehicles">Other vehicles</h2>

<p>Other investment vehicles you can consider are real estate (e.g. buy to let, REIT), commodity trading (e.g. silver, gold), forex trading (buying one currency and selling another while attempting to profit from the trade), crypto trading, p2p lending. Even though I have some experience with some of them, these are not my main focus of my investment strategy, so I’ll abstain from making many remarks on them.</p>

<h1 id="final-thoughts">Final thoughts</h1>

<p>The above guide is not extensive, by all means, and there are thousands of ways to put your money to work effectively, but it is important to not go overboard and over optimize, as too much time spent on these will eventually carve away from other meaningful areas of your life, such as overly obsessing over points optimizations. This is an eventual opportunity cost, and you should be aware that these methods are a means, not the end. Optimize just enough, automate as much as possible, reap the rewards, gain options, and enjoy your life to fullest!</p>

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p><a href="https://www.gov.uk/tax-on-dividends">Dividend gains allowances</a>, and <a href="https://www.gov.uk/trusts-taxes/trusts-and-capital-gains-tax">capital gains</a> allowances.<a href="#fnref:1" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:2">
      <p>ISA is a tax avoidance mechanism encouraged by the UK government. Tax avoidance is related to avoiding taxes using mechanisms that are legal and are expected to be used. Tax evasion, on the other hand, is the usage of illegal methods to circumvent and evade taxes.<a href="#fnref:2" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:3">
      <p>Stocks and Shares ISA is very similar to its USA counterpart, the Roth IRA, which has a $6.5k yearly limit, and its withdrawal can only be made at age 59.5 tax free.<a href="#fnref:3" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:4">
      <p>A UK tax year runs from <a href="https://www.gov.uk/check-income-tax-current-year">6 April to the following 5 April</a>.<a href="#fnref:4" rel="reference">&#8617;</a></p>
    </li>
  </ol>
</div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Personal Local (Llama3 8B) LLM extended with WhatsApp + Obsidian Data]]></title>
    <link href="https://lopespm.com/machine_learning/2024/06/24/personal-llm.html"/>
    <updated>2024-06-24T00:00:00+00:00</updated>
    <id>https://lopespm.com/machine_learning/2024/06/24/personal-llm</id>
    <content type="html"><![CDATA[<p>This blog article will describe the implementation of a fully offline Llama3 8B LLM agent with access to WhatsApp Messages and Obsidian notes (or any other data sources), making it able to hold conversations about any of the topics present there. All data stays local, including the data from WhatsApp and Obsidian - it is in fact a <em>personal</em> assistant.</p>

<p>Source code for this project is <a href="https://lopespm.com/machine_learning/2024/06/24/personal-llm.html#source-code">available on GitHub</a>.</p>

<center>
          <picture aria-label="Header image of Personal LLM">
             <source type="image/webp" srcset="/files/personal_llm/showcase_interaction3.webp" aria-label="Header image of Personal LLM" />
             <source type="image/png" srcset="/files/personal_llm/showcase_interaction3.png" aria-label="Header image of Personal LLM" />
             <img src="https://lopespm.com/files/personal_llm/showcase_interaction3.png" aria-label="Header image of Personal LLM" />
           </picture>
         </center>

<!--more-->

<p><br /></p>

<h1 id="motivation--objective">Motivation &amp; Objective</h1>

<h2 id="why-was-this-project-assembled-in-the-first-place">Why was this project assembled in the first place?</h2>

<ul>
  <li>I’ve built up a considerable personal database:
    <ul>
      <li>For more than 15 years I’ve been journaling and writing several notes, keeping them aggregated in the same place as I changed their hosting platform. From simple text files, passing by Evernote, and more recently into <a href="https://obsidian.md/">Obsidian</a>, into which I migrated all of my written notes <sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup></li>
      <li>Most of my relevant correspondence for almost 10 years has been made via WhatsApp, which stores all messages locally</li>
    </ul>
  </li>
  <li>I’ve realized how powerful it is to reflect on past events and approach them with the lenses of the new experiences and lessons I’ve been accumulating throughout life, but due to the considerable amount of content present in the above data stores, sometimes it is hard to reach and associate the relevant information I am looking for, even though I try to keep the above relatively organized.</li>
  <li>And of course, how great would it be to have a personal assistant with access to all of these, in a self-contained offline fashion?
    <ul>
      <li>Currently, state of the art Large Language Models (LLMs) such as <a href="https://ai.meta.com/blog/meta-llama-3/">Llama3</a> are feasible to be run locally on a laptop, which is something that still blows my mind.</li>
      <li>Pre-trained LLMs can have their capabilities augmented (as we will see below) to serve different custom purposes</li>
    </ul>
  </li>
</ul>

<p>All of this combined meant that it would be feasible to host a state of the art LLM in my laptop, with potential access to my personal files, without requiring this sensitive information to be hosted or processed elsewhere, which was something that had quite an appeal for me.</p>

<h2 id="objective">Objective</h2>

<p>Build an offline assistant with access to WhatsApp messages and Obsidian notes (or any other data sources), using components that don’t fully abstract the process (similar to the approach I took when <a href="https://lopespm.com/machine_learning/2016/10/06/deep-reinforcement-learning-racing-game.html">creating a deep reinforcement learning agent to play a racing game</a>), to learn more about how LLMs and their infrastructures work.</p>

<p><br /></p>

<h1 id="building-blocks">Building Blocks</h1>

<h2 id="running-an-offline-llm">Running an offline LLM</h2>

<p>One of the crucial pieces is actually being able to run an LLM locally. Below we will explore the hardware requirements, and software we can use.</p>

<h3 id="the-more-gpu-cores-and-vram-the-better">The more GPU cores and VRAM, the better</h3>

<p>When running LLMs on a personal computer, there are two main factors that influence its inference performance and overall capability to even being able to run them: number of GPU cores, and available VRAM (video RAM, this is, memory available to the GPU).</p>

<ul>
  <li>The more GPU cores available, the more operations can be processed, and machine learning algorithms are all about just finding patterns in numbers</li>
  <li>The more (VRAM) memory available, the bigger the model can be stored in memory and be efficiently processed. For example, if we consider Llama3 with 8 billion parameters (more information in <a href="https://www.youtube.com/watch?v=cpYqED1q6ro">this video</a>) <sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>:
    <ul>
      <li>One 32 bit float value = 32 bits of memory, this is, 4 bytes (1 byte = 8 bits)</li>
      <li>8 billion parameters = 8.000.000.000 * 4 bytes = 32.000.000.000 bytes ≈ 32GB VRAM, for a full precision model (32 bit float)</li>
      <li>If we would use a quantized model, this is, using lower precision floats to represent the parameters:</li>
      <li>Using half precision 16 bit float parameters: 16 GB VRAM</li>
      <li>Using quarter precision, 8 bit float parameters: 8 GB VRAM</li>
      <li>And if we would use Llama 70 billion parameters, it would amount to 280 GB VRAM (float32), 140 GB VRAM (float16), 70 GB VRAM (float8), 35 GB VRAM(float4)</li>
    </ul>
  </li>
</ul>

<p>I personally own a MacBook Pro M3 Max with 40 GPU cores and 128GB of unified RAM (meaning that this memory is available to the CPU and GPU), and it just so happens that Apple Silicon computers (M1, M2, M3 chips) are very capable machines to run inference on LLMs, such as Llama3 8B (full precision), or even 70B models (I’ve personally tested the 70B 4bit model <sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup> on this machine, and can attest that it runs well and in bounds of memory available, as seen on the calculations above)</p>

<h3 id="running-the-inference">Running the inference</h3>

<p>There are several methods or libraries that can be used for running a LLM in a personal computer. One of the most approachable ones is <a href="https://www.ollama.com/">ollama</a>, which effortlessly allows you (after a quick installation step), to run Llama 3, Phi 3, Mistral, Gemma offline on your computer.</p>

<p>Another possible way is to load the model’s definition from Hugging Face (think of it roughly as a GitHub for machine learning models), and run them via the <a href="https://pypi.org/project/transformers/">transformers</a> library, which vividly encourage you to explore. The amount of freely available pre-trained models to perform tasks on different modalities such as text, vision, and audio is inspiring, to say the least.</p>

<p>For this project, a third option was picked, which was using <a href="https://pypi.org/project/mlx-lm/">mlx_lm</a> library, that essentially still leverages the Hugging Face Hub to provide the models, but optimizes execution by leveraging <a href="https://unfoldai.com/mlx-ml-on-apple-silicon/">MLX</a>, an array framework crafted specifically for harnessing the power of Apple silicon, which was developed by Apple’s machine learning research team.</p>

<h2 id="augmenting-the-llms-knowledge">Augmenting the LLM’s Knowledge</h2>

<p>Now that our LLM is running locally, the question that follows is: how to make it aware of all the contents present in Obsidian notes and WhatsApp messages? We have a few options:</p>

<h3 id="retrain--fine-tune-a-pre-trained-llm">1. Retrain / fine tune a pre-trained LLM</h3>

<p>The idea here is to retrain / fine tune the entire model, or parts of it, to make it knowledgeable about our contents.</p>

<p>A pre-trained LLM comes with the advantage of common probabilistic knowledge about a language or set of languages that can be leveraged upon, which was a result of a long and costly training process. As such, a full retraining of the model that would not retain information about its trained parameters would be out of the question. Instead, there are several ways we can leverage it:</p>

<ul>
  <li>Freeze the existing LLM layers (all or a selection of them), add also add new trainable layer layers on top of the existing LLM layers, and only train the trainable and unfreezed ones.</li>
  <li><a href="https://llama.meta.com/docs/how-to-guides/fine-tuning/">Fine tune</a> the existing pre-trained LLM, which essentially modifies all parameters of the model with a low training rate, in order to retain as much existing knowledge and capabilities as much as possible, and avoid <a href="https://arxiv.org/html/2402.18865v1">catastrophic forgetting</a>. Because these models are so massive, they are not particularly sensitive to any given parameters being off by a lot, or a little. Their overall size and complexity make up for it, so we can mostly get away with rough updates. To fine tune a model, there are essentially two ways to go about it:
    <ul>
      <li>Load all of the model’s parameters into memory, and modify them directly during the learning process</li>
      <li>Take advantage of the fact that you can multiply two small matrices to get a larger matrix (which is the main bread and butter of deep learning models), so we can try to find out the two smaller matrices instead, meaning that we only need to maintain those in memory. All the parameters of the model are still modified during training, but we don’t need to hold them all in memory at once. That’s what Low-Rank Adaptation (<a href="https://www.entrypointai.com/blog/lora-fine-tuning/">LoRA</a>) fine-tuning method does, and it is one of the most popular ways to fine tune LLMs, along with its QLoRA counterpart (which uses a data type that reduces by 4x the already lower LoRA memory footprint).</li>
    </ul>
  </li>
</ul>

<p>Some important aspects of these techniques:</p>

<ul>
  <li>We are compressing our documents into the LLMs internal knowledge, and we have less control of how precisely these models retain the most accurate information. These could lead to hallucinations.</li>
  <li>If the data we want to augment our LLM with is dynamic in nature (which for our case, I would prefer it to be, so that the assistant can have access to the most relevant information when used), this would mean that the model would need to be fine tuned every time an update should be made.</li>
  <li>The training data needs to be structured in a way that makes sense for the model to be used. For example, WhatsApp messages and Obsidian notes would need to be transformed into a sensible training set that would fit the tone I would aim to have for the assistant.</li>
</ul>

<p>Given that I would want to experiment with different types of assistants and different ways to leverage and explore the data in a conversational way, and have access to the most up to date information available, which could be available in several different formats (for example, let’s say I would like to augment the LLMs knowledge with historical CO2 readings of my apartment), retraining / fine tuning the model was not a very inviting approach.</p>

<h3 id="insert-all-documents-into-the-prompt-as-context">2. Insert all documents into the prompt, as context</h3>

<p>The idea here is to provide all the context that LLM needs, in the <a href="https://llama.meta.com/docs/how-to-guides/prompting/">prompt’s context</a>. For example:</p>

<div><div class="CodeRay">
  <div class="code"><pre>
&lt;|begin_of_text|&gt;&lt;|start_header_id|&gt;system&lt;|end_header_id|&gt;

You are a AI assistant which answers the user's question based on your prior knowledge
and a collection of the user's documents.

Each of the documents has the format &lt;&lt;document:||document_name||&gt;&gt;||content||.
||document_name|| represents the document name. ||content|| represents the
document's content. Don't show the &lt;&lt;document:||document_name||&gt;&gt; portion to the user.

For example, for: &lt;&lt;document:&lt;obsidian&gt;:hello world&gt;&gt;This is an interesting
description of hello.
- ||document_name|| is &lt;obsidian&gt;:hello world
- ||content|| This is an interesting description of hello.

These are the user's documents:
----------
&lt;&lt;document:&lt;obsidian&gt;:lamas running down the street&gt;&gt;The content for lamas
going down the street
&lt;&lt;document:&lt;obsidian&gt;:alpacas running down the street&gt;&gt;That time when I saw a
alpaca running down the street.
----------

&lt;|start_header_id|&gt;user&lt;|end_header_id|&gt;Tell me about that time I've seen animals
running down the street&lt;|eot_id|&gt;

</pre></div>
</div>
</div>

<p><br />
This would be the most convenient approach, but the context window available to a LLM, the number of tokens it can use at one time to generate a response, is limited.</p>

<p>Llama3 8B for example, allows for a 8K token context window, and there have been attempts to extend it further to <a href="https://arxiv.org/pdf/2404.19553">80K</a> or <a href="https://huggingface.co/gradientai/Llama-3-8B-Instruct-262k">262K</a>, and Google’s Gemini 1.5 Pro can handle a <a href="https://blog.google/technology/ai/google-gemini-next-generation-model-february-2024/#architecture">1 million token context window</a>, for example.</p>

<p>Given that my Obsidian notes total around 8M characters in content, and my WhatsApp messages around 16M, even if we assume that an average of 1 <a href="https://x.com/karpathy/status/1789590397749957117">token</a> per 4 characters, just the Obsidian notes would clock around 2M tokens, which makes this method infeasible</p>

<h3 id="rag-retrieval-augmented-generation">3. RAG (Retrieval Augmented Generation)</h3>

<p>To navigate around the context window limitation, instead of inserting all the documents into the prompt’s context in one go, we can instead be selective on the information we want to provide on the prompt, depending on the user’s request(s).</p>

<p>For example, if the user asks the AI assistant “what do you think about that gaming project I did 4 years ago?”, behind the scenes we can query a database, and ask it the most relevant results about gaming projects that happened about 4 years ago, and then use those documents content into the prompt’s context.</p>

<p>That’s the overall idea of RAG.</p>

<p>Now, many questions come up:</p>

<ol>
  <li><em>Transforming a conversation into a query:</em> How do we transform the user’s prompt + the context of the conversation, into a query that asks our database exactly what the main LLM needs to provide a contextual reply?</li>
  <li><em>Fetching contents related to a query:</em> How can the content database know which are the most relevant content related to a given query?</li>
</ol>

<p>Let’s explore these in the next section.</p>

<h2 id="what-makes-rag-tick">What makes RAG tick?</h2>

<h3 id="transforming-a-conversation-into-a-query">1. Transforming a conversation into a query</h3>

<p>In order to produce a query that transforms an entire conversation into a concise sentence that can be used to get the documents in the database that are most similar to it, we can feed in the conversation into a LLM specialized in creating summarized queries. Here is an example of prompt we can use for it:</p>

<div><div class="CodeRay">
  <div class="code"><pre>&lt;|begin_of_text|&gt;&lt;|start_header_id|&gt;system&lt;|end_header_id|&gt;   
You are the user's document keeper that has access to all the documents for the user.
Based on the entire conversation only, you will only reply with the question you
will ask to query the appropriate user documents, in order to get all the relevant
user's documents related to the conversation.
&lt;|eot_id|&gt;

&lt;&lt; entire conversation &gt;&gt;

&lt;|start_header_id|&gt;document keeper&lt;|end_header_id|&gt;
</pre></div>
</div>
</div>

<p><br />
This is how it would it would look like with actual information about the conversation:</p>

<div><div class="CodeRay">
  <div class="code"><pre>&lt;|begin_of_text|&gt;&lt;|start_header_id|&gt;system&lt;|end_header_id|&gt;   
You are the user's document keeper that has access to all the documents for the user.
Based on the entire conversation only, you will only reply with the question you
will ask to query the appropriate user documents, in order to get all the relevant
user's documents related to the conversation.
&lt;|eot_id|&gt;

&lt;|start_header_id|&gt;assistant&lt;|end_header_id|&gt;
Hi there! I\'m a helpful AI assistant with access to your documents. What can I do for you today?
&lt;|eot_id|&gt;
&lt;|start_header_id|&gt;user&lt;|end_header_id|&gt;
What is the name of the first steam game I developed?
&lt;|eot_id|&gt;
&lt;|start_header_id|&gt;assistant&lt;|end_header_id|&gt;
Survival Ball, which you published in 2018
&lt;|eot_id|&gt;
&lt;|start_header_id|&gt;user&lt;|end_header_id|&gt;
which interesting things could you tell me about it?
&lt;|eot_id|&gt;

&lt;|start_header_id|&gt;document keeper&lt;|end_header_id|&gt;
</pre></div>
</div>
</div>

<p><br />
This LLM’s reply would be <code>Which are interesting facts about Survival Ball, a game developed in 2008?</code>.</p>

<h3 id="fetching-contents-related-to-a-query">2. Fetching contents related to a query</h3>

<p>Now that we have a query, such as “Which are interesting facts about Survival Ball, a game developed in 2008?”, how can we get the documents (Obsidian notes and/or WhatsApp messages) that are most relevant with that query?</p>

<p>One possible way would be to perform a custom decomposition of the query phrase, and attempt to look for documents that most referenced similar words to the query. This custom search would be brittle, require careful heuristics to match these, and would not completely take into account what that sentence means, and therefore the matching between query and documents would be likely unreliable.</p>

<p>Instead, we have a much more powerful concept at our disposal, which will help us perform this matching: text embeddings.</p>

<h4 id="text-embeddings">Text embeddings</h4>

<p>The idea behind text embeddings is that if we transform a given piece of text into a vector that is in close proximity to other vectors that have a similar meaning, then from a given query text we can get the most conceptually similar pieces of text to it. <sup id="fnref:4"><a href="#fn:4" rel="footnote">4</a></sup></p>

<p>For example, if the vectors representing our text were trained to be closer together when they rhyme, then close to the word “dog”, we might have the word “fog” closer to it, but “cat” further away; and conversely, if we trained these to represent their conceptual meaning, then for the word “dog”, we might see the word “cat” nearer to it, but “floor” further away <sup id="fnref:5"><a href="#fn:5" rel="footnote">5</a></sup></p>

<p>A mind-boggling implication is that we can perform algebraic expressions on these vectors. For example, if our vectors were trained to represent the meaning of the text we could have the following:</p>

<ul>
  <li>The classical example is that if grab the vectors for king, woman and man, and perform this operation: <code>(king + woman) - man</code>, the closest vector could be <code>queen</code></li>
  <li><code>(London + Japan) - England -&gt; Tokyo</code></li>
  <li><code>(boat - fly) - airplane -&gt; sail</code></li>
  <li><code>(cow - oink) - pig -&gt; moos</code></li>
</ul>

<p>Likewise, if we probe which are the closest pieces of text related to <code>dog</code>, we could get <code>dogs, puppy, pit_bull, pooch</code></p>

<p>These examples were takes from an actual working <a href="https://en.wikipedia.org/wiki/Word2vec">word2vec</a> model that was trained on a google news dataset, which I invite you to explore in this <a href="https://colab.research.google.com/drive/1qxnNUojAzIniOXwFZi4y7NlWk4cTzIMZ?usp=sharing">Google Colab notebook</a>.</p>

<center>
  <div class="image-mosaic">
  <div class="image-mosaic-card image-mosaic-card-tall image-mosaic-card-wide" style="background-image: url('/files/personal_llm/google_colab_word2vec.png')"></div>
  </div>
  <figcaption class="media-caption" style="margin-top: -7px; margin-bottom: 24px;"> Exploring the above examples using a <a href="https://colab.research.google.com/drive/1qxnNUojAzIniOXwFZi4y7NlWk4cTzIMZ?usp=sharing">word2vec model in Google Colab</a></figcaption>
</center>

<p>For our project’s objective, the most relevant property is the latter one. Given query text, we would transform it into a vector, and get the closest vectors in our document (vector) database, which in our project will be supported by a PostgreSQL database using the <a href="https://github.com/pgvector/pgvector">pgvector</a> extension. More about this below.</p>

<h1 id="putting-it-all-together">Putting it all together</h1>

<p>With the prior knowledge for the previous section, we are now in a position to build an system architecture that would best fit our objective:</p>

<figure class="image"><center><a href="https://lopespm.com/files/personal_llm/architecture.png"><img src="https://lopespm.com/files/personal_llm/architecture.png" /></a></center><figcaption class="media-caption"> Personal LLM Architecture </figcaption></figure>

<p>The overall idea is that we have a Llama3 8B LLM powering the main AI assistant, which has its knowledge augmented via RAG (Retrieval Augmented Generation) by using another Llama3 8B LLM to generate queries used to retrieve documents from a vector database powered by PostgreSQL. These retrieved documents are then added to the main LLM’s context, and the LLM generates a response based on the retrieved documents + user’s prompt + ongoing conversation. Below are further details for these.</p>

<ol>
  <li>First <em>prepare documents and store them</em> in a vector database.</li>
  <li>and then, when using the chat interface, <em>evaluate the user’s input and conversation</em>, query the vector database for relevant documents, add them as context into the main LLMs prompt, which will output the response that the user will see.</li>
</ol>

<h2 id="document-preparation-and-storage">Document preparation and storage</h2>

<p>Before anything else, all Obsidian notes and WhatsApp messages are exported, parsed, transformed into text embeddings, and inserted into the vector database.</p>

<h3 id="exporting-the-data-sources">1. Exporting the data sources</h3>

<p>No export procedure is required for Obsidian, since it stores its text contents inside markdown (<code>.md</code>) files, we just need to point directly to the folder we want to target, which can be a vault’s root folder, for example.</p>

<p>For WhatsApp messages, a <code>result.json</code> holding a structured JSON dump of all messages and their respective metadata, is generated via an open source exporting utility which extracts all messages from the local WhatsApp database present in the mobile device; and a <code>contacts.csv</code> is exported from all Google contacts, in order to enrich the context of the aforementioned messages. A step-by-step process to generate these is described <a href="https://github.com/lopespm/personal_llm?tab=readme-ov-file#setup-of-data-sources">in the repo’s Readme</a></p>

<h3 id="parse-vectorize-and-persist">2. Parse, vectorize and persist</h3>

<p>With our data sources ready, we can now start extracting relevant information, transforming the relevant content into a vector, and then persist into a vector database. The entire process is made by running:</p>

<div><div class="CodeRay">
  <div class="code"><pre>$ python create_and_persist_embeddings.py
</pre></div>
</div>
</div>
<p><br /></p>

<p>Each of the separate Obsidian note paragraphs and WhatsApp messages are accumulated into a single entry, so that locally close contextual content can be readily available and provided to the main LLM AI assistant, when retrieved, so that it has better immediately relevant contextual information about a given topic. It was chosen to accumulate a set of note paragraphs / messages that in total would not surpass the maximum content length of the model used to vectorize the content, which in this case has a maximum content length of 514 (see how to get the maximum content length <a href="https://gist.github.com/lopespm/342bd297f0cd6a2819f69a1ea10e7777">here</a>).</p>

<p>All of these are <a href="https://github.com/lopespm/personal_llm/blob/main/create_and_persist_embeddings.py#L7">batch processed</a>, so that vector embedding creation can be done much more efficiently. Given that in total there were 25M characters worth of content across these two data sources, these optimizations make a substantial change in the processing run time. Further optimizations could be made in optimizing <a href="https://github.com/lopespm/personal_llm/blob/main/create_and_persist_embeddings.py#L33-L36">DB insertion commits</a> and streaming each of the data sources contents, instead of storing them entirely into memory.</p>

<h4 id="obsidian">Obsidian</h4>

<p>The python script calls into a <a href="https://github.com/lopespm/personal_llm/blob/main/obsidian_to_embeddings.py">custom module</a> that traverses through all the markdown (<code>.md</code>) files inside Obsidian’s root folder and its respective descendent folders, and accumulate a group of lines in a given file into a distinct entry.</p>

<p>For example, a Obsidian note called <code>Survival Ball TV.md</code> with this content</p>

<div><div class="CodeRay">
  <div class="code"><pre>Only had to take OUYA project, change some resources to match Android TV controllers, detect Nexus Remote.
Test on the Nexus Player
Delete all OUYA related resources
Most of the time was spent (...)
</pre></div>
</div>
</div>
<p><br /></p>

<p>Would be broken down into to two separate database entries <sup id="fnref:6"><a href="#fn:6" rel="footnote">6</a></sup>:</p>

<ul>
  <li>Entry 1.
    <ul>
      <li>DB ID of the entry</li>
      <li>Content: <code>Only had to take OUYA project, change some resource (...)</code> - these would be first lines of the note</li>
      <li>Source: <code>&lt;obsidian&gt;:Survival Ball TV</code></li>
      <li>Embedding: the vector representation the content text (content attribute above)</li>
    </ul>
  </li>
  <li>Entry 2.
    <ul>
      <li>DB ID of the entry</li>
      <li>Content: <code>Unity is pretty great, and has tons of really great stuff (...)</code> - the lines coming after the ones in Entry 1. above</li>
      <li>Source: <code>&lt;obsidian&gt;:Survival Ball TV</code></li>
      <li>Embedding: the vector representation of the content text (content attribute above)</li>
    </ul>
  </li>
</ul>

<figure class="image"><center><a href="https://lopespm.com/files/personal_llm/obsidian_db_entry2.png"><img src="https://lopespm.com/files/personal_llm/obsidian_db_entry2.png" /></a></center><figcaption class="media-caption"> Sample Obsidian entries in the vector database <sup>6</sup> </figcaption></figure>

<h4 id="whatsapp">WhatsApp</h4>

<p>Likewise, the script also calls into a <a href="https://github.com/lopespm/personal_llm/blob/main/whatsapp_to_embeddings.py">custom module</a> that traverses all the messages, and similarly to the approach taken above for Obsidian notes, a set of messages are aggregated into a single entry.</p>

<p>For example, a WhatsApp conversation on the “Deeper Conversations” chat group would be broken down into several different entries, such as [^6]:</p>

<ul>
  <li>Entry 1.
    <ul>
      <li>DB ID of the entry</li>
      <li>Content: <code>message from "Deeper Conversations 💭" to me, on 2021-06-26 10:15:44: And that’s absolutely normal (...)</code> - several lines of the conversation would be aggregated here</li>
      <li>Source: <code>&lt;whatsapp&gt;:xxxxxxxx-yyyyyyyy@t.as</code> (the numbers were redacted)</li>
      <li>Embedding: the vector representation of the content text (content attribute above)</li>
    </ul>
  </li>
  <li>Entry 2.
    <ul>
      <li>DB ID of the entry</li>
      <li>Content: <code>message from "Deeper Conversations 💭" to me, on 2021-07-04 18:37:54: Challenge yourself (...)</code> - another group of several lines of the conversation would be aggregated here</li>
      <li>Source: <code>&lt;whatsapp&gt;:xxxxxxxx-yyyyyyyy@t.as</code> (the numbers were redacted)</li>
      <li>Embedding: the vector representation of the content text (content attribute above)</li>
    </ul>
  </li>
  <li>Entry 3., 4., etc would have a similar structure to the ones above</li>
</ul>

<figure class="image"><center><a href="https://lopespm.com/files/personal_llm/whatsapp_db_entry.png"><img src="https://lopespm.com/files/personal_llm/whatsapp_db_entry.png" /></a></center><figcaption class="media-caption"> Sample WhatsApp entries in the vector database <sup>6</sup> </figcaption></figure>

<h3 id="storage-vector-database">3. Storage (Vector Database)</h3>

<p>The storage of the above entries is handled by a PostgreSQL database using the <a href="https://github.com/pgvector/pgvector">pgvector</a> extension, which allows PostgreSQL to store and query vector attributes, and notably for our project, it provides tha capability to query for the closest vectors / entries related to a given query vector via <a href="https://en.wikipedia.org/wiki/Cosine_similarity">cosine similarity</a> <sup id="fnref:7"><a href="#fn:7" rel="footnote">7</a></sup>.</p>

<p>The database is hosted via a docker container, which makes it easily encapsulated and quick to set up and run.</p>

<h2 id="embedding-model">Embedding model</h2>

<p>As we <a href="https://lopespm.com/machine_learning/2024/06/24/personal-llm.html#text-embeddings">discussed above</a>, embedding models can be trained have their embedding representation to be optimized and better suit the problem at hand. In general, there are several types of tasks a embedding can be better or worse at, so testing each single model against our problem would certainly inefficient.</p>

<p>Fortunately, a Massive Text Embedding Benchmark was been made and its results are freely available <a href="https://huggingface.co/spaces/mteb/leaderboard">in this dashboard</a>, which compares several models against capabilities such as classification, clustering and reranking.</p>

<figure class="image"><center><a href="https://lopespm.com/files/personal_llm/text_embedding_model_leaderboard.png"><img src="https://lopespm.com/files/personal_llm/text_embedding_model_leaderboard.png" /></a></center><figcaption class="media-caption"> Massive Text Embedding Benchmark (MTEB) Leaderboard </figcaption></figure>

<p>The model used for this project is <a href="https://huggingface.co/intfloat/multilingual-e5-large"><code>intfloat/multilingual-e5-large</code></a><sup id="fnref:8"><a href="#fn:8" rel="footnote">8</a></sup>, which was chosen for its:</p>

<ul>
  <li>Reasonable embedding dimensions (1024), which essentially means of many dimensions will the embedding vector have, allowing for a reduced database footprint and faster retrieval when compared to higher dimension models (such as GritLM-8x7B with 4096 dimensions)</li>
  <li>Good average score across the all tasks (ranking 20th overall)</li>
  <li>And most notably support 100 different languages, <a href="https://arxiv.org/pdf/1911.02116">one of them being Portuguese</a>, which is quite relevant since my notes and messages are largely a mix of English and Portuguese, with some sprinkles of other languages (which this model also supports)</li>
</ul>

<p><em>Related (source code <a href="https://github.com/lopespm/personal_llm/blob/main/embedding_generator_multilingual.py">here</a>)</em></p>

<h2 id="evaluation-phase">Evaluation phase</h2>

<p>Having all the documents vectorized and available in a database, we can now jump into the evaluation phase, in which we leverage upon these on chat conversation with an AI assistant.</p>

<p>To start the chat session, we only need to activate the respective conda environment <sup id="fnref:9"><a href="#fn:9" rel="footnote">9</a></sup> and execute:</p>

<div><div class="CodeRay">
  <div class="code"><pre>$ python main.py
</pre></div>
</div>
</div>
<p><br /></p>

<h3 id="the-main-ai-assistant-llm">1. The main AI Assistant LLM</h3>

<p>Upon starting the above script, a Llama3 8B model (<a href="https://huggingface.co/mlx-community/Meta-Llama-3-8B-Instruct-4bit">mlx-community/Meta-Llama-3-8B-Instruct-4bit</a>) is loaded into memory and is instructed to behave as AI assistant / philosopher / psychotherapist (or any other role one so wishes, as <a href="https://lopespm.com/machine_learning/2024/06/24/personal-llm.html#results">seen below</a>, and the user is greeted with an initial message, and is able to start inserting a prompt.</p>

<figure class="image"><center><a href="https://lopespm.com/files/personal_llm/greeting.png"><img src="https://lopespm.com/files/personal_llm/greeting.png" /></a></center><figcaption class="media-caption"> Greeting message from the AI assistant </figcaption></figure>

<p>This will be LLM having the conversation with the user.</p>

<h3 id="transform-conversation-into-db-query">2. Transform conversation into DB query</h3>

<p>Once the user inserts their prompt, the entire conversation is provided to an auxiliary “document keeper” LLM, which has only one job: transform the entire conversation the user is having with the main AI assistant into concise sentence that aims to represent the information we are interested to provide as context on the upcoming reply.</p>

<p>The document keeper LLM produces a query sentence <a href="https://lopespm.com/machine_learning/2024/06/24/personal-llm.html#transforming-a-conversation-into-a-query">using the previously described process</a> (related <a href="https://github.com/lopespm/personal_llm/blob/main/formulate_query_for_retrieving_content.py">source code</a>), and then transforms it into a vector using the <a href="https://lopespm.com/machine_learning/2024/06/24/personal-llm.html#embedding-model">embedding model</a>.</p>

<p>Now we have everything we need. Using this vector representation of the query, we can ask the database which are the top 10 entries which have their respective vectors closest to the query vector.</p>

<p>So for example, if the text query created by the “document keeper” LLM is <code>Which are interesting facts about Survival Ball, a game developed in 2008?</code> (resulting in a vector representation of [1.3, 4.2, 3.3, etc]), then a <a href="https://github.com/lopespm/personal_llm/blob/main/retrieve_related_content_from_db.py">SQL query such as this one would be made against the DB</a>:</p>

<div><div class="CodeRay">
  <div class="code"><pre><span class="class">SELECT</span> id, content, source, <span class="integer">1</span> - (embedding &lt;=&gt; [<span class="float">1.3</span>, <span class="float">4.2</span>, <span class="float">3.3</span>, etc]) <span class="keyword">AS</span> cosine_similarity
<span class="keyword">FROM</span> items
<span class="keyword">ORDER</span> <span class="keyword">BY</span> cosine_similarity <span class="directive">DESC</span> LIMIT <span class="integer">10</span>,
</pre></div>
</div>
</div>
<p><br /></p>

<h3 id="retrieved-entries-are-added-as-context-on-the-main-ai-llm-prompt">3. Retrieved entries are added as context on the main AI LLM prompt</h3>

<p>Now that we have the retrieved a set of relevant entries we want the main AI assistant LLM to consider towards its reply, we now can add them as context for the prompt for the main AI assistant LLM, very similarly to what was <a href="https://lopespm.com/machine_learning/2024/06/24/personal-llm.html#insert-all-documents-into-the-prompt-as-context">described above</a>:</p>

<div><div class="CodeRay">
  <div class="code"><pre>
&lt;|begin_of_text|&gt;&lt;|start_header_id|&gt;system&lt;|end_header_id|&gt;

You are a AI assistant which answers the user's question based on your prior knowledge
and a collection of the user's documents.

Each of the documents has the format &lt;&lt;document:||document_name||&gt;&gt;||content||.
||document_name|| represents the document name. ||content|| represents the
document's content. Don't show the &lt;&lt;document:||document_name||&gt;&gt; portion to the user.

For example, for: &lt;&lt;document:&lt;obsidian&gt;:hello world&gt;&gt;This is an interesting
description of hello.
- ||document_name|| is &lt;obsidian&gt;:hello world
- ||content|| This is an interesting description of hello.

These are the user's documents:
----------
&lt;&lt;document:&lt;obsidian&gt;:lamas running down the street&gt;&gt;The content for lamas
going down the street
&lt;&lt;document:&lt;obsidian&gt;:alpacas running down the street&gt;&gt;That time when they saw a
alpaca running down the street.
&lt;&lt;document:&lt;whatsapp&gt;:aaaaaaa-bbbbbbbb@t.we&gt;&gt;message from &quot;Thy Table Turner&quot; to me, on 2024-03-26 13:15:44: I've just seen a alpaca shuffling down the street
&lt;&lt;document:&lt;whatsapp&gt;:aaaaaaa-bbbbbbbb@t.we&gt;&gt;message from me to &quot;Thy Table Turner&quot;, on 2024-03-26 13:16:32: Pretty sure it was lama though
----------

&lt;|start_header_id|&gt;user&lt;|end_header_id|&gt;Tell me about that time I've seen animals
running down the street&lt;|eot_id|&gt;

</pre></div>
</div>
</div>

<h3 id="output-from-the-ai-assistant-llm-presented-to-the-user">4. Output from the AI assistant LLM presented to the user</h3>

<p>We now have everything we need, and the prompt is ready to be <a href="https://github.com/lopespm/personal_llm/blob/main/main.py">evaluated by the main LLM</a>.</p>

<p>Once the prompt is evaluated by this LLM, we present the output to the user, and then we cycle through the entire evaluation phase again once the user submits their request.</p>

<h1 id="results">Results</h1>

<center>
 <div class="video-media-caption-wrapper-two"><div class="video-wrapper-two">
  <div class="youtube-player video-frame-two" data-id="QOpAox8iXAc"></div></div>
   <p class="media-caption media-caption-two">Example interaction with the AI LLM, having its role as &#8220;AI assistant&#8221;</p>
 </div>
  </center>

<p>Overall, I’ve found interactions with this AI to be quite interesting, even though sometimes it can output blobs of information that could be cleaner or have better answers. The former can be addressed by tweaking the prompts (i.e. prompt engineering) having increased efficacy towards the behavior I aim the Ai to have, and the latter by either cleaning Obsidian notes directly, or improving the data processing and extraction. Regardless, I find these results to be quite pleasing, useful and even amusing.</p>

<p>For example, the code allows you to choose the AI’s persona by changing <a href="https://github.com/lopespm/personal_llm/blob/main/main.py#L8-L10">this constant</a></p>

<figure class="image"><center><a href="https://lopespm.com/files/personal_llm/ai_role.png"><img src="https://lopespm.com/files/personal_llm/ai_role.png" /></a></center><figcaption class="media-caption"> The AI&#8217;s persona is customizable </figcaption></figure>

<p>When choosing the AI’s persona to be of a AI “psychotherapist”, this happens <em>(disclaimer: please consult a professional if you require therapy, this agent is meant for pedagogical / entertainment / utilitarian uses only)</em>:</p>

<figure class="image"><center><a href="https://lopespm.com/files/personal_llm/ai_psycotherapist.png"><img src="https://lopespm.com/files/personal_llm/ai_psycotherapist.png" /></a></center><figcaption class="media-caption"> Example interaction with the AI LLM, having its role as &#8220;AI assistant&#8221;  </figcaption></figure>

<h1 id="final-notes">Final Notes</h1>

<h2 id="adding-other-data-sources">Adding other data sources</h2>

<p>This project focuses on using Obsidian notes and WhatsApp messages to augment the main LLM, but virtually any piece of content could be used to augment it. CO2 historical readings, tax documents, financial statements, diplomas, official documents, calendar events, etc. Sky is the limit.</p>

<p>Doing so in practice would be as straightforward as adding an <a href="https://github.com/lopespm/personal_llm/blob/main/create_and_persist_embeddings.py">additional module to this script</a>, and have it return the pieces relevant pieces of content, and then re-run:</p>

<div><div class="CodeRay">
  <div class="code"><pre>$ python create_and_persist_embeddings.py
</pre></div>
</div>
</div>
<p><br /></p>

<h2 id="inspiring-wealth-of-possibilities">Inspiring wealth of possibilities</h2>

<p>This type of assistant has been something I’ve been daydreaming for a long time, and having the peace of mind that I have full control and customization of it is something that profoundly satisfies me. Not only that, this entire project has an immense learning opportunity for me, and as I researched through it and pieced the puzzle pieces together, I’ve felt humbled and inspired by the explosive amount of possibilities that these models provide.</p>

<p>For example, just browsing through the <a href="https://huggingface.co/models">wealth of freely available models</a>, ready to be used, combined and assembled into different scenarios, leaves me at awe:</p>

<figure class="image"><center><a href="https://lopespm.com/files/personal_llm/hugging_face_models.png"><img src="https://lopespm.com/files/personal_llm/hugging_face_models.png" /></a></center><figcaption class="media-caption"> A sample of different classes of models available in Hugging Face. Each of those having dozens of models, sometimes thousands. All freely available. </figcaption></figure>

<h2 id="further-references">Further references</h2>

<p>I find it fulfilling to learn about a subject by fundamentally understanding its core components, hence the usage of several lower level components, <a href="https://lopespm.com/machine_learning/2016/10/06/deep-reinforcement-learning-racing-game.html">similar to how I previously built a deep reinforcement learning agent</a>), but there are several readily available tools and libraries that handle a lot of the heavy lifting:</p>

<ul>
  <li><a href="https://www.langchain.com/">LangChain</a>: framework designed to simplify the creation of applications using large language models (LLMs). As a language model integration framework, LangChain’s use-cases largely overlap with those of language models in general, including document analysis and summarization, chatbots, and code analysis. This could have been used to abstract most, if not all, of the RAG heavy lifting, which is quite useful.</li>
  <li>Other Vector Databases: although PostgreSQL worked great for this project, there are other possible, such as <a href="https://www.pinecone.io/learn/retrieval-augmented-generation/">Pinecone</a> (this is a externally hosted DB, hence why it was not considered), <a href="https://qdrant.tech/">Qdrant</a>, <a href="https://www.trychroma.com/">chroma</a>, <a href="https://github.com/facebookresearch/faiss">faiss</a> or <a href="https://www.mongodb.com/resources/basics/retrieval-augmented-generation">MongoDB</a></li>
  <li><a href="https://replicate.com/">Replicate</a>: Similarly to Hugging Face, Replicate is a platform that collects various open-source large language models (LLMs), offering AI models for a variety of purposes, including AI text generation, AI image generation, and AI video generation. Developers can use these models through Replicate’s API.</li>
</ul>

<h1 id="source-code">Source code</h1>

<p>All source code is available on GitHub at <a href="https://github.com/lopespm/personal_llm">https://github.com/lopespm/personal_llm</a></p>

<p><br /></p>

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>Obsidian is an amazing platform / app which I vividly recommend. I’ve recently migrated all of my notes from Evernote into Obsidian, and couldn’t be happier. Obsidian stores all of the notes in plain <code>.md</code> files that are yours to keep, and allows you to completely customize it to your heart’s desire. For example, I created a custom script that packages all of the notes, encrypts it, and stores that vault into my Google Drive. I would be happy to provide more details about this in a posterior note.<a href="#fnref:1" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:2">
      <p>Note that these calculations are based on loading + inference for a batch size of 1. Training a model required far more VRAM<a href="#fnref:2" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:3">
      <p>Specifically, I’ve used the model available on hugging face at <a href="https://huggingface.co/mlx-community/Meta-Llama-3-70B-Instruct-4bit">mlx-community/Meta-Llama-3-70B-Instruct-4bit</a><a href="#fnref:3" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:4">
      <p>The process of how these embedding models are trained is a fascinating topic by itself. The idea behind it is that you place a given piece of text on the model’s input and on its corresponding contextual word on the output, and then train the model to attempt to correctly predict the output text. For example, if using a word2vec skip-gram architecture, the input is a single word and the output is trained to be the words around it. The model’s number of weights is lower than the number of pieces of text in the dictionary, so that the model is forced to compress these associations into its weights. Once the model is trained, we use its learned weights to generate an embedding for a given piece of text. When a model is trained on large swathes of text, this simple method yields incredible results.<a href="#fnref:4" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:5">
      <p>In practice, representing these vectors as being closer together when they rhyme, vs when they are conceptually closer, can be achieved by training the embedding model on poetry books and giving higher emphasis on the last words of each line for the former, and training the embedding model on more generic text datasets, such as wikipedia, and using samples around the seed word uniformly as target words (using a <a href="https://en.wikipedia.org/wiki/Word2vec">skip-gram</a> architecture for example) for the latter.<a href="#fnref:5" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:6">
      <p>These screenshots were taken from <a href="https://dbeaver.io/">DBeaver</a>, and open source universal database tool which is incredibly powerful and well designed.<a href="#fnref:6" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:7">
      <p>The pgvector extension supports L2 distance, inner product, cosine distance, L1 distance, Hamming distance, and Jaccard distance.<a href="#fnref:7" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:8">
      <p>Related backing “Multilingual E5 Text Embeddings: A Technical Report” paper for this model is available in <a href="https://arxiv.org/pdf/2402.05672">arxiv</a><a href="#fnref:8" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:9">
      <p>Conda provides for a self-contained and easy way to manage packages and environments. Whereas pip is a package manager and virtualenv is an environment manager, conda is both. Here is an <a href="https://docs.conda.io/projects/conda/en/latest/commands/index.html#conda-vs-pip-vs-virtualenv-commands">illustrative comparison table</a><a href="#fnref:9" rel="reference">&#8617;</a></p>
    </li>
  </ol>
</div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Aloof]]></title>
    <link href="https://lopespm.com/notes/2024/06/09/aloof.html"/>
    <updated>2024-06-09T00:00:00+00:00</updated>
    <id>https://lopespm.com/notes/2024/06/09/aloof</id>
    <content type="html"><![CDATA[<h2 id="einsteins-rambles">Einstein’s rambles</h2>

<p>I’ve been listening to the <a href="https://www.amazon.co.uk/Einstein-Life-Universe-Walter-Isaacson/dp/1847390544">“Einstein: His Life and Universe”</a> audiobook, from Walter Isaacson, which recounts a series of curious stories of how he carried himself through his life.</p>

<p>Einstein was often known to be aloof and lost in this thoughts, so much so that when sailing his clunky 15-foot sailboat named Tinef (Yiddish for “worthless” or “junk”), he often found himself to being rescued more than once by locals near to his rented a summer cottage overlooking Cutchogue Harbor.</p>

<p>Another delightful story was when he lived in Princeton, where occasionally, he would take rambling walks on his own. One day, called into the Institute for Advanced Study, where he worked, and asked to speak to a particular dean. When the secretary said that the dean wasn’t available, he hesitantly asked for Einstein’s home address. That was not possible to give out, he was informed. His voice then dropped to a whisper. “Please don’t tell anybody,” he said, “but I am Dr. Einstein, I’m on my way home, and I’ve forgotten where my house is.”</p>

<h2 id="thinking-in-safety">Thinking, in safety</h2>

<p>Over the past years, I’ve made a habit of having at least one long walk / hike every weekend. I take immense joy - if I happen to go by myself and I’m not actively listening to an audio book or am concentrating on some task - to just wander around and immerse myself in random thoughts, think about hard problems, strategise, and attempt to arrive at sound conclusions. This mental wandering, almost like a meditation, I am sure that happens for most of us, in several instances. Maybe when waking up, during the shower, during a walk, during a boring talk, when contemplating art or nature, etc.</p>

<p>Since we are not omniscient and omnipresent, we have several limitations in knowing how a given action will translate into a set of consequences, so we use probabilistic models and heuristics in our thought processes to discern which are the most likely actions that will help us arrive at a desirable outcome. And the more relevant information and time we have to process our thoughts, the better our results will be.</p>

<p>In all of these, I believe there is one common denominator that is fundamental for that process to happen: safety.</p>

<h2 id="the-influence-of-ones-environment">The influence of one’s environment</h2>

<p>Let’s assume you live with access to information and resources (food, money, shelter, etc), but are living in a situation where your surrounding environment requires you to keep alert and attentive to hazard to your physical / mental wellbeing, or you are in a situation where your social stability is dependent on incapacitating amounts of your energy and time. This could be due to living in a dangerous neighborhood, having overly demanding peers, an abusive household, etc.</p>

<p>Even though there might be a series of limited actions one could take to improve their situation, the constant fight-or-flight severely restricts the opportunities where these action plans can be considered, which eventually leads to reactive actions that could have a number of possible outcomes (good or bad), rather than surgical long term actions that would pave the path towards positive outcomes.</p>

<h2 id="the-takeaway">The takeaway</h2>

<p>While many many situations are not under our control, such as our initial conditions, birth place, etc, which place a default upper bound on any possible outcomes, we do have agency over some parts of our life, and that is what we can focus on. The path to unwanted consequences is a slippery slope made of several small decisions, some under our control, others not. But for the ones we have the opportunity to control, we should.</p>

<p>For example, the peers one <em>choses</em> to have around, the <em>choice</em> to avoid short term pleasures that have a high long term cost, the <em>choice</em> of which country or neighborhood to live in, the <em>choice</em> of which job offer to strive for, etc.</p>

<p>Do notice that the italics are intentional. The <em>choices</em> above assume that those are options you have under your control to pick, which I am conscious that is not always the case.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Let me tell you a story]]></title>
    <link href="https://lopespm.com/notes/2024/05/05/let-me-tell-you-a-story.html"/>
    <updated>2024-05-05T00:00:00+00:00</updated>
    <id>https://lopespm.com/notes/2024/05/05/let-me-tell-you-a-story</id>
    <content type="html"><![CDATA[<div>
  <div class="youtube-player" data-id="EVn6VGlig1s" data-thumbsize="1"></div>
</div>
<p><br /></p>

<blockquote>
  <p>You could never convince a monkey to give you a banana by promising him limitless bananas after death in monkey heaven. How do you cause people to believe in an imagined order such as Christianity, democracy or capitalism? First, you never admit that the order is imagined.</p>

  <p><em>― Yuval Noah Harari</em></p>
</blockquote>

<p>Take a minute to think of what a nation is. Let’s say the United States of America. What makes someone American? Is it their physique, genetic traits, family lineage, pheromones? No, it’s a concept in their head, which stems from a mix of identity, ideology, personal gains from abiding to that concept (say, gaining currency via a job or a company, that allows you to acquire things you desire), perceived protection and support from peers because they believe you are commonly aligned on core beliefs / concepts.</p>

<p>The same can be said of a company. A company is not a physical being, it’s a shared idea in our imagination. As Yuval mentions in <a href="https://www.amazon.co.uk/Sapiens-Humankind-Yuval-Noah-Harari/dp/0099590085">Sapiens</a>, Peugeot does not really exist, except in our minds. It doesn’t have a body, mind, anything. We have the common belief that Peugeot exists, because we also have the common belief of what a company means, we are aligned on how it should be represented and who can represent it, we recognize it as an entity with rights and duties, and which laws it should abide by.</p>

<p>Laws, as well, are worth nothing if only one person believes in them. They are powerful because a large group of people believe in them, and they expect others to do so as well. That’s why we have courts, prisons, and educational systems for that matter. They are ways to punish, format, and incentivise for the entire group to have the required level of consistency, and keep rowing in the same direction.</p>

<p>That’s why complete anarchy loses its edge on a large scale. It extinguishes the biggest thing Humans have going for them: the ability for large numbers of people to rally in common goals, even though they don’t personally know most of their fellow believers.</p>

<p>As N. K. Humphrey suggests, these ideas, behaviors, or styles that spread by means of imitation from person to person within a culture, also known as memes, could even be considered as living structures, not just metaphorically. The generational propagation of a meme outweighs the lifespan of the Human who created it, so in a way, <em>“we are living inside the dreams of dead people”</em>, as Yuval puts it.</p>

<p>That being said, how do we align on a common concept or belief?</p>

<h2 id="stories">Stories</h2>

<p>We’ve seen above how powerful and valuable having a broad range of concepts aligned within a group of people. They bring value to the whole, but also to the individual.</p>

<p>You can force someone to abide to a given concept via force (coercion, blackmailing, etc), but since they see little value going on for them, they don’t have the incentive to grow that concept inside them, or to propagate that concept to others</p>

<p>Stories however, allow you to describe a world to others that they can interpret in their head, and they can see by themselves how it would benefit them, and the ones around them. It’s an information passage mechanism that allows Humans to communicate and agree on a given concept, and they are everywhere:</p>

<ul>
  <li>Children’s bedtime stories - notice how several of these transmit moral values, this is, expectations of how one should behave in a given situation, in order to be in alignment with the overall group / society</li>
  <li>Novels, biographies, movies</li>
  <li>When interviewees tell you a story of their childhood, how they created their company, how they achieved X, what happened during their struggles, etc</li>
  <li>When a leader, such as a CEO, convinces others of their vision / story, and that future prospects that would derive from working in a certain direction</li>
  <li>When meeting someone, when you talk about your background and your goals</li>
  <li>When you sell you employee skills to an employers, giving a summary of your professional trajectory</li>
  <li>When politicians portray their vision on how they want to improve their nation</li>
  <li>The lore of a nation, tribe, family, and their laws / duties / rights</li>
</ul>

<h3 id="being-a-good-storyteller-is-a-powerful-skill">Being a good storyteller is a powerful skill</h3>

<p>As a species, one of our biggest distinguishing factors is that we are able to goal on highly abstract concepts that only exist in our minds, such as the concept of a company, a nation, a mission, an ideology, an intellectual relationship, the concept of money. As Yuval puts it, <em>“We are the only species with the ability to use language—not just to describe things we can see, taste, and touch, but also to invent stories about things that don’t exist.”</em></p>

<p>A magical thing happens when a group of people interpret and value that concept in the same way, and are highly aligned on it. Narrative is the first and most crucial step for leaders who want to solve big problems and shape the world for the better. After all, a person can have the greatest idea in the world, but if they fail to rally others to make that idea come alive, nothing gets done.</p>
]]></content>
  </entry>
  
</feed>
